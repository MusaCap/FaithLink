(()=>{var e={};e.id=514,e.ids=[514],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),r(1384),r(8131),r(5866);var s=r(3191),a=r(8716),n=r(7922),i=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["journey-templates",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1384)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\journey-templates\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8131)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\journey-templates\\new\\page.tsx"],c="/journey-templates/new/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/journey-templates/new/page",pathname:"/journey-templates/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6750:(e,t,r)=>{Promise.resolve().then(r.bind(r,3659))},8393:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(326),a=r(7577),n=r(6608),i=r(8122),l=r(5047),o=r(8082),d=r(2523),u=r(6343),c=r(3468),m=r(3855),p=r(6557);let h=(0,p.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var y=r(8998);let x=(0,p.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var b=r(8393),f=r(8091),g=r(1215);function j({template:e,onSave:t,onCancel:r}){let{user:n}=(0,o.a)(),i=(0,l.useRouter)(),[p,j]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[N,_]=(0,a.useState)({name:e?.name||"",description:e?.description||"",category:e?.category||"discipleship",difficulty:e?.difficulty||"beginner",estimatedDuration:e?.estimatedDuration||30,isPublic:e?.isPublic||!1,tags:e?.tags||[],prerequisites:e?.prerequisites||[],targetAudience:e?.targetAudience||[]}),[k,$]=(0,a.useState)(e?.milestones.map(e=>({title:e.title,description:e.description,order:e.order,type:e.type,content:e.content,requirements:e.requirements,estimatedDays:e.estimatedDays,isRequired:e.isRequired,resources:e.resources}))||[{title:"",description:"",order:1,type:"reading",estimatedDays:7,isRequired:!0,resources:[]}]),[T,S]=(0,a.useState)(""),[q,C]=(0,a.useState)(0),P=(e,t)=>{_(r=>({...r,[e]:t}))},M=(e,t)=>{_(r=>({...r,[e]:t}))},E=()=>{T.trim()&&!N.tags.includes(T.trim())&&(M("tags",[...N.tags,T.trim()]),S(""))},J=e=>{M("tags",N.tags.filter(t=>t!==e))},D=(e,t,r)=>{$(s=>s.map((s,a)=>a===e?{...s,[t]:r}:s))},O=e=>{k.length>1&&($(t=>t.filter((t,r)=>r!==e)),q>=k.length-1&&C(Math.max(0,q-1)))},A=(e,t)=>{if("up"===t&&e>0){let t=[...k];[t[e-1],t[e]]=[t[e],t[e-1]],t.forEach((e,t)=>{e.order=t+1}),$(t),C(e-1)}else if("down"===t&&e<k.length-1){let t=[...k];[t[e],t[e+1]]=[t[e+1],t[e]],t.forEach((e,t)=>{e.order=t+1}),$(t),C(e+1)}},Z=async r=>{if(r.preventDefault(),!N.name.trim()){w("Template name is required");return}if(0===k.length){w("At least one milestone is required");return}if(k.filter(e=>!e.title.trim()).length>0){w("All milestones must have a title");return}j(!0),w(null);try{let r;let s={...N,title:N.name.trim(),description:N.description.trim()||"",milestones:k.map((e,t)=>({...e,order:t+1,title:e.title.trim(),description:e.description.trim()}))};r=e?await d.u.updateJourneyTemplate({id:e.id,...s}):await d.u.createJourneyTemplate(s),t?t(r):i.push(`/journey-templates/${r.id}`)}catch(e){w(e instanceof Error?e.message:"Failed to save journey template")}finally{j(!1)}},L=[{value:"reading",label:"Reading"},{value:"reflection",label:"Reflection"},{value:"action",label:"Action"},{value:"meeting",label:"Meeting"},{value:"service",label:"Service"},{value:"study",label:"Study"},{value:"prayer",label:"Prayer"},{value:"assessment",label:"Assessment"},{value:"event_attendance",label:"Event Attendance"},{value:"mentor_meeting",label:"Mentor Meeting"},{value:"custom",label:"Custom"}];return(0,s.jsxs)("form",{onSubmit:Z,className:"space-y-8",children:[v&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsx("div",{className:"text-sm text-red-700",children:v})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 mb-6 flex items-center",children:[s.jsx(u.Z,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Template Name *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.name,onChange:e=>P("name",e.target.value),placeholder:"Enter template name"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.description,onChange:e=>P("description",e.target.value),placeholder:"Describe the purpose and goals of this spiritual journey"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Category *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.category,onChange:e=>P("category",e.target.value),children:[s.jsx("option",{value:"new_believer",children:"New Believer"}),s.jsx("option",{value:"baptism_preparation",children:"Baptism Preparation"}),s.jsx("option",{value:"discipleship",children:"Discipleship"}),s.jsx("option",{value:"leadership_development",children:"Leadership Development"}),s.jsx("option",{value:"bible_study",children:"Bible Study"}),s.jsx("option",{value:"prayer_life",children:"Prayer Life"}),s.jsx("option",{value:"service_ministry",children:"Service & Ministry"}),s.jsx("option",{value:"evangelism",children:"Evangelism"}),s.jsx("option",{value:"spiritual_disciplines",children:"Spiritual Disciplines"}),s.jsx("option",{value:"life_skills",children:"Life Skills"}),s.jsx("option",{value:"marriage_family",children:"Marriage & Family"}),s.jsx("option",{value:"youth_development",children:"Youth Development"}),s.jsx("option",{value:"senior_ministry",children:"Senior Ministry"}),s.jsx("option",{value:"healing_recovery",children:"Healing & Recovery"}),s.jsx("option",{value:"custom",children:"Custom"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Difficulty Level *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.difficulty,onChange:e=>P("difficulty",e.target.value),children:[s.jsx("option",{value:"beginner",children:"Beginner"}),s.jsx("option",{value:"intermediate",children:"Intermediate"}),s.jsx("option",{value:"advanced",children:"Advanced"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Estimated Duration (days)"}),s.jsx("input",{type:"number",min:"1",max:"365",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.estimatedDuration,onChange:e=>P("estimatedDuration",parseInt(e.target.value))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"isPublic",className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500",checked:N.isPublic,onChange:e=>P("isPublic",e.target.checked)}),s.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-neutral-700",children:"Make this template public"})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:N.tags.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:[e,s.jsx("button",{type:"button",className:"ml-1 text-primary-600 hover:text-primary-800",onClick:()=>J(e),children:"\xd7"})]},e))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:T,onChange:e=>S(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),E())}}),s.jsx("button",{type:"button",onClick:E,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:"Add"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[s.jsx(c.Z,{className:"w-5 h-5 mr-2"}),"Journey Milestones (",k.length,")"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{let e=Math.max(...k.map(e=>e.order),0)+1;$(t=>[...t,{title:"",description:"",order:e,type:"reading",estimatedDays:7,isRequired:!0,resources:[]}]),C(k.length)},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[s.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Add Milestone"]})]}),s.jsx("div",{className:"space-y-4",children:k.map((e,t)=>(0,s.jsxs)("div",{className:"border border-neutral-200 rounded-lg",children:[s.jsx("div",{className:"p-4 cursor-pointer hover:bg-neutral-50",onClick:()=>C(q===t?-1:t),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(h,{className:"w-4 h-4 text-neutral-400"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-neutral-900",children:[t+1,". ",e.title||"Untitled Milestone"]})]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-blue-100 text-blue-800",children:L.find(t=>t.value===e.type)?.label}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-neutral-500",children:[s.jsx(y.Z,{className:"w-3 h-3 mr-1"}),e.estimatedDays," days"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),A(t,"up")},disabled:0===t,className:"p-1 text-neutral-400 hover:text-neutral-600 disabled:opacity-50",children:s.jsx(x,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),A(t,"down")},disabled:t===k.length-1,className:"p-1 text-neutral-400 hover:text-neutral-600 disabled:opacity-50",children:s.jsx(b.Z,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),O(t)},disabled:1===k.length,className:"p-1 text-red-400 hover:text-red-600 disabled:opacity-50",children:s.jsx(f.Z,{className:"w-4 h-4"})})]})]})}),q===t&&s.jsx("div",{className:"px-4 pb-4 border-t border-neutral-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Milestone Title *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.title,onChange:e=>D(t,"title",e.target.value),placeholder:"Enter milestone title"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),s.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.description,onChange:e=>D(t,"description",e.target.value),placeholder:"Describe what the member should accomplish"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Milestone Type"}),s.jsx("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.type,onChange:e=>D(t,"type",e.target.value),children:L.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Estimated Days"}),s.jsx("input",{type:"number",min:"1",max:"30",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.estimatedDays,onChange:e=>D(t,"estimatedDays",parseInt(e.target.value))})]}),s.jsx("div",{className:"md:col-span-2",children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500",checked:e.isRequired,onChange:e=>D(t,"isRequired",e.target.checked)}),s.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"This milestone is required"})]})})]})})]},t))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{r?r():i.back()},className:"px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:p,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[p?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):s.jsx(g.Z,{className:"w-4 h-4 mr-2"}),e?"Update Template":"Create Template"]})]})]})}function v(){return s.jsx(n.Z,{requiredRole:"pastor",children:s.jsx(i.Z,{children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Create Journey Template"}),s.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Design a spiritual growth pathway with milestones and resources"})]}),s.jsx(j,{})]})})})}},2523:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});let s=new Map,a=new Map;class n{async request(e,t={},r,a=3e4){let n=`${e}`,i=localStorage.getItem("auth_token"),l={"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},o={...t,headers:{...l,...t.headers}};if(r&&"GET"===t.method){let e=s.get(r);if(e&&Date.now()-e.timestamp<e.ttl)return console.log(`Cache hit for ${r}`),e.data}let d=Error("Request failed");for(let e=1;e<=3;e++)try{let i=await fetch(n,o);if(!i.ok){if(429===i.status){await new Promise(t=>setTimeout(t,1e3*e));continue}throw Error(`HTTP ${i.status}: ${i.statusText}`)}let l=await i.json();return r&&"GET"===t.method&&s.set(r,{data:l,timestamp:Date.now(),ttl:a}),l}catch(t){if(d=t instanceof Error?t:Error("Unknown error"),3===e)break;await new Promise(t=>setTimeout(t,1e3*e))}throw d}async getJourneyTemplates(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&(Array.isArray(r)?r.forEach(r=>t.append(e,String(r))):t.append(e,String(r)))});let r=`journey_templates_${t.toString()}`;return this.request(`/api/journey-templates?${t.toString()}`,{method:"GET"},r)}async getJourneyTemplate(e){let t=`journey_template_${e}`;return this.request(`/api/journey-templates/${e}`,{method:"GET"},t)}async createJourneyTemplate(e){let t=await this.request("/api/journey-templates",{method:"POST",body:JSON.stringify(e)});return this.invalidateTemplateCache(),t}async updateJourneyTemplate(e){let t=await this.request(`/api/journey-templates/${e.id}`,{method:"PUT",body:JSON.stringify(e)});return s.delete(`journey_template_${e.id}`),this.invalidateTemplateCache(),t}async deleteJourneyTemplate(e){await this.request(`/api/journey-templates/${e}`,{method:"DELETE"}),s.delete(`journey_template_${e}`),this.invalidateTemplateCache()}async duplicateJourneyTemplate(e,t){let r=await this.request(`/api/journey-templates/${e}/duplicate`,{method:"POST",body:JSON.stringify({name:t})});return this.invalidateTemplateCache(),r}async getMemberJourneys(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&t.append(e,String(r))});let r=`member_journeys_${t.toString()}`;return this.request(`/journeys/member-journeys?${t.toString()}`,{method:"GET"},r)}async getMemberJourney(e){let t=`member_journey_${e}`;return this.request(`/journeys/member-journeys/${e}`,{method:"GET"},t)}async assignJourneyToMember(e){let t=await this.request("/journeys/member-journeys",{method:"POST",body:JSON.stringify(e)});return this.invalidateMemberJourneyCache(),t}async updateMemberJourney(e){let t=await this.request(`/journeys/member-journeys/${e.id}`,{method:"PUT",body:JSON.stringify(e)});return s.delete(`member_journey_${e.id}`),this.invalidateMemberJourneyCache(),t}async deleteMemberJourney(e){await this.request(`/journeys/member-journeys/${e}`,{method:"DELETE"}),s.delete(`member_journey_${e}`),this.invalidateMemberJourneyCache()}async getMilestoneProgress(e,t){let r=`milestone_progress_${e}_${t}`;return this.request(`/journeys/member-journeys/${e}/milestones/${t}/progress`,{method:"GET"},r)}async startMilestone(e,t){let r=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/start`,{method:"POST"});return s.delete(`member_journey_${e}`),s.delete(`milestone_progress_${e}_${t}`),r}async completeMilestone(e,t,r){let a=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/complete`,{method:"POST",body:JSON.stringify({notes:r})});return s.delete(`member_journey_${e}`),s.delete(`milestone_progress_${e}_${t}`),a}async submitMilestone(e){let t=new FormData;t.append("type",e.type),t.append("content",e.content),e.attachments&&e.attachments.forEach((e,r)=>{t.append(`attachment_${r}`,e)});let r=localStorage.getItem("auth_token"),s=await fetch(`/api/journeys/milestone-progress/${e.milestoneProgressId}/submit`,{method:"POST",headers:{...r&&{Authorization:`Bearer ${r}`}},body:t});if(!s.ok)throw Error(`HTTP ${s.status}: ${s.statusText}`);let a=await s.json();return this.invalidateMemberJourneyCache(),a}async approveMilestone(e,t,r){let a=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/approve`,{method:"POST",body:JSON.stringify({feedback:r})});return s.delete(`member_journey_${e}`),s.delete(`milestone_progress_${e}_${t}`),a}async requestMilestoneRevision(e,t,r){let a=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/request-revision`,{method:"POST",body:JSON.stringify({feedback:r})});return s.delete(`member_journey_${e}`),s.delete(`milestone_progress_${e}_${t}`),a}async getJourneyStats(){return this.request("/journeys/stats",{method:"GET"},"journey_stats",6e4)}async getMemberJourneyStats(e){let t=`member_journey_stats_${e}`;return this.request(`/journeys/members/${e}/stats`,{method:"GET"},t,6e4)}async bulkAssignJourney(e,t,r){let s=await this.request("/journeys/bulk-assign",{method:"POST",body:JSON.stringify({memberIds:e,templateId:t,mentorId:r})});return this.invalidateMemberJourneyCache(),s}async bulkUpdateJourneyStatus(e,t){await this.request("/journeys/bulk-status",{method:"POST",body:JSON.stringify({journeyIds:e,status:t})}),this.invalidateMemberJourneyCache()}async exportJourneyTemplate(e,t="json"){let r=await fetch(`/api/journey-templates/${e}/export?format=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}async exportMemberJourneyProgress(e,t="pdf"){let r=await fetch(`/journeys/member-journeys/${e}/export?format=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}invalidateTemplateCache(){for(let[e]of s)e.includes("journey_template")&&s.delete(e)}invalidateMemberJourneyCache(){for(let[e]of s)(e.includes("member_journey")||e.includes("milestone_progress"))&&s.delete(e)}clearCache(){s.clear(),a.clear()}}let i=new n},1384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\journey-templates\new\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[935,434,772,62],()=>r(9331));module.exports=s})();