(()=>{var e={};e.id=837,e.ids=[837],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4166:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(7474),r(3817),r(5866);var s=r(3191),a=r(8716),n=r(7922),i=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["journey-templates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7474)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\journey-templates\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3817)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\journey-templates\\page.tsx"],m="/journey-templates/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/journey-templates/page",pathname:"/journey-templates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8166:(e,t,r)=>{Promise.resolve().then(r.bind(r,4328))},8998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1540:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1137:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4328:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var s=r(326),a=r(7577),n=r(6608),i=r(8122),l=r(434),o=r(8082),d=r(2523),c=r(3855),m=r(8307),u=r(1137),p=r(6343),h=r(6557);let y=(0,h.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),x=(0,h.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var b=r(8998),j=r(2714),f=r(3);let g=(0,h.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var v=r(1540),w=r(8091);function N(){let{user:e}=(0,o.a)(),[t,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[h,N]=(0,a.useState)(null),[_,k]=(0,a.useState)(1),[$,S]=(0,a.useState)(0),[T,P]=(0,a.useState)(!1),[C,M]=(0,a.useState)(new Set),[E,J]=(0,a.useState)({limit:12,offset:0,sortBy:"createdAt",sortOrder:"desc",isPublic:void 0}),[q,Z]=(0,a.useState)(""),O=async()=>{try{i(!0),N(null);let e=await d.u.getJourneyTemplates({...E,offset:(_-1)*12});r(e.templates),S(e.total)}catch(e){N(e instanceof Error?e.message:"Failed to load journey templates")}finally{i(!1)}},F=(e,t)=>{J(r=>({...r,[e]:""===t?void 0:t})),k(1)},L=e=>{M(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},A=async e=>{try{let t=`${e.name} (Copy)`;await d.u.duplicateJourneyTemplate(e.id,t),O()}catch(e){N(e instanceof Error?e.message:"Failed to duplicate template")}},D=async e=>{if(confirm("Are you sure you want to delete this journey template? This action cannot be undone."))try{await d.u.deleteJourneyTemplate(e),O(),M(t=>{let r=new Set(t);return r.delete(e),r})}catch(e){N(e instanceof Error?e.message:"Failed to delete template")}},B=async(e,t="json")=>{try{let r=await d.u.exportJourneyTemplate(e,t),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`journey-template-${e}.${t}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(e){N(e instanceof Error?e.message:"Failed to export template")}},U=e=>({new_believer:"New Believer",baptism_preparation:"Baptism Prep",discipleship:"Discipleship",leadership_development:"Leadership",bible_study:"Bible Study",prayer_life:"Prayer Life",service_ministry:"Service & Ministry",evangelism:"Evangelism",spiritual_disciplines:"Spiritual Disciplines",life_skills:"Life Skills",marriage_family:"Marriage & Family",youth_development:"Youth",senior_ministry:"Seniors",healing_recovery:"Healing & Recovery",custom:"Custom"})[e]||e,G=e=>{switch(e){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-neutral-100 text-neutral-800"}},z=e?.role==="admin"||e?.role==="pastor",R=Math.ceil($/12);return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[h&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsx("div",{className:"text-sm text-red-700",children:h})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Journey Templates"}),s.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Manage spiritual growth pathways and development templates"})]}),z&&(0,s.jsxs)("div",{className:"flex space-x-3",children:[C.size>0&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("span",{className:"text-sm text-neutral-600",children:[C.size," selected"]}),s.jsx("button",{onClick:()=>M(new Set),className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear"})]}),(0,s.jsxs)(l.default,{href:"/journey-templates/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[s.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Create Template"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("form",{onSubmit:e=>{e.preventDefault(),k(1),O()},className:"flex-1 max-w-lg",children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search templates...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:q,onChange:e=>Z(e.target.value)})]})}),(0,s.jsxs)("button",{onClick:()=>P(!T),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 ml-3",children:[s.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),T&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-neutral-200",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:E.category||"",onChange:e=>F("category",e.target.value),children:[s.jsx("option",{value:"",children:"All Categories"}),s.jsx("option",{value:"new_believer",children:"New Believer"}),s.jsx("option",{value:"baptism_preparation",children:"Baptism Preparation"}),s.jsx("option",{value:"discipleship",children:"Discipleship"}),s.jsx("option",{value:"leadership_development",children:"Leadership Development"}),s.jsx("option",{value:"bible_study",children:"Bible Study"}),s.jsx("option",{value:"prayer_life",children:"Prayer Life"}),s.jsx("option",{value:"service_ministry",children:"Service & Ministry"}),s.jsx("option",{value:"evangelism",children:"Evangelism"}),s.jsx("option",{value:"spiritual_disciplines",children:"Spiritual Disciplines"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Difficulty"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:E.difficulty||"",onChange:e=>F("difficulty",e.target.value),children:[s.jsx("option",{value:"",children:"All Levels"}),s.jsx("option",{value:"beginner",children:"Beginner"}),s.jsx("option",{value:"intermediate",children:"Intermediate"}),s.jsx("option",{value:"advanced",children:"Advanced"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Visibility"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:void 0===E.isPublic?"":E.isPublic.toString(),onChange:e=>F("isPublic",""===e.target.value?void 0:"true"===e.target.value),children:[s.jsx("option",{value:"",children:"All Templates"}),s.jsx("option",{value:"true",children:"Public"}),s.jsx("option",{value:"false",children:"Private"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Sort By"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:`${E.sortBy}_${E.sortOrder}`,onChange:e=>{let[t,r]=e.target.value.split("_");F("sortBy",t),F("sortOrder",r)},children:[s.jsx("option",{value:"createdAt_desc",children:"Newest First"}),s.jsx("option",{value:"createdAt_asc",children:"Oldest First"}),s.jsx("option",{value:"name_asc",children:"Name A-Z"}),s.jsx("option",{value:"name_desc",children:"Name Z-A"}),s.jsx("option",{value:"difficulty_asc",children:"Easiest First"}),s.jsx("option",{value:"difficulty_desc",children:"Hardest First"})]})]}),s.jsx("div",{className:"md:col-span-4 flex justify-end",children:s.jsx("button",{onClick:()=>{O()},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Apply Filters"})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx(p.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No journey templates found"}),s.jsx("p",{className:"text-neutral-600 mb-4",children:"Create your first template to help members grow spiritually"}),z&&(0,s.jsxs)(l.default,{href:"/journey-templates/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[s.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Create First Template"]})]}):(0,s.jsxs)(s.Fragment,{children:[z&&s.jsx("div",{className:"p-4 border-b border-neutral-200",children:(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:C.size===t.length&&t.length>0,onChange:()=>{C.size===t.length?M(new Set):M(new Set(t.map(e=>e.id)))},className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"ml-2 text-sm text-neutral-700",children:"Select all templates"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:t.map(t=>s.jsx("div",{className:"bg-neutral-50 rounded-lg border border-neutral-200 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"p-6",children:[z&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("input",{type:"checkbox",checked:C.has(t.id),onChange:()=>L(t.id),className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500"}),s.jsx("div",{className:"relative",children:s.jsx("button",{className:"p-1 text-neutral-400 hover:text-neutral-600",children:s.jsx(y,{className:"w-4 h-4"})})})]}),(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-neutral-900 line-clamp-2",children:t.name}),t.isPublic&&s.jsx(x,{className:"w-5 h-5 text-yellow-500"})]}),s.jsx("p",{className:"text-sm text-neutral-600 mb-4 line-clamp-3",children:t.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${G(t.difficulty)}`,children:t.difficulty}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:U(t.category)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-neutral-500 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(p.Z,{className:"w-4 h-4 mr-1"}),t.milestones.length," milestones"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(b.Z,{className:"w-4 h-4 mr-1"}),Math.ceil(t.estimatedDuration/7)," weeks"]})]}),t.tags&&t.tags.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[t.tags.slice(0,3).map(e=>s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-neutral-200 text-neutral-700",children:e},e)),t.tags.length>3&&(0,s.jsxs)("span",{className:"text-xs text-neutral-500",children:["+",t.tags.length-3," more"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(l.default,{href:`/journey-templates/${t.id}`,className:"inline-flex items-center px-3 py-1 rounded text-sm font-medium text-primary-700 bg-primary-100 hover:bg-primary-200",children:[s.jsx(j.Z,{className:"w-4 h-4 mr-1"}),"View"]}),z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.default,{href:`/journey-templates/${t.id}/edit`,className:"inline-flex items-center px-3 py-1 rounded text-sm font-medium text-neutral-700 bg-neutral-200 hover:bg-neutral-300",children:[s.jsx(f.Z,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,s.jsxs)("button",{onClick:()=>A(t),className:"inline-flex items-center px-3 py-1 rounded text-sm font-medium text-neutral-700 bg-neutral-200 hover:bg-neutral-300",children:[s.jsx(g,{className:"w-4 h-4 mr-1"}),"Copy"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>B(t.id,"json"),className:"p-1 text-neutral-400 hover:text-neutral-600",title:"Export Template",children:s.jsx(v.Z,{className:"w-4 h-4"})}),z&&t.createdBy===e?.id&&s.jsx("button",{onClick:()=>D(t.id),className:"p-1 text-red-400 hover:text-red-600",title:"Delete Template",children:s.jsx(w.Z,{className:"w-4 h-4"})})]})]})]})},t.id))})]}),R>1&&(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-neutral-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-neutral-700",children:["Showing ",(_-1)*12+1," to ",Math.min(12*_,$)," of ",$," templates"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>k(e=>Math.max(e-1,1)),disabled:1===_,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Previous"}),s.jsx("button",{onClick:()=>k(e=>Math.min(e+1,R)),disabled:_===R,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Next"})]})]})]})]})}function _(){return s.jsx(n.Z,{requiredRole:"group_leader",children:s.jsx(i.Z,{children:s.jsx(N,{})})})}},2523:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});let s="https://faithlink360-api.onrender.com",a=new Map,n=new Map;class i{async request(e,t={},r,n=3e4){let i=`${s}${e}`,l=localStorage.getItem("auth_token"),o={"Content-Type":"application/json",...l&&{Authorization:`Bearer ${l}`}},d={...t,headers:{...o,...t.headers}};if(r&&"GET"===t.method){let e=a.get(r);if(e&&Date.now()-e.timestamp<e.ttl)return console.log(`Cache hit for ${r}`),e.data}let c=Error("Request failed");for(let e=1;e<=3;e++)try{let s=await fetch(i,d);if(!s.ok){if(429===s.status){await new Promise(t=>setTimeout(t,1e3*e));continue}throw Error(`HTTP ${s.status}: ${s.statusText}`)}let l=await s.json();return r&&"GET"===t.method&&a.set(r,{data:l,timestamp:Date.now(),ttl:n}),l}catch(t){if(c=t instanceof Error?t:Error("Unknown error"),3===e)break;await new Promise(t=>setTimeout(t,1e3*e))}throw c}async getJourneyTemplates(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&(Array.isArray(r)?r.forEach(r=>t.append(e,String(r))):t.append(e,String(r)))});let r=`journey_templates_${t.toString()}`;return this.request(`/api/journey-templates?${t.toString()}`,{method:"GET"},r)}async getJourneyTemplate(e){let t=`journey_template_${e}`;return this.request(`/api/journey-templates/${e}`,{method:"GET"},t)}async createJourneyTemplate(e){let t=await this.request("/api/journey-templates",{method:"POST",body:JSON.stringify(e)});return this.invalidateTemplateCache(),t}async updateJourneyTemplate(e){let t=await this.request(`/api/journey-templates/${e.id}`,{method:"PUT",body:JSON.stringify(e)});return a.delete(`journey_template_${e.id}`),this.invalidateTemplateCache(),t}async deleteJourneyTemplate(e){await this.request(`/api/journey-templates/${e}`,{method:"DELETE"}),a.delete(`journey_template_${e}`),this.invalidateTemplateCache()}async duplicateJourneyTemplate(e,t){let r=await this.request(`/api/journey-templates/${e}/duplicate`,{method:"POST",body:JSON.stringify({name:t})});return this.invalidateTemplateCache(),r}async getMemberJourneys(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&t.append(e,String(r))});let r=`member_journeys_${t.toString()}`;return this.request(`/journeys/member-journeys?${t.toString()}`,{method:"GET"},r)}async getMemberJourney(e){let t=`member_journey_${e}`;return this.request(`/journeys/member-journeys/${e}`,{method:"GET"},t)}async assignJourneyToMember(e){let t=await this.request("/journeys/member-journeys",{method:"POST",body:JSON.stringify(e)});return this.invalidateMemberJourneyCache(),t}async updateMemberJourney(e){let t=await this.request(`/journeys/member-journeys/${e.id}`,{method:"PUT",body:JSON.stringify(e)});return a.delete(`member_journey_${e.id}`),this.invalidateMemberJourneyCache(),t}async deleteMemberJourney(e){await this.request(`/journeys/member-journeys/${e}`,{method:"DELETE"}),a.delete(`member_journey_${e}`),this.invalidateMemberJourneyCache()}async getMilestoneProgress(e,t){let r=`milestone_progress_${e}_${t}`;return this.request(`/journeys/member-journeys/${e}/milestones/${t}/progress`,{method:"GET"},r)}async startMilestone(e,t){let r=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/start`,{method:"POST"});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),r}async completeMilestone(e,t,r){let s=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/complete`,{method:"POST",body:JSON.stringify({notes:r})});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),s}async submitMilestone(e){let t=new FormData;t.append("type",e.type),t.append("content",e.content),e.attachments&&e.attachments.forEach((e,r)=>{t.append(`attachment_${r}`,e)});let r=localStorage.getItem("auth_token"),a=await fetch(`${s}/api/journeys/milestone-progress/${e.milestoneProgressId}/submit`,{method:"POST",headers:{...r&&{Authorization:`Bearer ${r}`}},body:t});if(!a.ok)throw Error(`HTTP ${a.status}: ${a.statusText}`);let n=await a.json();return this.invalidateMemberJourneyCache(),n}async approveMilestone(e,t,r){let s=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/approve`,{method:"POST",body:JSON.stringify({feedback:r})});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),s}async requestMilestoneRevision(e,t,r){let s=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/request-revision`,{method:"POST",body:JSON.stringify({feedback:r})});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),s}async getJourneyStats(){return this.request("/journeys/stats",{method:"GET"},"journey_stats",6e4)}async getMemberJourneyStats(e){let t=`member_journey_stats_${e}`;return this.request(`/journeys/members/${e}/stats`,{method:"GET"},t,6e4)}async bulkAssignJourney(e,t,r){let s=await this.request("/journeys/bulk-assign",{method:"POST",body:JSON.stringify({memberIds:e,templateId:t,mentorId:r})});return this.invalidateMemberJourneyCache(),s}async bulkUpdateJourneyStatus(e,t){await this.request("/journeys/bulk-status",{method:"POST",body:JSON.stringify({journeyIds:e,status:t})}),this.invalidateMemberJourneyCache()}async exportJourneyTemplate(e,t="json"){let r=await fetch(`${s}/api/journey-templates/${e}/export?format=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}async exportMemberJourneyProgress(e,t="pdf"){let r=await fetch(`${s}/journeys/member-journeys/${e}/export?format=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}invalidateTemplateCache(){for(let[e]of a)e.includes("journey_template")&&a.delete(e)}invalidateMemberJourneyCache(){for(let[e]of a)(e.includes("member_journey")||e.includes("milestone_progress"))&&a.delete(e)}clearCache(){a.clear(),n.clear()}}let l=new i},7474:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\journey-templates\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[935,434,748],()=>r(4166));module.exports=s})();