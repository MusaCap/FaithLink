(()=>{var e={};e.id=953,e.ids=[953],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1787:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(694),s(8131),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["groups",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,694)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\groups\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8131)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\groups\\[id]\\page.tsx"],m="/groups/[id]/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/groups/[id]/page",pathname:"/groups/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9005:(e,t,s)=>{Promise.resolve().then(s.bind(s,2306))},7888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1540:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},7636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9730:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},3:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9436:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},165:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2306:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>W});var r=s(326),a=s(7577),i=s(5047),n=s(6608),l=s(8122),o=s(434),d=s(8082),c=s(4349),m=s(8440),u=s(4061),h=s(6557);let p=(0,h.Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var x=s(8998),g=s(7636),y=s(3),b=s(7358),f=s(617),j=s(6464),N=s(8378),v=s(6283),w=s(9730),S=s(4975),k=s(165);let T=(0,h.Z)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),$=(0,h.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),A=(0,h.Z)("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);var M=s(3855),C=s(7888),E=s(4019),Z=s(3685),P=s(1540),q=s(8091);function R({groupId:e}){let[t,s]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[x,g]=(0,a.useState)({fileName:"",fileSize:0,fileType:"",description:""}),y=async t=>{if(t.preventDefault(),!x.fileName.trim()){u("File name is required");return}o(!0),u(null);try{let t=await fetch(`http://localhost:8000/api/groups/${e}/files`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(x)});if(t.ok){let e=await t.json();s(t=>[e.file,...t]),p("File uploaded successfully!"),c(!1),g({fileName:"",fileSize:0,fileType:"",description:""}),setTimeout(()=>p(null),3e3)}else{let e=await t.json();u(e.error||"Failed to upload file")}}catch(e){u("Network error uploading file"),console.error("Error uploading file:",e)}finally{o(!1)}},b=async t=>{if(confirm("Are you sure you want to delete this file?"))try{(await fetch(`http://localhost:8000/api/groups/${e}/files/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).ok?(s(e=>e.filter(e=>e.id!==t)),p("File deleted successfully!"),setTimeout(()=>p(null),3e3)):u("Failed to delete file")}catch(e){u("Network error deleting file"),console.error("Error deleting file:",e)}},f=async e=>{try{window.open(`http://localhost:8000${e.url}`,"_blank")}catch(e){u("Failed to download file"),console.error("Error downloading file:",e)}},j=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},N=e=>e.startsWith("image/")?r.jsx($,{className:"w-5 h-5 text-blue-500"}):e.includes("pdf")?r.jsx(v.Z,{className:"w-5 h-5 text-red-500"}):r.jsx(A,{className:"w-5 h-5 text-gray-500"});return i?(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"text-center text-gray-500 mt-2",children:"Loading files..."})]}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Group Files"}),(0,r.jsxs)("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[r.jsx(M.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Upload File"})]})]}),h&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:r.jsx("p",{className:"text-green-800 text-sm",children:h})}),m&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[r.jsx(C.Z,{className:"w-5 h-5 text-red-600 mr-2 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-red-800 text-sm",children:m})}),r.jsx("button",{onClick:()=>u(null),className:"text-red-400 hover:text-red-600",children:r.jsx(E.Z,{className:"w-4 h-4"})})]}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold",children:"Upload File"}),r.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(E.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Name *"}),r.jsx("input",{type:"text",value:x.fileName,onChange:e=>g(t=>({...t,fileName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Meeting Notes.pdf",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Size (bytes)"}),r.jsx("input",{type:"number",value:x.fileSize,onChange:e=>g(t=>({...t,fileSize:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Type"}),(0,r.jsxs)("select",{value:x.fileType,onChange:e=>g(t=>({...t,fileType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select type"}),r.jsx("option",{value:"application/pdf",children:"PDF"}),r.jsx("option",{value:"image/jpeg",children:"JPEG Image"}),r.jsx("option",{value:"image/png",children:"PNG Image"}),r.jsx("option",{value:"application/msword",children:"Word Document"}),r.jsx("option",{value:"text/plain",children:"Text File"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:x.description,onChange:e=>g(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Optional description..."})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:l?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(Z.Z,{className:"w-4 h-4 mr-2"}),"Upload"]})}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]})]})}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"No files uploaded yet"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Upload files to share with your group members"})]}):r.jsx("div",{className:"space-y-3",children:t.map(e=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[N(e.type),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:j(e.size)}),(0,r.jsxs)("span",{children:["Uploaded by ",e.uploadedByName]}),r.jsx("span",{children:new Date(e.uploadDate).toLocaleDateString()})]}),e.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>f(e),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Download file",children:r.jsx(P.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>b(e.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Delete file",children:r.jsx(q.Z,{className:"w-4 h-4"})})]})]})},e.id))})]})}var D=s(9436);let O=(0,h.Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);var _=s(7427);let I=(0,h.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);function G({groupId:e}){let[t,s]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(null),[x,g]=(0,a.useState)(""),y=(0,a.useRef)(null),b=async t=>{if(t.preventDefault(),m.trim()){o(!0),c(null);try{let t=await fetch(`http://localhost:8000/api/groups/${e}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({content:m.trim(),mentions:[],attachments:[]})});if(t.ok){let e=await t.json();s(t=>[...t,e.data]),u("")}else{let e=await t.json();c(e.error||"Failed to send message")}}catch(e){c("Network error sending message"),console.error("Error sending message:",e)}finally{o(!1)}}},f=async t=>{if(x.trim())try{let r=await fetch(`http://localhost:8000/api/groups/${e}/messages/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({content:x.trim()})});if(r.ok){let e=await r.json();s(s=>s.map(s=>s.id===t?{...s,content:e.content,edited:!0,editedAt:e.editedAt}:s)),p(null),g("")}else c("Failed to edit message")}catch(e){c("Network error editing message"),console.error("Error editing message:",e)}},j=async t=>{if(confirm("Are you sure you want to delete this message?"))try{(await fetch(`http://localhost:8000/api/groups/${e}/messages/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).ok?s(e=>e.filter(e=>e.id!==t)):c("Failed to delete message")}catch(e){c("Network error deleting message"),console.error("Error deleting message:",e)}},N=async(t,s)=>{try{(await fetch(`http://localhost:8000/api/groups/${e}/messages/${t}/reactions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({type:s})})).ok?console.log("Reaction added successfully"):c("Failed to add reaction")}catch(e){c("Network error adding reaction"),console.error("Error adding reaction:",e)}},v=e=>{let t=new Date(e),s=(new Date().getTime()-t.getTime())/36e5;return s<1?`${Math.floor(60*s)}m ago`:s<24?`${Math.floor(s)}h ago`:t.toLocaleDateString()};return i?(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"text-center text-gray-500 mt-2",children:"Loading messages..."})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-white",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Group Messages"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Share updates and stay connected with your group"})]}),d&&(0,r.jsxs)("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[r.jsx(C.Z,{className:"w-5 h-5 text-red-600 mr-2 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-red-800 text-sm",children:d})}),r.jsx("button",{onClick:()=>c(null),className:"text-red-400 hover:text-red-600",children:r.jsx(E.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(D.Z,{className:"w-6 h-6 text-gray-400"})}),r.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"No messages yet"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Start a conversation with your group!"})]}):t.map(e=>r.jsx("div",{className:"group",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:e.authorName.charAt(0)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.authorName}),r.jsx("span",{className:"text-xs text-gray-500 capitalize",children:e.authorRole}),r.jsx("span",{className:"text-xs text-gray-400",children:v(e.timestamp)}),e.edited&&r.jsx("span",{className:"text-xs text-gray-400",children:"(edited)"})]}),h===e.id?(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("textarea",{value:x,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>f(e.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Save"}),r.jsx("button",{onClick:()=>{p(null),g("")},className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-gray-800 text-sm",children:e.content}),e.reactions.length>0&&r.jsx("div",{className:"flex items-center space-x-2 mt-2",children:e.reactions.map((t,s)=>(0,r.jsxs)("button",{onClick:()=>N(e.id,t.type),className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-xs",children:["like"===t.type?r.jsx(O,{className:"w-3 h-3"}):r.jsx(_.Z,{className:"w-3 h-3"}),r.jsx("span",{children:t.count})]},s))})]})]}),r.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("button",{onClick:()=>N(e.id,"like"),className:"p-1 text-gray-400 hover:text-blue-500 rounded",title:"Like",children:r.jsx(O,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>N(e.id,"heart"),className:"p-1 text-gray-400 hover:text-red-500 rounded",title:"Heart",children:r.jsx(_.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{p(e.id),g(e.content)},className:"p-1 text-gray-400 hover:text-yellow-500 rounded",title:"Edit",children:r.jsx(I,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>j(e.id),className:"p-1 text-gray-400 hover:text-red-500 rounded",title:"Delete",children:r.jsx(q.Z,{className:"w-4 h-4"})})]})})]})},e.id)),r.jsx("div",{ref:y})]}),r.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:(0,r.jsxs)("form",{onSubmit:b,className:"flex space-x-3",children:[r.jsx("div",{className:"flex-1",children:r.jsx("textarea",{value:m,onChange:e=>u(e.target.value),placeholder:"Type your message...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:2,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(e))}})}),r.jsx("button",{type:"submit",disabled:l||!m.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:l?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):r.jsx(D.Z,{className:"w-4 h-4"})})]})})]})}function F({groupId:e}){var t;let{user:s}=(0,d.a)();(0,i.useRouter)();let[n,l]=(0,a.useState)(null),[h,$]=(0,a.useState)([]),[A,M]=(0,a.useState)([]),[C,E]=(0,a.useState)(!0),[Z,P]=(0,a.useState)(null),[q,D]=(0,a.useState)(!1),[O,_]=(0,a.useState)(""),[I,F]=(0,a.useState)("members"),W=async()=>{try{E(!0),P(null);let[t,s]=await Promise.all([c.P.getGroup(e),c.P.getGroupMembers(e)]);l(t),$(s);let r=await m.H.getMembers({limit:1e3}),a=s.map(e=>e.memberId),i=r.members.filter(e=>!a.includes(e.id));M(i)}catch(e){P(e instanceof Error?e.message:"Failed to load group")}finally{E(!1)}},L=async()=>{if(O)try{await c.P.addGroupMember(e,O),_(""),D(!1),await W()}catch(e){P(e instanceof Error?e.message:"Failed to add member")}},U=async t=>{if(confirm("Are you sure you want to remove this member from the group?"))try{await c.P.removeGroupMember(e,t),await W()}catch(e){P(e instanceof Error?e.message:"Failed to remove member")}},z=async(t,s)=>{try{await c.P.updateGroupMember(e,t,{role:s}),await W()}catch(e){P(e instanceof Error?e.message:"Failed to update member role")}},B=s?.role==="admin"||s?.role==="pastor"||n&&(n.leaderId===s?.id||n.coLeaderIds?.includes(s?.id||""));return C?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):Z||!n?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("div",{className:"text-sm text-red-700",children:Z||"Group not found"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:n.name}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"small_group"===n.type?"bg-blue-100 text-blue-800":"ministry"===n.type?"bg-green-100 text-green-800":"youth"===n.type?"bg-purple-100 text-purple-800":"bg-neutral-100 text-neutral-800"}`,children:{small_group:"Small Group",ministry:"Ministry",youth:"Youth",seniors:"Seniors",womens:"Women's",mens:"Men's",children:"Children's",worship:"Worship",service:"Service",bible_study:"Bible Study",prayer:"Prayer",outreach:"Outreach",other:"Other"}[t=n.type]||t}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"active"===n.status?"bg-green-100 text-green-800":"inactive"===n.status?"bg-yellow-100 text-yellow-800":"bg-neutral-100 text-neutral-800"}`,children:n.status})]}),n.description&&r.jsx("p",{className:"text-neutral-600 mb-4",children:n.description}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center text-neutral-600",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2"}),n.memberIds?.length||n.currentMembers||0," members",n.maxMembers&&` / ${n.maxMembers} max`]}),(0,r.jsxs)("div",{className:"flex items-center text-neutral-600",children:[r.jsx(p,{className:"w-4 h-4 mr-2"}),"Leader: ",n.leaderName]}),n.meetingSchedule&&(0,r.jsxs)("div",{className:"flex items-center text-neutral-600",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),(e=>{if(!e||!e.frequency)return"No schedule set";let t=void 0!==e.dayOfWeek?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.dayOfWeek]:"",s=e.time||"",r=e.duration?`(${e.duration} min)`:"";return`${e.frequency} on ${t} at ${s} ${r}`.trim()})(n.meetingSchedule)]}),n.location&&(0,r.jsxs)("div",{className:"flex items-center text-neutral-600",children:[r.jsx(g.Z,{className:"w-4 h-4 mr-2"}),n.location]})]})]}),B&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(o.default,{href:`/groups/${n.id}/edit`,className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[r.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,r.jsxs)(o.default,{href:`/groups/${n.id}/attendance`,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[r.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Attendance"]})]})]})}),n.tags&&n.tags.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-3",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(e=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:e},e))})]}),B&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(o.default,{href:`/groups/${n.id}/attendance/new`,className:"flex flex-col items-center p-4 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-300 hover:bg-primary-50 transition-colors",children:[r.jsx(b.Z,{className:"w-8 h-8 text-primary-600 mb-2"}),r.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"Record Attendance"})]}),(0,r.jsxs)(o.default,{href:`/communications/group/${n.id}`,className:"flex flex-col items-center p-4 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-300 hover:bg-primary-50 transition-colors",children:[r.jsx(f.Z,{className:"w-8 h-8 text-primary-600 mb-2"}),r.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"Message Group"})]}),(0,r.jsxs)(o.default,{href:`/groups/${n.id}/reports`,className:"flex flex-col items-center p-4 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-300 hover:bg-primary-50 transition-colors",children:[r.jsx(j.Z,{className:"w-8 h-8 text-primary-600 mb-2"}),r.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"View Reports"})]}),(0,r.jsxs)(o.default,{href:`/groups/${n.id}/settings`,className:"flex flex-col items-center p-4 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-300 hover:bg-primary-50 transition-colors",children:[r.jsx(N.Z,{className:"w-8 h-8 text-primary-600 mb-2"}),r.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"Group Settings"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[r.jsx("div",{className:"border-b border-neutral-200",children:(0,r.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[(0,r.jsxs)("button",{onClick:()=>F("members"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"members"===I?"border-primary-500 text-primary-600":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"}`,children:[r.jsx(u.Z,{className:"w-4 h-4 inline mr-2"}),"Members (",h.length,")"]}),(0,r.jsxs)("button",{onClick:()=>F("files"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"files"===I?"border-primary-500 text-primary-600":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"}`,children:[r.jsx(v.Z,{className:"w-4 h-4 inline mr-2"}),"Files"]}),(0,r.jsxs)("button",{onClick:()=>F("messages"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"messages"===I?"border-primary-500 text-primary-600":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"}`,children:[r.jsx(w.Z,{className:"w-4 h-4 inline mr-2"}),"Messages"]})]})}),"members"===I&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"p-6 border-b border-neutral-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900",children:["Members (",h.length,")"]}),B&&(0,r.jsxs)("button",{onClick:()=>D(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:[r.jsx(S.Z,{className:"w-4 h-4 mr-2"}),"Add Member"]})]})}),q&&r.jsx("div",{className:"p-6 border-b border-neutral-200 bg-neutral-50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("select",{className:"flex-1 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:O,onChange:e=>_(e.target.value),children:[r.jsx("option",{value:"",children:"Select a member to add"}),A.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]}),r.jsx("button",{onClick:L,disabled:!O,className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:"Add"}),r.jsx("button",{onClick:()=>{D(!1),_("")},className:"px-4 py-2 border border-neutral-300 text-sm font-medium rounded-md text-neutral-700 bg-white hover:bg-neutral-50",children:"Cancel"})]})}),r.jsx("div",{className:"p-6",children:0===h.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(u.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No members yet"}),r.jsx("p",{className:"text-neutral-600 mb-4",children:"Add members to get started with your group"}),B&&(0,r.jsxs)("button",{onClick:()=>D(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:[r.jsx(S.Z,{className:"w-4 h-4 mr-2"}),"Add First Member"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-neutral-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(u.Z,{className:"w-5 h-5 text-primary-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("p",{className:"text-sm font-medium text-neutral-900",children:e.memberName}),"leader"===e.role&&r.jsx(p,{className:"w-4 h-4 text-yellow-500"}),"co_leader"===e.role&&r.jsx(k.Z,{className:"w-4 h-4 text-blue-500"})]}),r.jsx("p",{className:"text-xs text-neutral-500 capitalize",children:e.role.replace("_"," ")})]})]}),B&&"leader"!==e.role&&(0,r.jsxs)("div",{className:"flex space-x-1",children:["member"===e.role&&r.jsx("button",{onClick:()=>z(e.memberId,"co_leader"),className:"text-xs px-2 py-1 text-blue-600 hover:bg-blue-50 rounded",title:"Promote to Co-Leader",children:r.jsx(k.Z,{className:"w-3 h-3"})}),"co_leader"===e.role&&r.jsx("button",{onClick:()=>z(e.memberId,"member"),className:"text-xs px-2 py-1 text-neutral-600 hover:bg-neutral-50 rounded",title:"Demote to Member",children:r.jsx(u.Z,{className:"w-3 h-3"})}),r.jsx("button",{onClick:()=>U(e.memberId),className:"text-xs px-2 py-1 text-red-600 hover:bg-red-50 rounded",title:"Remove from Group",children:r.jsx(T,{className:"w-3 h-3"})})]})]},e.id))})})]}),"files"===I&&r.jsx(R,{groupId:e}),"messages"===I&&r.jsx("div",{className:"h-96",children:r.jsx(G,{groupId:e})})]})]})}function W(){let e=(0,i.useParams)().id;return r.jsx(n.Z,{children:r.jsx(l.Z,{children:r.jsx(F,{groupId:e})})})}},4349:(e,t,s)=>{"use strict";s.d(t,{P:()=>a});class r{async fetchWithAuth(e,t={}){let s=localStorage.getItem("auth_token"),r={"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...t.headers},a=0;for(;a<=this.MAX_RETRIES;)try{let s=await fetch(`${e}`,{...t,headers:r});if(!s.ok){if(429===s.status&&a<this.MAX_RETRIES){await new Promise(e=>setTimeout(e,1e3*(a+1))),a++;continue}let e=await s.json().catch(()=>({message:s.statusText}));throw Error(e.message||`HTTP ${s.status}: ${s.statusText}`)}return s.json()}catch(e){if(a<this.MAX_RETRIES&&e.message.includes("fetch")){a++,await new Promise(e=>setTimeout(e,1e3*a));continue}throw e}}getCacheKey(e,t={}){return`${e}-${JSON.stringify(t.body||{})}`}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getGroups(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.type?.length&&t.append("type",e.type.join(",")),e.status?.length&&t.append("status",e.status.join(",")),e.leaderId&&t.append("leaderId",e.leaderId),e.tags?.length&&t.append("tags",e.tags.join(",")),void 0!==e.hasAvailableSpace&&t.append("hasAvailableSpace",e.hasAvailableSpace.toString()),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()));let s=`/api/groups${t.toString()?`?${t.toString()}`:""}`,r=this.getCacheKey(s);if(this.isValidCache(r))return this.requestCache.get(r).data;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);let a=this.fetchWithAuth(s).then(e=>(this.requestCache.set(r,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(r),e)).catch(e=>{throw this.pendingRequests.delete(r),e});return this.pendingRequests.set(r,a),a}async getGroup(e){return this.fetchWithAuth(`/api/groups/${e}`)}async createGroup(e){return this.fetchWithAuth("/api/groups",{method:"POST",body:JSON.stringify(e)})}async updateGroup(e){return this.fetchWithAuth(`/api/groups/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}async deleteGroup(e){await this.fetchWithAuth(`/api/groups/${e}`,{method:"DELETE"})}async getGroupMembers(e){return(await this.fetchWithAuth(`/api/groups/${e}/members`)).members||[]}async addGroupMember(e,t,s="member"){return this.fetchWithAuth(`/api/groups/${e}/members`,{method:"POST",body:JSON.stringify({memberId:t,role:s})})}async updateGroupMember(e,t,s){return this.fetchWithAuth(`/api/groups/${e}/members/${t}`,{method:"PUT",body:JSON.stringify(s)})}async removeGroupMember(e,t){await this.fetchWithAuth(`/api/groups/${e}/members/${t}`,{method:"DELETE"})}async getGroupAttendance(e,t,s){let r=new URLSearchParams;t&&r.append("startDate",t),s&&r.append("endDate",s);let a=`/api/groups/${e}/attendance${r.toString()?`?${r.toString()}`:""}`;return this.fetchWithAuth(a)}async recordAttendance(e){return this.fetchWithAuth(`/api/groups/${e.groupId}/attendance`,{method:"POST",body:JSON.stringify(e)})}async updateAttendance(e,t,s){return this.fetchWithAuth(`/api/groups/${e}/attendance/${t}`,{method:"PUT",body:JSON.stringify(s)})}async deleteAttendance(e,t){await this.fetchWithAuth(`/api/groups/${e}/attendance/${t}`,{method:"DELETE"})}async getGroupStats(){return this.fetchWithAuth("/api/groups/stats")}async getGroupAttendanceStats(e,t="month"){return this.fetchWithAuth(`/api/groups/${e}/stats/attendance?period=${t}`)}async exportGroups(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.type?.length&&t.append("type",e.type.join(",")),e.status?.length&&t.append("status",e.status.join(",")));let s=localStorage.getItem("auth_token"),r=await fetch(`/api/groups/export${t.toString()?`?${t.toString()}`:""}`,{headers:{...s&&{Authorization:`Bearer ${s}`}}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}async bulkUpdateGroups(e,t){return this.fetchWithAuth("/api/groups/bulk",{method:"PUT",body:JSON.stringify({groupIds:e,updates:t})})}async bulkDeleteGroups(e){return this.fetchWithAuth("/api/groups/bulk",{method:"DELETE",body:JSON.stringify({groupIds:e})})}async getGroupTypes(){return[{value:"small_group",label:"Small Group",description:"Intimate fellowship and Bible study groups"},{value:"ministry",label:"Ministry Team",description:"Service-focused ministry groups"},{value:"youth",label:"Youth Group",description:"Teen and young adult groups"},{value:"seniors",label:"Seniors Group",description:"Groups for older adults"},{value:"womens",label:"Women's Group",description:"Women's fellowship and study groups"},{value:"mens",label:"Men's Group",description:"Men's fellowship and study groups"},{value:"children",label:"Children's Group",description:"Groups for children and families"},{value:"worship",label:"Worship Team",description:"Music and worship ministry teams"},{value:"service",label:"Service Team",description:"Community service and outreach teams"},{value:"bible_study",label:"Bible Study",description:"Scripture study and discussion groups"},{value:"prayer",label:"Prayer Group",description:"Prayer and intercession groups"},{value:"outreach",label:"Outreach Team",description:"Evangelism and community outreach"},{value:"other",label:"Other",description:"Custom group types"}]}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let a=new r},8440:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});class r{async fetchWithAuth(e,t={}){let s=localStorage.getItem("auth_token"),r=e.startsWith("http")?e:`${e}`,a=0;for(;a<=this.MAX_RETRIES;)try{let e=await fetch(r,{...t,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...t.headers}});if(!e.ok){if(401===e.status){localStorage.removeItem("auth_token"),window.location.href="/login";return}let t=await e.json().catch(()=>({message:e.statusText}));throw Error(t.message||`HTTP ${e.status}: ${e.statusText}`)}return e.json()}catch(e){if(a<this.MAX_RETRIES&&e.message.includes("fetch")){a++,await new Promise(e=>setTimeout(e,1e3*a));continue}throw e}}getCacheKey(e,t={}){return`${e}-${JSON.stringify(t.body||{})}`}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getMembers(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.tags?.length&&t.append("tags",e.tags.join(",")),e.membershipStatus?.length&&t.append("status",e.membershipStatus.join(",")),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.ageRange&&(e.ageRange.min&&t.append("ageMin",e.ageRange.min.toString()),e.ageRange.max&&t.append("ageMax",e.ageRange.max.toString())),e.joinDateRange&&(e.joinDateRange.start&&t.append("joinStart",e.joinDateRange.start.toISOString()),e.joinDateRange.end&&t.append("joinEnd",e.joinDateRange.end.toISOString())),e.groups?.length&&t.append("groups",e.groups.join(",")));let s=`/api/members${t.toString()?`?${t.toString()}`:""}`,r=this.getCacheKey(s);if(this.isValidCache(r))return this.requestCache.get(r).data;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);let a=this.fetchWithAuth(s).then(e=>(this.requestCache.set(r,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(r),e)).catch(e=>{throw this.pendingRequests.delete(r),e});return this.pendingRequests.set(r,a),a}async getMember(e){return this.fetchWithAuth(`/api/members/${e}`)}async createMember(e){return this.fetchWithAuth("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e){return this.fetchWithAuth(`/api/members/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}async deleteMember(e){await this.fetchWithAuth(`/api/members/${e}`,{method:"DELETE"})}async getMemberStats(){return this.fetchWithAuth("/api/members/stats")}async getTags(){return this.fetchWithAuth("/api/members/tags")}async createTag(e){return this.fetchWithAuth("/api/members/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.fetchWithAuth(`/api/members/tags/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){await this.fetchWithAuth(`/api/members/tags/${e}`,{method:"DELETE"})}async uploadProfilePhoto(e,t){let s=localStorage.getItem("auth_token"),r=new FormData;r.append("photo",t);let a=await fetch(`/api/members/${e}/photo`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:r});if(!a.ok)throw Error((await a.json().catch(()=>({message:a.statusText}))).message||`HTTP ${a.status}: ${a.statusText}`);return a.json()}async getSearchSuggestions(e){return this.fetchWithAuth(`/api/members/search/suggestions?q=${encodeURIComponent(e)}`)}async exportMembers(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.tags?.length&&t.append("tags",e.tags.join(",")),e.membershipStatus?.length&&t.append("status",e.membershipStatus.join(",")));let s=localStorage.getItem("auth_token"),r=await fetch(`/api/members/export${t.toString()?`?${t.toString()}`:""}`,{headers:{...s&&{Authorization:`Bearer ${s}`}}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}async bulkUpdateMembers(e,t){return this.fetchWithAuth("/api/members/bulk",{method:"PUT",body:JSON.stringify({memberIds:e,updates:t})})}async bulkDeleteMembers(e){return this.fetchWithAuth("/api/members/bulk",{method:"DELETE",body:JSON.stringify({memberIds:e})})}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let a=new r},694:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\groups\[id]\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935,434,772,62],()=>s(1787));module.exports=r})();