(()=>{var e={};e.id=266,e.ids=[266],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(6384),s(3817),s(5866);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),d=s(5231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);s.d(t,i);let o=["",{children:["groups",{children:["[id]",{children:["attendance",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6384)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\groups\\[id]\\attendance\\new\\page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\groups\\[id]\\attendance\\new\\page.tsx"],u="/groups/[id]/attendance/new/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/groups/[id]/attendance/new/page",pathname:"/groups/[id]/attendance/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5034:(e,t,s)=>{Promise.resolve().then(s.bind(s,3762))},1215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},3762:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(326),a=s(7577),n=s(5047),l=s(6608),d=s(8122),i=s(8082),o=s(840);s(4349);var c=s(4659),u=s(1470),m=s(4471),x=s(9819),p=s(4061),b=s(7358),h=s(1215);function g({groupId:e}){let{user:t}=(0,i.a)(),s=(0,n.useRouter)(),[l,d]=(0,a.useState)(!0),[g,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[N,y]=(0,a.useState)([]),[w,k]=(0,a.useState)(""),[P,C]=(0,a.useState)({date:new Date().toISOString().split("T")[0],startTime:"",endTime:"",topic:"",notes:""}),[S,_]=(0,a.useState)({}),T=(e,t)=>{C(s=>({...s,[e]:t}))},A=(e,t,s)=>{_(r=>({...r,[e]:{...r[e],[t]:s}}))},Z=e=>{let t={...S};Object.keys(t).forEach(s=>{t[s].status=e}),_(t)},q=async t=>{if(t.preventDefault(),!P.date){v("Date is required");return}f(!0),v(null);try{let t={groupId:e,date:P.date,startTime:P.startTime||void 0,endTime:P.endTime||void 0,topic:P.topic||void 0,notes:P.notes||void 0,records:Object.entries(S).map(([e,t])=>({memberId:e,status:t.status,notes:t.notes||void 0}))};await o.n.createAttendanceSession(t),s.push(`/groups/${e}/attendance`)}catch(e){v(e instanceof Error?e.message:"Failed to record attendance")}finally{f(!1)}},L=e=>{switch(e){case"present":return"bg-green-100 text-green-800 border-green-200";case"absent":return"bg-red-100 text-red-800 border-red-200";case"late":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"excused":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-neutral-100 text-neutral-800 border-neutral-200"}},D=e=>{switch(e){case"present":return r.jsx(c.Z,{className:"w-4 h-4"});case"absent":return r.jsx(u.Z,{className:"w-4 h-4"});case"late":return r.jsx(m.Z,{className:"w-4 h-4"});case"excused":return r.jsx(x.Z,{className:"w-4 h-4"});default:return r.jsx(p.Z,{className:"w-4 h-4"})}},F={present:Object.values(S).filter(e=>"present"===e.status).length,absent:Object.values(S).filter(e=>"absent"===e.status).length,late:Object.values(S).filter(e=>"late"===e.status).length,excused:Object.values(S).filter(e=>"excused"===e.status).length,total:N.length};return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,r.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[j&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("div",{className:"text-sm text-red-700",children:j})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 mb-4 flex items-center",children:[r.jsx(b.Z,{className:"w-5 h-5 mr-2"}),"Session Details - ",w]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Date *"}),r.jsx("input",{type:"date",required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:P.date,onChange:e=>T("date",e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Time"}),r.jsx("input",{type:"time",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:P.startTime,onChange:e=>T("startTime",e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"End Time"}),r.jsx("input",{type:"time",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:P.endTime,onChange:e=>T("endTime",e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Topic"}),r.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:P.topic,onChange:e=>T("topic",e.target.value),placeholder:"Session topic"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Notes"}),r.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:P.notes,onChange:e=>T("notes",e.target.value),placeholder:"Session notes or announcements"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[r.jsx(p.Z,{className:"w-5 h-5 mr-2"}),"Attendance Summary"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>Z("present"),className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-md hover:bg-green-200",children:"Mark All Present"}),r.jsx("button",{type:"button",onClick:()=>Z("absent"),className:"px-3 py-1 text-xs bg-red-100 text-red-800 rounded-md hover:bg-red-200",children:"Mark All Absent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:F.present}),r.jsx("div",{className:"text-sm text-green-700",children:"Present"})]}),(0,r.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:F.absent}),r.jsx("div",{className:"text-sm text-red-700",children:"Absent"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:F.late}),r.jsx("div",{className:"text-sm text-yellow-700",children:"Late"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:F.excused}),r.jsx("div",{className:"text-sm text-blue-700",children:"Excused"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:["Member Attendance (",N.length," members)"]}),r.jsx("div",{className:"space-y-4",children:N.map(e=>{let t=S[e.memberId]||{status:"present",notes:""};return(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 border border-neutral-200 rounded-lg",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-neutral-900",children:e.memberName}),"leader"===e.role&&r.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Leader"}),"co_leader"===e.role&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:"Co-Leader"})]})}),r.jsx("div",{className:"flex items-center space-x-2",children:["present","absent","late","excused"].map(s=>(0,r.jsxs)("button",{type:"button",onClick:()=>A(e.memberId,"status",s),className:`flex items-center space-x-1 px-3 py-1 rounded-md text-xs font-medium border ${t.status===s?L(s):"bg-white text-neutral-600 border-neutral-300 hover:bg-neutral-50"}`,children:[D(s),r.jsx("span",{className:"capitalize",children:s})]},s))}),r.jsx("div",{className:"w-48",children:r.jsx("input",{type:"text",className:"w-full px-2 py-1 text-xs border border-neutral-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"Notes (optional)",value:t.notes,onChange:t=>A(e.memberId,"notes",t.target.value)})})]},e.id)})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>s.back(),className:"px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[g?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Record Attendance"]})]})]})}function f(){let e=(0,n.useParams)().id;return e&&"undefined"!==e?r.jsx(l.Z,{requiredRole:"group_leader",children:r.jsx(d.Z,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Record Attendance"}),r.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Mark attendance for group members and track participation"})]}),r.jsx(g,{groupId:e})]})})}):r.jsx(l.Z,{requiredRole:"group_leader",children:r.jsx(d.Z,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Record Attendance"}),r.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Mark attendance for group members and track participation"})]}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Invalid Group"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:r.jsx("p",{children:"No valid group ID was provided. Please navigate to a group first."})})]})})})]})})})}},6384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\groups\[id]\attendance\new\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935,434,748,850],()=>s(6229));module.exports=r})();