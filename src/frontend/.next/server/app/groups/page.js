(()=>{var e={};e.id=586,e.ids=[586],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8898:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(5958),s(8131),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["groups",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5958)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\groups\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8131)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\groups\\page.tsx"],u="/groups/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/groups/page",pathname:"/groups",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5754:(e,t,s)=>{Promise.resolve().then(s.bind(s,3195))},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},7636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9819:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},3195:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(326),a=s(7577),i=s(6608),n=s(8122),l=s(434),o=s(3855),d=s(8307),c=s(1137);let u=(0,s(6557).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var h=s(4061),p=s(9819),m=s(8998),x=s(7636),g=s(7358),y=s(617),f=s(8082),b=s(4349);function v(){let{user:e}=(0,f.a)(),[t,s]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[v,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),[S,k]=(0,a.useState)([]),[A,P]=(0,a.useState)(!1),[$,C]=(0,a.useState)("name"),[G,T]=(0,a.useState)("asc"),[M,E]=(0,a.useState)(1),[_,q]=(0,a.useState)(0),[O,W]=(0,a.useState)({type:[],status:["active"],hasAvailableSpace:!1});(0,a.useCallback)(async()=>{try{n(!0),j(null);let e={query:N,type:O.type.length>0?O.type:void 0,status:O.status.length>0?O.status:void 0,hasAvailableSpace:O.hasAvailableSpace||void 0,sortBy:$,sortOrder:G,limit:20,offset:(M-1)*20},t=await b.P.getGroups(e);s(t.groups),q(t.total)}catch(e){j(e instanceof Error?e.message:"Failed to load groups")}finally{n(!1)}},[N,O,$,G,M]);let Z=e=>{w(e),E(1)},R=(e,t)=>{W(s=>({...s,[e]:t})),E(1)},D=e?.role==="admin"||e?.role==="pastor",L=D||e?.role==="group_leader",I=e=>({small_group:"Small Group",ministry:"Ministry",youth:"Youth",seniors:"Seniors",womens:"Women's",mens:"Men's",children:"Children's",worship:"Worship",service:"Service",bible_study:"Bible Study",prayer:"Prayer",outreach:"Outreach",other:"Other"})[e],U=e=>{if(!e||!e.frequency)return"No schedule set";let t=void 0!==e.dayOfWeek?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.dayOfWeek]:"",s=e.time||"";return`${e.frequency} ${t} ${s}`.trim()};return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Groups"}),r.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Manage church groups, track attendance, and coordinate activities"})]}),D&&r.jsx("div",{className:"mt-4 sm:mt-0",children:(0,r.jsxs)(l.default,{href:"/groups/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[r.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"New Group"]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search groups...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N,onChange:e=>Z(e.target.value)})]})}),(0,r.jsxs)("button",{onClick:()=>P(!A),className:"inline-flex items-center px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),A&&r.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Group Type"}),(0,r.jsxs)("select",{multiple:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:O.type,onChange:e=>R("type",Array.from(e.target.selectedOptions,e=>e.value)),children:[r.jsx("option",{value:"small_group",children:"Small Group"}),r.jsx("option",{value:"ministry",children:"Ministry"}),r.jsx("option",{value:"youth",children:"Youth"}),r.jsx("option",{value:"seniors",children:"Seniors"}),r.jsx("option",{value:"womens",children:"Women's"}),r.jsx("option",{value:"mens",children:"Men's"}),r.jsx("option",{value:"children",children:"Children's"}),r.jsx("option",{value:"worship",children:"Worship"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"bible_study",children:"Bible Study"}),r.jsx("option",{value:"prayer",children:"Prayer"}),r.jsx("option",{value:"outreach",children:"Outreach"}),r.jsx("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{multiple:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:O.status,onChange:e=>R("status",Array.from(e.target.selectedOptions,e=>e.value)),children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]}),r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500",checked:O.hasAvailableSpace,onChange:e=>R("hasAvailableSpace",e.target.checked)}),r.jsx("span",{className:"ml-2 text-sm text-neutral-700",children:"Has available space"})]})})]})})]}),v&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("div",{className:"text-sm text-red-700",children:v})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-1",children:r.jsx(l.default,{href:`/groups/${e.id}`,className:"hover:text-primary-600",children:e.name})}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"small_group"===e.type?"bg-blue-100 text-blue-800":"ministry"===e.type?"bg-green-100 text-green-800":"youth"===e.type?"bg-purple-100 text-purple-800":"bg-neutral-100 text-neutral-800"}`,children:I(e.type)})]}),r.jsx("div",{className:"relative",children:r.jsx("button",{className:"text-neutral-400 hover:text-neutral-600",children:r.jsx(u,{className:"w-4 h-4"})})})]}),e.description&&r.jsx("p",{className:"text-sm text-neutral-600 mb-4 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),e.memberIds?.length||0," members",e.maxMembers&&(0,r.jsxs)("span",{className:"text-neutral-400",children:[" / ",e.maxMembers," max"]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[r.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"Leader: ",e.leaderName]}),e.meetingSchedule&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[r.jsx(m.Z,{className:"w-4 h-4 mr-2"}),U(e.meetingSchedule)]}),e.location&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),e.location]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-neutral-100",children:[r.jsx("div",{className:"flex space-x-2",children:L&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.default,{href:`/groups/${e.id}/attendance`,className:"inline-flex items-center px-3 py-1 border border-neutral-300 rounded-md text-xs font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[r.jsx(g.Z,{className:"w-3 h-3 mr-1"}),"Attendance"]}),(0,r.jsxs)(l.default,{href:`/communications/group/${e.id}`,className:"inline-flex items-center px-3 py-1 border border-neutral-300 rounded-md text-xs font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[r.jsx(y.Z,{className:"w-3 h-3 mr-1"}),"Message"]})]})}),r.jsx(l.default,{href:`/groups/${e.id}`,className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View Details →"})]})]})},e.id))}),0===t.length&&!i&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(h.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No groups found"}),r.jsx("p",{className:"text-neutral-600 mb-6",children:N?"Try adjusting your search criteria":"Get started by creating your first group"}),D&&!N&&(0,r.jsxs)(l.default,{href:"/groups/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:[r.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"Create Group"]})]}),_>20&&(0,r.jsxs)("div",{className:"flex items-center justify-between border-t border-neutral-200 bg-white px-4 py-3 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>E(e=>Math.max(e-1,1)),disabled:1===M,className:"relative inline-flex items-center px-4 py-2 border border-neutral-300 text-sm font-medium rounded-md text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>E(e=>e+1),disabled:20*M>=_,className:"relative ml-3 inline-flex items-center px-4 py-2 border border-neutral-300 text-sm font-medium rounded-md text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Next"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-neutral-700",children:["Showing ",r.jsx("span",{className:"font-medium",children:(M-1)*20+1})," to"," ",r.jsx("span",{className:"font-medium",children:Math.min(20*M,_)})," ","of ",r.jsx("span",{className:"font-medium",children:_})," results"]})}),r.jsx("div",{children:(0,r.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[r.jsx("button",{onClick:()=>E(e=>Math.max(e-1,1)),disabled:1===M,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-neutral-300 bg-white text-sm font-medium text-neutral-500 hover:bg-neutral-50 disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>E(e=>e+1),disabled:20*M>=_,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-neutral-300 bg-white text-sm font-medium text-neutral-500 hover:bg-neutral-50 disabled:opacity-50",children:"Next"})]})})]})]})]})}function j(){return r.jsx(i.Z,{children:r.jsx(n.Z,{children:r.jsx(v,{})})})}},4349:(e,t,s)=>{"use strict";s.d(t,{P:()=>a});class r{async fetchWithAuth(e,t={}){let s=localStorage.getItem("auth_token"),r={"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...t.headers},a=0;for(;a<=this.MAX_RETRIES;)try{let s=await fetch(`${e}`,{...t,headers:r});if(!s.ok){if(429===s.status&&a<this.MAX_RETRIES){await new Promise(e=>setTimeout(e,1e3*(a+1))),a++;continue}let e=await s.json().catch(()=>({message:s.statusText}));throw Error(e.message||`HTTP ${s.status}: ${s.statusText}`)}return s.json()}catch(e){if(a<this.MAX_RETRIES&&e.message.includes("fetch")){a++,await new Promise(e=>setTimeout(e,1e3*a));continue}throw e}}getCacheKey(e,t={}){return`${e}-${JSON.stringify(t.body||{})}`}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getGroups(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.type?.length&&t.append("type",e.type.join(",")),e.status?.length&&t.append("status",e.status.join(",")),e.leaderId&&t.append("leaderId",e.leaderId),e.tags?.length&&t.append("tags",e.tags.join(",")),void 0!==e.hasAvailableSpace&&t.append("hasAvailableSpace",e.hasAvailableSpace.toString()),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()));let s=`/api/groups${t.toString()?`?${t.toString()}`:""}`,r=this.getCacheKey(s);if(this.isValidCache(r))return this.requestCache.get(r).data;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);let a=this.fetchWithAuth(s).then(e=>(this.requestCache.set(r,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(r),e)).catch(e=>{throw this.pendingRequests.delete(r),e});return this.pendingRequests.set(r,a),a}async getGroup(e){return this.fetchWithAuth(`/api/groups/${e}`)}async createGroup(e){return this.fetchWithAuth("/api/groups",{method:"POST",body:JSON.stringify(e)})}async updateGroup(e){return this.fetchWithAuth(`/api/groups/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}async deleteGroup(e){await this.fetchWithAuth(`/api/groups/${e}`,{method:"DELETE"})}async getGroupMembers(e){return(await this.fetchWithAuth(`/api/groups/${e}/members`)).members||[]}async addGroupMember(e,t,s="member"){return this.fetchWithAuth(`/api/groups/${e}/members`,{method:"POST",body:JSON.stringify({memberId:t,role:s})})}async updateGroupMember(e,t,s){return this.fetchWithAuth(`/api/groups/${e}/members/${t}`,{method:"PUT",body:JSON.stringify(s)})}async removeGroupMember(e,t){await this.fetchWithAuth(`/api/groups/${e}/members/${t}`,{method:"DELETE"})}async getGroupAttendance(e,t,s){let r=new URLSearchParams;t&&r.append("startDate",t),s&&r.append("endDate",s);let a=`/api/groups/${e}/attendance${r.toString()?`?${r.toString()}`:""}`;return this.fetchWithAuth(a)}async recordAttendance(e){return this.fetchWithAuth(`/api/groups/${e.groupId}/attendance`,{method:"POST",body:JSON.stringify(e)})}async updateAttendance(e,t,s){return this.fetchWithAuth(`/api/groups/${e}/attendance/${t}`,{method:"PUT",body:JSON.stringify(s)})}async deleteAttendance(e,t){await this.fetchWithAuth(`/api/groups/${e}/attendance/${t}`,{method:"DELETE"})}async getGroupStats(){return this.fetchWithAuth("/api/groups/stats")}async getGroupAttendanceStats(e,t="month"){return this.fetchWithAuth(`/api/groups/${e}/stats/attendance?period=${t}`)}async exportGroups(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.type?.length&&t.append("type",e.type.join(",")),e.status?.length&&t.append("status",e.status.join(",")));let s=localStorage.getItem("auth_token"),r=await fetch(`/api/groups/export${t.toString()?`?${t.toString()}`:""}`,{headers:{...s&&{Authorization:`Bearer ${s}`}}});if(!r.ok)throw Error(`Export failed: ${r.statusText}`);return r.blob()}async bulkUpdateGroups(e,t){return this.fetchWithAuth("/api/groups/bulk",{method:"PUT",body:JSON.stringify({groupIds:e,updates:t})})}async bulkDeleteGroups(e){return this.fetchWithAuth("/api/groups/bulk",{method:"DELETE",body:JSON.stringify({groupIds:e})})}async getGroupTypes(){return[{value:"small_group",label:"Small Group",description:"Intimate fellowship and Bible study groups"},{value:"ministry",label:"Ministry Team",description:"Service-focused ministry groups"},{value:"youth",label:"Youth Group",description:"Teen and young adult groups"},{value:"seniors",label:"Seniors Group",description:"Groups for older adults"},{value:"womens",label:"Women's Group",description:"Women's fellowship and study groups"},{value:"mens",label:"Men's Group",description:"Men's fellowship and study groups"},{value:"children",label:"Children's Group",description:"Groups for children and families"},{value:"worship",label:"Worship Team",description:"Music and worship ministry teams"},{value:"service",label:"Service Team",description:"Community service and outreach teams"},{value:"bible_study",label:"Bible Study",description:"Scripture study and discussion groups"},{value:"prayer",label:"Prayer Group",description:"Prayer and intercession groups"},{value:"outreach",label:"Outreach Team",description:"Evangelism and community outreach"},{value:"other",label:"Other",description:"Custom group types"}]}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let a=new r},5958:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\groups\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935,434,772,62],()=>s(8898));module.exports=r})();