(()=>{var e={};e.id=531,e.ids=[531],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},747:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>m}),s(866),s(3817),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let m=["",{children:["journeys",{children:["assign",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,866)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\journeys\\assign\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\journeys\\assign\\page.tsx"],u="/journeys/assign/page",c={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/journeys/assign/page",pathname:"/journeys/assign",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},6571:(e,t,s)=>{Promise.resolve().then(s.bind(s,449))},1215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},449:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(326),a=s(7577),n=s(6608),i=s(8122),o=s(5047),l=s(8082),m=s(2523);s(8440);var d=s(6343),u=s(4061),c=s(8307),h=s(6557);let p=(0,h.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),y=(0,h.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var g=s(4975),x=s(1215);function b(){let{user:e}=(0,l.a)(),t=(0,o.useRouter)(),[s,n]=(0,a.useState)(!0),[i,h]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[j,w]=(0,a.useState)([]),[N,S]=(0,a.useState)([]),[$,v]=(0,a.useState)([]),[T,_]=(0,a.useState)(""),[k,E]=(0,a.useState)(new Set),[q,M]=(0,a.useState)(""),[P,C]=(0,a.useState)(""),[A,J]=(0,a.useState)(!0),[O,R]=(0,a.useState)(""),[D,I]=(0,a.useState)(!1),L=e=>{E(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},U=()=>O.trim()?N.filter(e=>{let t=`${e.firstName} ${e.lastName}`.toLowerCase(),s=e.email.toLowerCase(),r=O.toLowerCase();return t.includes(r)||s.includes(r)}):N,z=async e=>{if(e.preventDefault(),!T){f("Please select a journey template");return}if(0===k.size){f("Please select at least one member");return}h(!0),f(null);try{let e=Array.from(k);if(1===e.length){let t={memberId:e[0],journeyTemplateId:T,mentorId:q||void 0,notes:P.trim()||void 0,startImmediately:A};await m.u.assignJourneyToMember(t)}else await m.u.bulkAssignJourney(e,T,q||void 0);t.push("/journeys")}catch(e){f(e instanceof Error?e.message:"Failed to assign journey")}finally{h(!1)}},Z=j?.find(e=>e.id===T),W=U();return s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,r.jsxs)("form",{onSubmit:z,className:"space-y-8",children:[b&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("div",{className:"text-sm text-red-700",children:b})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 mb-4 flex items-center",children:[r.jsx(d.Z,{className:"w-5 h-5 mr-2"}),"Select Journey Template"]}),r.jsx("div",{className:"space-y-3",children:j.map(e=>(0,r.jsxs)("label",{className:`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-colors ${T===e.id?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[r.jsx("input",{type:"radio",name:"template",value:e.id,checked:T===e.id,onChange:e=>_(e.target.value),className:"mt-1 text-primary-600 focus:ring-primary-500"}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"text-sm font-medium text-neutral-900",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${"beginner"===e.difficulty?"bg-green-100 text-green-800":"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.difficulty}),(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.milestones.length," milestones"]}),(0,r.jsxs)("span",{className:"text-xs text-neutral-500",children:[Math.ceil(e.estimatedDuration/7)," weeks"]})]})]}),r.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:e.description}),e.tags&&e.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map(e=>r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-neutral-100 text-neutral-700",children:e},e)),e.tags.length>3&&(0,r.jsxs)("span",{className:"text-xs text-neutral-500",children:["+",e.tags.length-3," more"]})]})]})]},e.id))}),0===j.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(d.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-600",children:"No journey templates available"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[r.jsx(u.Z,{className:"w-5 h-5 mr-2"}),"Select Members (",k.size," selected)"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>I(!D),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),D?"Hide Search":"Search Members"]})]}),D&&r.jsx("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search members by name or email...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:O,onChange:e=>R(e.target.value)})]})}),r.jsx("div",{className:"mb-4",children:(0,r.jsxs)("button",{type:"button",onClick:()=>{let e=U();e.every(e=>k.has(e.id))?E(t=>{let s=new Set(t);return e.forEach(e=>s.delete(e.id)),s}):E(t=>{let s=new Set(t);return e.forEach(e=>s.add(e.id)),s})},className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-700",children:[W.every(e=>k.has(e.id))?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p,{className:"w-4 h-4 mr-1"}),"Deselect All"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(y,{className:"w-4 h-4 mr-1"}),"Select All"]}),O&&` (${W.length} filtered)`]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-64 overflow-y-auto",children:W.map(e=>(0,r.jsxs)("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${k.has(e.id)?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[r.jsx("input",{type:"checkbox",checked:k.has(e.id),onChange:()=>L(e.id),className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500"}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-neutral-900",children:[e.firstName," ",e.lastName]}),r.jsx("div",{className:"text-xs text-neutral-500",children:e.email}),e.role&&r.jsx("div",{className:"text-xs text-neutral-400 capitalize",children:e.role.replace("_"," ")})]})]},e.id))}),0===W.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(u.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-600",children:O?"No members found matching your search":"No members available"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 mb-4 flex items-center",children:[r.jsx(g.Z,{className:"w-5 h-5 mr-2"}),"Assignment Options"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Assign Mentor (Optional)"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:q,onChange:e=>M(e.target.value),children:[r.jsx("option",{value:"",children:"No mentor assigned"}),$.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," (",e.role?.replace("_"," "),")"]},e.id))]}),r.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Mentors can guide members through their journey and approve milestone completions"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Notes (Optional)"}),r.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:P,onChange:e=>C(e.target.value),placeholder:"Add any notes or instructions for this assignment..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500",checked:A,onChange:e=>J(e.target.checked)}),r.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Start journey immediately"})]}),r.jsx("p",{className:"mt-1 ml-6 text-xs text-neutral-500",children:"If unchecked, members will need to manually start their journey"})]})]})]}),T&&k.size>0&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Assignment Summary"}),(0,r.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:Z?.name})," will be assigned to"," ",r.jsx("strong",{children:k.size})," member",1!==k.size?"s":""]}),(0,r.jsxs)("p",{children:["Estimated duration: ",(0,r.jsxs)("strong",{children:[Z?Math.ceil(Z.estimatedDuration/7):0," weeks"]})]}),q&&(0,r.jsxs)("p",{children:["Mentor: ",(0,r.jsxs)("strong",{children:[$.find(e=>e.id===q)?.firstName," ",$.find(e=>e.id===q)?.lastName]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>{t.back()},className:"px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:i||!T||0===k.size,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Assign Journey",k.size>1?"s":""]})]})]})}function f(){return r.jsx(n.Z,{requiredRole:"group_leader",children:r.jsx(i.Z,{children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Assign Journey"}),r.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Assign spiritual growth journeys to members and track their progress"})]}),r.jsx(b,{})]})})})}},2523:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});let r="https://faithlink360-api.onrender.com",a=new Map,n=new Map;class i{async request(e,t={},s,n=3e4){let i=`${r}${e}`,o=localStorage.getItem("auth_token"),l={"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},m={...t,headers:{...l,...t.headers}};if(s&&"GET"===t.method){let e=a.get(s);if(e&&Date.now()-e.timestamp<e.ttl)return console.log(`Cache hit for ${s}`),e.data}let d=Error("Request failed");for(let e=1;e<=3;e++)try{let r=await fetch(i,m);if(!r.ok){if(429===r.status){await new Promise(t=>setTimeout(t,1e3*e));continue}throw Error(`HTTP ${r.status}: ${r.statusText}`)}let o=await r.json();return s&&"GET"===t.method&&a.set(s,{data:o,timestamp:Date.now(),ttl:n}),o}catch(t){if(d=t instanceof Error?t:Error("Unknown error"),3===e)break;await new Promise(t=>setTimeout(t,1e3*e))}throw d}async getJourneyTemplates(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,s])=>{null!=s&&""!==s&&(Array.isArray(s)?s.forEach(s=>t.append(e,String(s))):t.append(e,String(s)))});let s=`journey_templates_${t.toString()}`;return this.request(`/api/journey-templates?${t.toString()}`,{method:"GET"},s)}async getJourneyTemplate(e){let t=`journey_template_${e}`;return this.request(`/api/journey-templates/${e}`,{method:"GET"},t)}async createJourneyTemplate(e){let t=await this.request("/api/journey-templates",{method:"POST",body:JSON.stringify(e)});return this.invalidateTemplateCache(),t}async updateJourneyTemplate(e){let t=await this.request(`/api/journey-templates/${e.id}`,{method:"PUT",body:JSON.stringify(e)});return a.delete(`journey_template_${e.id}`),this.invalidateTemplateCache(),t}async deleteJourneyTemplate(e){await this.request(`/api/journey-templates/${e}`,{method:"DELETE"}),a.delete(`journey_template_${e}`),this.invalidateTemplateCache()}async duplicateJourneyTemplate(e,t){let s=await this.request(`/api/journey-templates/${e}/duplicate`,{method:"POST",body:JSON.stringify({name:t})});return this.invalidateTemplateCache(),s}async getMemberJourneys(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,s])=>{null!=s&&""!==s&&t.append(e,String(s))});let s=`member_journeys_${t.toString()}`;return this.request(`/journeys/member-journeys?${t.toString()}`,{method:"GET"},s)}async getMemberJourney(e){let t=`member_journey_${e}`;return this.request(`/journeys/member-journeys/${e}`,{method:"GET"},t)}async assignJourneyToMember(e){let t=await this.request("/journeys/member-journeys",{method:"POST",body:JSON.stringify(e)});return this.invalidateMemberJourneyCache(),t}async updateMemberJourney(e){let t=await this.request(`/journeys/member-journeys/${e.id}`,{method:"PUT",body:JSON.stringify(e)});return a.delete(`member_journey_${e.id}`),this.invalidateMemberJourneyCache(),t}async deleteMemberJourney(e){await this.request(`/journeys/member-journeys/${e}`,{method:"DELETE"}),a.delete(`member_journey_${e}`),this.invalidateMemberJourneyCache()}async getMilestoneProgress(e,t){let s=`milestone_progress_${e}_${t}`;return this.request(`/journeys/member-journeys/${e}/milestones/${t}/progress`,{method:"GET"},s)}async startMilestone(e,t){let s=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/start`,{method:"POST"});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),s}async completeMilestone(e,t,s){let r=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/complete`,{method:"POST",body:JSON.stringify({notes:s})});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),r}async submitMilestone(e){let t=new FormData;t.append("type",e.type),t.append("content",e.content),e.attachments&&e.attachments.forEach((e,s)=>{t.append(`attachment_${s}`,e)});let s=localStorage.getItem("auth_token"),a=await fetch(`${r}/api/journeys/milestone-progress/${e.milestoneProgressId}/submit`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:t});if(!a.ok)throw Error(`HTTP ${a.status}: ${a.statusText}`);let n=await a.json();return this.invalidateMemberJourneyCache(),n}async approveMilestone(e,t,s){let r=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/approve`,{method:"POST",body:JSON.stringify({feedback:s})});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),r}async requestMilestoneRevision(e,t,s){let r=await this.request(`/journeys/member-journeys/${e}/milestones/${t}/request-revision`,{method:"POST",body:JSON.stringify({feedback:s})});return a.delete(`member_journey_${e}`),a.delete(`milestone_progress_${e}_${t}`),r}async getJourneyStats(){return this.request("/journeys/stats",{method:"GET"},"journey_stats",6e4)}async getMemberJourneyStats(e){let t=`member_journey_stats_${e}`;return this.request(`/journeys/members/${e}/stats`,{method:"GET"},t,6e4)}async bulkAssignJourney(e,t,s){let r=await this.request("/journeys/bulk-assign",{method:"POST",body:JSON.stringify({memberIds:e,templateId:t,mentorId:s})});return this.invalidateMemberJourneyCache(),r}async bulkUpdateJourneyStatus(e,t){await this.request("/journeys/bulk-status",{method:"POST",body:JSON.stringify({journeyIds:e,status:t})}),this.invalidateMemberJourneyCache()}async exportJourneyTemplate(e,t="json"){let s=await fetch(`${r}/api/journey-templates/${e}/export?format=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!s.ok)throw Error(`Export failed: ${s.statusText}`);return s.blob()}async exportMemberJourneyProgress(e,t="pdf"){let s=await fetch(`${r}/journeys/member-journeys/${e}/export?format=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!s.ok)throw Error(`Export failed: ${s.statusText}`);return s.blob()}invalidateTemplateCache(){for(let[e]of a)e.includes("journey_template")&&a.delete(e)}invalidateMemberJourneyCache(){for(let[e]of a)(e.includes("member_journey")||e.includes("milestone_progress"))&&a.delete(e)}clearCache(){a.clear(),n.clear()}}let o=new i},8440:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});let r="https://faithlink360-api.onrender.com";class a{async fetchWithAuth(e,t={}){let s=localStorage.getItem("auth_token"),r=e.startsWith("http")?e:`http://localhost:8000${e}`,a=0;for(;a<=this.MAX_RETRIES;)try{let e=await fetch(r,{...t,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...t.headers}});if(!e.ok){if(401===e.status){localStorage.removeItem("auth_token"),window.location.href="/login";return}let t=await e.json().catch(()=>({message:e.statusText}));throw Error(t.message||`HTTP ${e.status}: ${e.statusText}`)}return e.json()}catch(e){if(a<this.MAX_RETRIES&&e.message.includes("fetch")){a++,await new Promise(e=>setTimeout(e,1e3*a));continue}throw e}}getCacheKey(e,t={}){return`${e}-${JSON.stringify(t.body||{})}`}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getMembers(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.tags?.length&&t.append("tags",e.tags.join(",")),e.membershipStatus?.length&&t.append("status",e.membershipStatus.join(",")),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.ageRange&&(e.ageRange.min&&t.append("ageMin",e.ageRange.min.toString()),e.ageRange.max&&t.append("ageMax",e.ageRange.max.toString())),e.joinDateRange&&(e.joinDateRange.start&&t.append("joinStart",e.joinDateRange.start.toISOString()),e.joinDateRange.end&&t.append("joinEnd",e.joinDateRange.end.toISOString())),e.groups?.length&&t.append("groups",e.groups.join(",")));let s=`/api/members${t.toString()?`?${t.toString()}`:""}`,r=this.getCacheKey(s);if(this.isValidCache(r))return this.requestCache.get(r).data;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);let a=this.fetchWithAuth(s).then(e=>(this.requestCache.set(r,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(r),e)).catch(e=>{throw this.pendingRequests.delete(r),e});return this.pendingRequests.set(r,a),a}async getMember(e){return this.fetchWithAuth(`/api/members/${e}`)}async createMember(e){return this.fetchWithAuth("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e){return this.fetchWithAuth(`/api/members/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}async deleteMember(e){await this.fetchWithAuth(`/api/members/${e}`,{method:"DELETE"})}async getMemberStats(){return this.fetchWithAuth("/api/members/stats")}async getTags(){return this.fetchWithAuth("/api/members/tags")}async createTag(e){return this.fetchWithAuth("/api/members/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.fetchWithAuth(`/api/members/tags/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){await this.fetchWithAuth(`/api/members/tags/${e}`,{method:"DELETE"})}async uploadProfilePhoto(e,t){let s=localStorage.getItem("auth_token"),a=new FormData;a.append("photo",t);let n=await fetch(`${r}/api/members/${e}/photo`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:a});if(!n.ok)throw Error((await n.json().catch(()=>({message:n.statusText}))).message||`HTTP ${n.status}: ${n.statusText}`);return n.json()}async getSearchSuggestions(e){return this.fetchWithAuth(`/api/members/search/suggestions?q=${encodeURIComponent(e)}`)}async exportMembers(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.tags?.length&&t.append("tags",e.tags.join(",")),e.membershipStatus?.length&&t.append("status",e.membershipStatus.join(",")));let s=localStorage.getItem("auth_token"),a=await fetch(`${r}/api/members/export${t.toString()?`?${t.toString()}`:""}`,{headers:{...s&&{Authorization:`Bearer ${s}`}}});if(!a.ok)throw Error(`Export failed: ${a.statusText}`);return a.blob()}async bulkUpdateMembers(e,t){return this.fetchWithAuth("/api/members/bulk",{method:"PUT",body:JSON.stringify({memberIds:e,updates:t})})}async bulkDeleteMembers(e){return this.fetchWithAuth("/api/members/bulk",{method:"DELETE",body:JSON.stringify({memberIds:e})})}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let n=new a},866:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\journeys\assign\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935,434,748],()=>s(747));module.exports=r})();