(()=>{var e={};e.id=38,e.ids=[38],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9152:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(2072),s(3817),s(5866);var a=s(3191),r=s(8716),n=s(7922),l=s.n(n),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["events",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2072)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\events\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\allen\\Downloads\\FaithLink-main\\FaithLink-main\\src\\frontend\\src\\app\\events\\page.tsx"],x="/events/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/events/page",pathname:"/events",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2940:(e,t,s)=>{Promise.resolve().then(s.bind(s,7312))},7888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4659:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1540:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},5932:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9819:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},7312:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(326),r=s(7577),n=s(434),l=s(3855),i=s(8307),c=s(7358),d=s(7636),o=s(4061),x=s(9819),m=s(6557);let u=(0,m.Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var h=s(8122),p=s(6608),g=s(4019),y=s(9635);function j({event:e,isOpen:t,onClose:s,onRegister:n}){let[l,i]=(0,r.useState)({name:"",email:"",phone:"",attendeeCount:1,specialRequests:"",emergencyContact:"",emergencyPhone:""}),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)({}),p=()=>{let t={};return l.name.trim()||(t.name="Name is required"),l.email.trim()||(t.email="Email is required"),l.email.includes("@")||(t.email="Valid email is required"),1>Number(l.attendeeCount)&&(t.attendeeCount="At least 1 attendee required"),e.maxAttendees&&e.currentAttendees+Number(l.attendeeCount)>e.maxAttendees&&(t.attendeeCount=`Only ${e.maxAttendees-e.currentAttendees} spots remaining`),h(t),0===Object.keys(t).length},j=async e=>{if(e.preventDefault(),p()){m(!0);try{await n(l),i({name:"",email:"",phone:"",attendeeCount:1,specialRequests:"",emergencyContact:"",emergencyPhone:""}),s()}catch(e){console.error("Registration failed:",e)}finally{m(!1)}}},b=e.maxAttendees?e.maxAttendees-e.currentAttendees:null;return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Register for Event"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(g.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:e.title}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2"}),new Date(e.startDateTime).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2"}),e.currentAttendees," registered",null!==b&&(0,a.jsxs)("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${b>10?"bg-green-100 text-green-800":b>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[b," spots left"]})]})]})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{type:"text",value:l.name,onChange:e=>i({...l,name:e.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.name?"border-red-300":"border-gray-300"}`,placeholder:"Your full name"}),u.name&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:l.email,onChange:e=>i({...l,email:e.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.email?"border-red-300":"border-gray-300"}`,placeholder:"your.email@example.com"}),u.email&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.email})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsx("input",{type:"tel",value:l.phone,onChange:e=>i({...l,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(555) 123-4567"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Attendees *"}),a.jsx("input",{type:"number",min:"1",max:b||10,value:l.attendeeCount.toString(),onChange:e=>i({...l,attendeeCount:parseInt(e.target.value)||1}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.attendeeCount?"border-red-300":"border-gray-300"}`}),u.attendeeCount&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.attendeeCount})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact"}),a.jsx("input",{type:"text",value:l.emergencyContact,onChange:e=>i({...l,emergencyContact:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Emergency contact name"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Phone"}),a.jsx("input",{type:"tel",value:l.emergencyPhone,onChange:e=>i({...l,emergencyPhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Emergency contact phone"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Requests or Dietary Restrictions"}),a.jsx("textarea",{value:l.specialRequests,onChange:e=>i({...l,specialRequests:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Any special accommodations needed..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:x||null!==b&&0===b,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:x?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Registering..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Register"})]})})]})]})]})]})}):null}var b=s(8998);let v=(0,m.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var f=s(1540),N=s(5932),w=s(2887);function k({eventId:e,eventTitle:t,isOpen:s,onClose:n}){let[l,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0),[u,h]=(0,r.useState)(""),[p,g]=(0,r.useState)("all"),y=async(t,s)=>{try{(await fetch(`/api/events/${e}/rsvps/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok&&c(e=>e.map(e=>e.id===t?{...e,status:s}:e))}catch(e){console.error("Failed to update RSVP status:",e)}},j=l.filter(e=>{let t=e.memberName.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase()),s="all"===p||e.status===p;return t&&s}),k=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"tentative":return"bg-yellow-100 text-yellow-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=e=>{switch(e){case"confirmed":return a.jsx(x.Z,{className:"w-4 h-4"});case"tentative":return a.jsx(b.Z,{className:"w-4 h-4"});case"declined":return a.jsx(v,{className:"w-4 h-4"});default:return a.jsx(o.Z,{className:"w-4 h-4"})}},S={confirmed:l.filter(e=>"confirmed"===e.status).length,tentative:l.filter(e=>"tentative"===e.status).length,declined:l.filter(e=>"declined"===e.status).length,noResponse:l.filter(e=>"no-response"===e.status).length},Z=l.filter(e=>"confirmed"===e.status).reduce((e,t)=>e+t.attendeeCount,0);return s?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"RSVP Tracker"}),a.jsx("p",{className:"text-sm text-gray-600",children:t})]}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:S.confirmed}),a.jsx("div",{className:"text-sm text-green-700",children:"Confirmed"}),(0,a.jsxs)("div",{className:"text-xs text-green-600",children:[Z," attendees"]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:S.tentative}),a.jsx("div",{className:"text-sm text-yellow-700",children:"Tentative"})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:S.declined}),a.jsx("div",{className:"text-sm text-red-700",children:"Declined"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-600",children:S.noResponse}),a.jsx("div",{className:"text-sm text-gray-700",children:"No Response"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.length}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total RSVPs"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(i.Z,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search RSVPs...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"tentative",children:"Tentative"}),a.jsx("option",{value:"declined",children:"Declined"}),a.jsx("option",{value:"no-response",children:"No Response"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Name,Email,Phone,Attendees,Status,Registration Date,Special Requests,Emergency Contact,Emergency Phone",...j.map(e=>[e.memberName,e.email,e.phone||"",e.attendeeCount,e.status,new Date(e.registrationDate).toLocaleDateString(),e.specialRequests||"",e.emergencyContact||"",e.emergencyPhone||""].join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=`${t.replace(/\s+/g,"_")}_RSVPs.csv`,a.click(),URL.revokeObjectURL(s)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[a.jsx(f.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]})]}),d?a.jsx("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>a.jsx("div",{className:"h-16 bg-gray-200 rounded"},t))}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendees"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registered"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.memberName}),e.specialRequests&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Special: ",e.specialRequests]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[a.jsx(N.Z,{className:"w-3 h-3 mr-1"}),e.email]}),e.phone&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[a.jsx(w.Z,{className:"w-3 h-3 mr-1"}),e.phone]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.attendeeCount}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${k(e.status)}`,children:[C(e.status),a.jsx("span",{className:"ml-1",children:e.status.replace("-"," ")})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.registrationDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("select",{value:e.status,onChange:t=>y(e.id,t.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"tentative",children:"Tentative"}),a.jsx("option",{value:"declined",children:"Declined"}),a.jsx("option",{value:"no-response",children:"No Response"})]})})]},e.id))})]}),0===j.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(o.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No RSVPs found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u||"all"!==p?"Try adjusting your search or filter criteria.":"No one has registered for this event yet."})]})]})]})]})}):null}var C=s(4659),S=s(7888);function Z({eventId:e,eventTitle:t,isOpen:s,onClose:n}){let[l,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[m,h]=(0,r.useState)(""),[p,y]=(0,r.useState)("all"),[j,v]=(0,r.useState)(!1),f=async t=>{try{(await fetch(`/api/events/${e}/check-in/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkInTime:new Date().toISOString()})})).ok&&c(e=>e.map(e=>e.id===t?{...e,status:"checked-in",checkInTime:new Date().toISOString()}:e))}catch(e){console.error("Failed to check in attendee:",e)}},N=async t=>{try{(await fetch(`/api/events/${e}/check-in/${t}`,{method:"DELETE"})).ok&&c(e=>e.map(e=>e.id===t?{...e,status:"registered",checkInTime:void 0}:e))}catch(e){console.error("Failed to undo check-in:",e)}},w=async t=>{try{(await fetch(`/api/events/${e}/check-in/${t}/no-show`,{method:"POST"})).ok&&c(e=>e.map(e=>e.id===t?{...e,status:"no-show"}:e))}catch(e){console.error("Failed to mark as no-show:",e)}},k=l.filter(e=>{let t=e.memberName.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase()),s="all"===p||e.status===p;return t&&s}),Z=e=>{switch(e){case"checked-in":return"bg-green-100 text-green-800";case"registered":return"bg-blue-100 text-blue-800";case"no-show":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=e=>{switch(e){case"checked-in":return a.jsx(C.Z,{className:"w-4 h-4"});case"registered":default:return a.jsx(b.Z,{className:"w-4 h-4"});case"no-show":return a.jsx(S.Z,{className:"w-4 h-4"})}},A={checkedIn:l.filter(e=>"checked-in"===e.status).length,registered:l.filter(e=>"registered"===e.status).length,noShow:l.filter(e=>"no-show"===e.status).length},R=l.filter(e=>"checked-in"===e.status).reduce((e,t)=>e+t.attendeeCount,0),P=l.reduce((e,t)=>e+t.attendeeCount,0);return s?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Event Check-In"}),a.jsx("p",{className:"text-sm text-gray-600",children:t})]}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(g.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.checkedIn}),a.jsx("div",{className:"text-sm text-green-700",children:"Checked In"}),(0,a.jsxs)("div",{className:"text-xs text-green-600",children:[R," people"]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.registered}),a.jsx("div",{className:"text-sm text-blue-700",children:"Not Yet Arrived"})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.noShow}),a.jsx("div",{className:"text-sm text-red-700",children:"No Shows"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(R/P*100)||0,"%"]}),a.jsx("div",{className:"text-sm text-purple-700",children:"Attendance Rate"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(i.Z,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search attendees...",value:m,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"checked-in",children:"Checked In"}),a.jsx("option",{value:"registered",children:"Not Arrived"}),a.jsx("option",{value:"no-show",children:"No Shows"})]}),(0,a.jsxs)("button",{onClick:()=>v(!j),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[a.jsx(u,{className:"w-4 h-4"}),a.jsx("span",{children:"QR Scanner"})]})]}),j&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(u,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"QR Code Scanner Active"}),a.jsx("p",{className:"text-xs text-blue-700",children:"QR code scanning functionality would be implemented here using a camera library like react-qr-scanner"})]})]})}),d?a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(6)].map((e,t)=>a.jsx("div",{className:"h-16 bg-gray-200 rounded"},t))}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Party Size"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-In Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.memberName}),a.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.attendeeCount}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${Z(e.status)}`,children:[T(e.status),a.jsx("span",{className:"ml-1",children:e.status.replace("-"," ")})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.checkInTime?new Date(e.checkInTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"—"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["registered"===e.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>f(e.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"Check In"}),a.jsx("button",{onClick:()=>w(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"No Show"})]}),"checked-in"===e.status&&a.jsx("button",{onClick:()=>N(e.id),className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"Undo"}),"no-show"===e.status&&a.jsx("button",{onClick:()=>f(e.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"Check In"})]})})]},e.id))})]}),0===k.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(x.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No attendees found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:m||"all"!==p?"Try adjusting your search or filter criteria.":"No registrations found for this event."})]})]})]})]})}):null}function T(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[b,v]=(0,r.useState)("all"),[f,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),[S,T]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),P=async()=>{try{m(!0),t([{id:"1",title:"Sunday Service",description:"Weekly worship service with communion",startDateTime:"2024-01-07T10:00:00",endDateTime:"2024-01-07T11:30:00",location:"Main Sanctuary",eventType:"service",maxAttendees:200,currentAttendees:150,isRecurring:!0,status:"upcoming"},{id:"2",title:"Youth Bible Study",description:"Interactive Bible study for teens and young adults",startDateTime:"2024-01-10T19:00:00",endDateTime:"2024-01-10T20:30:00",location:"Youth Center",eventType:"bible_study",maxAttendees:30,currentAttendees:18,isRecurring:!0,status:"upcoming"},{id:"3",title:"Community Outreach",description:"Serving meals at local shelter",startDateTime:"2024-01-15T12:00:00",endDateTime:"2024-01-15T16:00:00",location:"Downtown Shelter",eventType:"outreach",maxAttendees:25,currentAttendees:12,isRecurring:!1,status:"upcoming"}])}catch(e){console.error("Error fetching events:",e)}finally{m(!1)}},L=e.filter(e=>{let t=e.title.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase()),s="all"===b||e.status===b;return t&&s}),q=e=>{switch(e){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}},D=e=>new Date(e).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return s?a.jsx(p.Z,{children:a.jsx(h.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})})}):a.jsx(p.Z,{children:a.jsx(h.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Events"}),a.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Manage church events and activities"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)(n.default,{href:"/events/new",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search events...",value:g,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),a.jsx("div",{className:"sm:w-48",children:(0,a.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Events"}),a.jsx("option",{value:"upcoming",children:"Upcoming"}),a.jsx("option",{value:"ongoing",children:"Ongoing"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:L.map(e=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-neutral-900 truncate",children:e.title}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${q(e.status)}`,children:e.status})]}),a.jsx("p",{className:"text-sm text-neutral-600 mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2 text-neutral-400"}),D(e.startDateTime)]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.currentAttendees,e.maxAttendees&&` / ${e.maxAttendees}`," attendees"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{N(e),C(!0)},className:"flex-1 px-3 py-2 text-sm font-medium text-green-600 bg-green-50 rounded-md hover:bg-green-100 flex items-center justify-center space-x-1",children:[a.jsx(x.Z,{className:"w-3 h-3"}),a.jsx("span",{children:"Register"})]}),a.jsx("button",{onClick:()=>{N(e),T(!0)},className:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100",children:a.jsx(o.Z,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>{N(e),R(!0)},className:"px-3 py-2 text-sm font-medium text-purple-600 bg-purple-50 rounded-md hover:bg-purple-100",children:a.jsx(u,{className:"w-3 h-3"})})]})]})},e.id))}),0===L.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(c.Z,{className:"mx-auto h-12 w-12 text-neutral-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-neutral-900",children:"No events found"}),a.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:g||"all"!==b?"Try adjusting your search or filter criteria.":"Get started by creating your first event."}),!g&&"all"===b&&a.jsx("div",{className:"mt-6",children:(0,a.jsxs)(n.default,{href:"/events/new",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700",children:[a.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]}),f&&a.jsx(j,{event:f,isOpen:w,onClose:()=>{C(!1),N(null)},onRegister:async e=>{try{(await fetch(`/api/events/${f.id}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&await P()}catch(e){console.error("Registration failed:",e)}}}),f&&a.jsx(k,{eventId:f.id,eventTitle:f.title,isOpen:S,onClose:()=>{T(!1),N(null)}}),f&&a.jsx(Z,{eventId:f.id,eventTitle:f.title,isOpen:A,onClose:()=>{R(!1),N(null)}})]})})})}},2072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\app\events\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[935,434,748],()=>s(9152));module.exports=a})();