exports.id=291,exports.ids=[291],exports.modules={6702:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5931:(e,t,r)=>{Promise.resolve().then(r.bind(r,8082))},6557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(7577),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,...u},m)=>(0,a.createElement)("svg",{ref:m,...s,width:i,height:i,stroke:r,strokeWidth:o?24*Number(l)/Number(i):l,className:["lucide",`lucide-${n(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},7888:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},3685:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},9635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5047:(e,t,r)=>{"use strict";var a=r(7389);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},9151:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r(326),s=r(7577),n=r(5047),i=r(4019),l=r(7888),o=r(9635),d=r(3685),c=r(3855),u=r(1215),m=r(8440);function h({member:e,onSave:t,onCancel:r}){let h=(0,n.useRouter)(),[g,p]=(0,s.useState)(!1),[x,b]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[v,j]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:void 0,address:{street:"",city:"",state:"",zipCode:"",country:"United States"},profilePhoto:"",membershipStatus:"pending",joinDate:new Date,tags:[],notes:"",emergencyContact:{name:"",relationship:"",phone:"",email:""},spiritualJourney:{baptismDate:void 0,salvationDate:void 0,currentStage:"",notes:""},groupMemberships:[],attendance:[],careHistory:[],preferences:{communicationMethod:"email",newsletter:!0,eventNotifications:!0,privacyLevel:"members"},createdAt:new Date,updatedAt:new Date,createdBy:"",updatedBy:""}),[N,w]=(0,s.useState)(""),[S,k]=(0,s.useState)(null),[C,A]=(0,s.useState)(""),P=(e,t)=>{j(r=>{let a=e.split(".");return 1===a.length?{...r,[e]:t}:2===a.length?{...r,[a[0]]:{...r[a[0]],[a[1]]:t}}:r})},T=()=>{N.trim()&&!v.tags.includes(N.trim())&&(j(e=>({...e,tags:[...e.tags,N.trim()]})),w(""))},E=e=>{j(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},R=()=>!!(v.firstName&&v.lastName&&v.email),O=async r=>{if(r.preventDefault(),!R()){b("Please fill in all required fields.");return}p(!0),b(null);try{let r;if(e){let t={id:e.id,...v};r=await m.H.updateMember(t),f("Member updated successfully!")}else{let e={firstName:v.firstName,lastName:v.lastName,email:v.email,phone:v.phone,dateOfBirth:v.dateOfBirth,address:v.address,membershipStatus:v.membershipStatus,tags:v.tags,notes:v.notes,emergencyContact:v.emergencyContact,preferences:v.preferences};r=await m.H.createMember(e),f("Member created successfully!")}if(S&&r.id)try{await m.H.uploadProfilePhoto(r.id,S)}catch(e){console.warn("Failed to upload profile photo:",e)}t?t(r):setTimeout(()=>{h.push(`/members/${r.id}`)},2e3)}catch(e){b(e instanceof Error?e.message:"Failed to save member")}finally{p(!1)}},L=()=>{r?r():h.push("/members")};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg",children:[a.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Edit Member":"Add New Member"}),a.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600",children:a.jsx(i.Z,{size:24})})]})}),x&&a.jsx("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(l.Z,{className:"text-red-600 mr-2",size:20}),a.jsx("span",{className:"text-red-800",children:x})]})}),y&&a.jsx("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:a.jsx("span",{className:"text-green-800",children:y})}),(0,a.jsxs)("form",{onSubmit:O,className:"p-6 space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:"flex-shrink-0",children:C?a.jsx("img",{src:C,alt:"Profile preview",className:"h-20 w-20 rounded-full object-cover"}):a.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-300 flex items-center justify-center",children:a.jsx(o.Z,{className:"h-10 w-10 text-gray-600"})})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){k(t);let e=new FileReader;e.onload=e=>{A(e.target?.result)},e.readAsDataURL(t)}},className:"hidden",id:"photo-upload"}),(0,a.jsxs)("label",{htmlFor:"photo-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[a.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"Upload Photo"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:v.firstName,onChange:e=>P("firstName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter first name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:v.lastName,onChange:e=>P("lastName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter last name"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",required:!0,value:v.email,onChange:e=>P("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:v.phone||"",onChange:e=>P("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:v.dateOfBirth?v.dateOfBirth.toISOString().split("T")[0]:"",onChange:e=>P("dateOfBirth",e.target.value?new Date(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Membership Status"}),(0,a.jsxs)("select",{value:v.membershipStatus,onChange:e=>P("membershipStatus",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"visitor",children:"Visitor"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.tags.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,a.jsx("button",{type:"button",onClick:()=>E(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:a.jsx(i.Z,{size:14})})]},t))}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:N,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),T()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add a tag"}),a.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a.jsx(c.Z,{size:16})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Address Information"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),a.jsx("input",{type:"text",value:v.address?.street||"",onChange:e=>P("address.street",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter street address"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),a.jsx("input",{type:"text",value:v.address?.city||"",onChange:e=>P("address.city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter city"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),a.jsx("input",{type:"text",value:v.address?.state||"",onChange:e=>P("address.state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter state"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),a.jsx("input",{type:"text",value:v.address?.zipCode||"",onChange:e=>P("address.zipCode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter ZIP code"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Emergency Contact"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Name"}),a.jsx("input",{type:"text",value:v.emergencyContact?.name||"",onChange:e=>P("emergencyContact.name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact name"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),a.jsx("input",{type:"text",value:v.emergencyContact?.relationship||"",onChange:e=>P("emergencyContact.relationship",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Spouse, Parent, Friend"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),a.jsx("input",{type:"tel",value:v.emergencyContact?.phone||"",onChange:e=>P("emergencyContact.phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact phone"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),a.jsx("input",{type:"email",value:v.emergencyContact?.email||"",onChange:e=>P("emergencyContact.email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact email"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Spiritual Journey"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salvation Date"}),a.jsx("input",{type:"date",value:v.spiritualJourney?.salvationDate?v.spiritualJourney.salvationDate.toISOString().split("T")[0]:"",onChange:e=>P("spiritualJourney.salvationDate",e.target.value?new Date(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Baptism Date"}),a.jsx("input",{type:"date",value:v.spiritualJourney?.baptismDate?v.spiritualJourney.baptismDate.toISOString().split("T")[0]:"",onChange:e=>P("spiritualJourney.baptismDate",e.target.value?new Date(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Spiritual Stage"}),(0,a.jsxs)("select",{value:v.spiritualJourney?.currentStage||"",onChange:e=>P("spiritualJourney.currentStage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select stage"}),a.jsx("option",{value:"seeker",children:"Seeker"}),a.jsx("option",{value:"new-believer",children:"New Believer"}),a.jsx("option",{value:"growing",children:"Growing in Faith"}),a.jsx("option",{value:"mature",children:"Mature Believer"}),a.jsx("option",{value:"leader",children:"Spiritual Leader"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Preferences"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Communication Method"}),(0,a.jsxs)("select",{value:v.preferences?.communicationMethod||"email",onChange:e=>P("preferences.communicationMethod",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"email",children:"Email"}),a.jsx("option",{value:"phone",children:"Phone"}),a.jsx("option",{value:"text",children:"Text Message"}),a.jsx("option",{value:"app",children:"App Notifications"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privacy Level"}),(0,a.jsxs)("select",{value:v.preferences?.privacyLevel||"members",onChange:e=>P("preferences.privacyLevel",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"public",children:"Public"}),a.jsx("option",{value:"members",children:"Members Only"}),a.jsx("option",{value:"leaders",children:"Leaders Only"}),a.jsx("option",{value:"private",children:"Private"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:v.preferences?.newsletter||!1,onChange:e=>P("preferences.newsletter",e.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Receive newsletter"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:v.preferences?.eventNotifications||!1,onChange:e=>P("preferences.eventNotifications",e.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Receive event notifications"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),a.jsx("textarea",{value:v.notes||"",onChange:e=>P("notes",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes about this member..."})]}),a.jsx("div",{className:"border-t border-gray-200 pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:L,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:g||!R(),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:g?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{className:"mr-2 h-4 w-4"}),e?"Update Member":"Create Member"]})})]})})]})]})}},8082:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u,a:()=>m});var a=r(326),s=r(7577);let n="https://faithlink360-api.onrender.com";class i{async fetchWithAuth(e,t={}){let r=localStorage.getItem("auth_token"),a={"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},s=await fetch(`${n}${e}`,{...t,headers:a});if(!s.ok)throw Error((await s.json().catch(()=>({message:s.statusText}))).message||`HTTP ${s.status}: ${s.statusText}`);return s.json()}async login(e){let t=await fetch(`${n}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:t.statusText}))).message||`Login failed: ${t.statusText}`);let r=await t.json();return r.token&&(localStorage.setItem("auth_token",r.token),localStorage.setItem("user",JSON.stringify(r.user))),r}async register(e){return this.fetchWithAuth("/api/auth/register",{method:"POST",body:JSON.stringify(e)})}async getCurrentUser(){return this.fetchWithAuth("/api/auth/me")}async refreshToken(){return this.fetchWithAuth("/api/auth/refresh",{method:"POST"})}async logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("user");try{await this.fetchWithAuth("/api/auth/logout",{method:"POST"})}catch(e){console.log("Backend logout failed, but local logout successful")}}async forgotPassword(e){return this.fetchWithAuth("/api/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})})}async resetPassword(e,t){return this.fetchWithAuth("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,password:t})})}isTokenValid(){let e=localStorage.getItem("auth_token");if(!e)return!1;try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp>Date.now()}catch{return!1}}}let l=new i,o=(0,s.createContext)(void 0),d=(e,t)=>{switch(t.type){case"LOGIN_START":return{...e,isLoading:!0,error:null};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_ERROR":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...e,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};default:return e}},c={user:null,isAuthenticated:!1,isLoading:!0,error:null};function u({children:e}){let[t,r]=(0,s.useReducer)(d,c),n=async e=>{r({type:"LOGIN_START"});try{let t=await l.login(e);localStorage.setItem("auth_token",t.token),r({type:"LOGIN_SUCCESS",payload:t.user})}catch(e){r({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Login failed"})}},i=async e=>{r({type:"LOGIN_START"});try{let t=await l.register(e);localStorage.setItem("auth_token",t.token),r({type:"LOGIN_SUCCESS",payload:t.user})}catch(e){r({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Registration failed"})}},u={...t,login:n,register:i,logout:()=>{localStorage.removeItem("authToken"),r({type:"LOGOUT"})},clearError:()=>{r({type:"CLEAR_ERROR"})}};return a.jsx(o.Provider,{value:u,children:e})}function m(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8440:(e,t,r)=>{"use strict";r.d(t,{H:()=>n});let a="https://faithlink360-api.onrender.com";class s{async fetchWithAuth(e,t={}){let r=localStorage.getItem("auth_token"),a=e.startsWith("http")?e:`http://localhost:8000${e}`,s=0;for(;s<=this.MAX_RETRIES;)try{let e=await fetch(a,{...t,headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers}});if(!e.ok){if(401===e.status){localStorage.removeItem("auth_token"),window.location.href="/login";return}let t=await e.json().catch(()=>({message:e.statusText}));throw Error(t.message||`HTTP ${e.status}: ${e.statusText}`)}return e.json()}catch(e){if(s<this.MAX_RETRIES&&e.message.includes("fetch")){s++,await new Promise(e=>setTimeout(e,1e3*s));continue}throw e}}getCacheKey(e,t={}){return`${e}-${JSON.stringify(t.body||{})}`}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getMembers(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.tags?.length&&t.append("tags",e.tags.join(",")),e.membershipStatus?.length&&t.append("status",e.membershipStatus.join(",")),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.ageRange&&(e.ageRange.min&&t.append("ageMin",e.ageRange.min.toString()),e.ageRange.max&&t.append("ageMax",e.ageRange.max.toString())),e.joinDateRange&&(e.joinDateRange.start&&t.append("joinStart",e.joinDateRange.start.toISOString()),e.joinDateRange.end&&t.append("joinEnd",e.joinDateRange.end.toISOString())),e.groups?.length&&t.append("groups",e.groups.join(",")));let r=`/api/members${t.toString()?`?${t.toString()}`:""}`,a=this.getCacheKey(r);if(this.isValidCache(a))return this.requestCache.get(a).data;if(this.pendingRequests.has(a))return this.pendingRequests.get(a);let s=this.fetchWithAuth(r).then(e=>(this.requestCache.set(a,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(a),e)).catch(e=>{throw this.pendingRequests.delete(a),e});return this.pendingRequests.set(a,s),s}async getMember(e){return this.fetchWithAuth(`/api/members/${e}`)}async createMember(e){return this.fetchWithAuth("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e){return this.fetchWithAuth(`/api/members/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}async deleteMember(e){await this.fetchWithAuth(`/api/members/${e}`,{method:"DELETE"})}async getMemberStats(){return this.fetchWithAuth("/api/members/stats")}async getTags(){return this.fetchWithAuth("/api/members/tags")}async createTag(e){return this.fetchWithAuth("/api/members/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.fetchWithAuth(`/api/members/tags/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){await this.fetchWithAuth(`/api/members/tags/${e}`,{method:"DELETE"})}async uploadProfilePhoto(e,t){let r=localStorage.getItem("auth_token"),s=new FormData;s.append("photo",t);let n=await fetch(`${a}/api/members/${e}/photo`,{method:"POST",headers:{...r&&{Authorization:`Bearer ${r}`}},body:s});if(!n.ok)throw Error((await n.json().catch(()=>({message:n.statusText}))).message||`HTTP ${n.status}: ${n.statusText}`);return n.json()}async getSearchSuggestions(e){return this.fetchWithAuth(`/api/members/search/suggestions?q=${encodeURIComponent(e)}`)}async exportMembers(e){let t=new URLSearchParams;e&&(e.query&&t.append("query",e.query),e.tags?.length&&t.append("tags",e.tags.join(",")),e.membershipStatus?.length&&t.append("status",e.membershipStatus.join(",")));let r=localStorage.getItem("auth_token"),s=await fetch(`${a}/api/members/export${t.toString()?`?${t.toString()}`:""}`,{headers:{...r&&{Authorization:`Bearer ${r}`}}});if(!s.ok)throw Error(`Export failed: ${s.statusText}`);return s.blob()}async bulkUpdateMembers(e,t){return this.fetchWithAuth("/api/members/bulk",{method:"PUT",body:JSON.stringify({memberIds:e,updates:t})})}async bulkDeleteMembers(e){return this.fetchWithAuth("/api/members/bulk",{method:"DELETE",body:JSON.stringify({memberIds:e})})}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let n=new s},3817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var a=r(9510),s=r(5384),n=r.n(s);r(5023);var i=r(8570);let l=(0,i.createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\contexts\AuthContext.tsx#AuthProvider`);(0,i.createProxy)(String.raw`C:\Users\allen\Downloads\FaithLink-main\FaithLink-main\src\frontend\src\contexts\AuthContext.tsx#useAuth`);let o={title:{default:"FaithLink360 - Church Member Management",template:"%s | FaithLink360"},description:"Comprehensive church member management and engagement platform",keywords:["church management","member engagement","spiritual journey","community","faith"],authors:[{name:"FaithLink360 Team"}],creator:"FaithLink360",publisher:"FaithLink360",formatDetection:{email:!1,address:!1,telephone:!1},metadataBase:new URL("https://faithlink360.netlify.app"),openGraph:{title:"FaithLink360 - Church Member Engagement Platform",description:"Help churches track, engage, and care for members across their spiritual journeys.",url:"/",siteName:"FaithLink360",locale:"en_US",type:"website"},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},verification:{}};function d({children:e}){return a.jsx("html",{lang:"en",className:"h-full",children:(0,a.jsxs)("body",{className:`h-full antialiased ${n().className}`,children:[a.jsx(l,{children:(0,a.jsxs)("div",{className:"min-h-full",children:[a.jsx("main",{className:"flex-1",children:e}),a.jsx("div",{id:"toast-root"})]})}),a.jsx(a.Fragment,{})]})})}},5023:()=>{}};