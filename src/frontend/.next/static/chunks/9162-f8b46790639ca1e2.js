"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9162],{9763:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:m,...h}=r;return(0,a.createElement)("svg",{ref:l,...s,width:o,height:o,stroke:i,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(n(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2252:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9397:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3229:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7689:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2369:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},9162:function(e,t,r){r.d(t,{Z:function(){return h}});var a=r(7437),s=r(2265),n=r(9376),l=r(2489),i=r(2252),o=r(2369),d=r(7689),c=r(9397),u=r(3229),m=r(2850);function h(e){var t,r,h,g,p,b,x,f,y,v,j,N,w,k,S;let{member:C,onSave:E,onCancel:P}=e,A=(0,n.useRouter)(),[M,R]=(0,s.useState)(!1),[D,T]=(0,s.useState)(null),[O,Z]=(0,s.useState)(null),[q,B]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:void 0,address:{street:"",city:"",state:"",zipCode:"",country:"United States"},profilePhoto:"",membershipStatus:"pending",joinDate:new Date,tags:[],notes:"",emergencyContact:{name:"",relationship:"",phone:"",email:""},spiritualJourney:{baptismDate:void 0,salvationDate:void 0,currentStage:"",notes:""},groupMemberships:[],attendance:[],careHistory:[],preferences:{communicationMethod:"email",newsletter:!0,eventNotifications:!0,privacyLevel:"members"},createdAt:new Date,updatedAt:new Date,createdBy:"",updatedBy:""}),[I,J]=(0,s.useState)(""),[W,L]=(0,s.useState)(null),[U,z]=(0,s.useState)("");(0,s.useEffect)(()=>{C&&(B(C),z(C.profilePhoto||""))},[C]);let _=(e,t)=>{B(r=>{let a=e.split(".");return 1===a.length?{...r,[e]:t}:2===a.length?{...r,[a[0]]:{...r[a[0]],[a[1]]:t}}:r})},H=()=>{I.trim()&&!q.tags.includes(I.trim())&&(B(e=>({...e,tags:[...e.tags,I.trim()]})),J(""))},F=e=>{B(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},V=()=>!!(q.firstName&&q.lastName&&q.email),X=async e=>{if(e.preventDefault(),!V()){T("Please fill in all required fields.");return}R(!0),T(null);try{let e;if(C){let t={id:C.id,...q};e=await m.H.updateMember(t),Z("Member updated successfully!")}else{let t={firstName:q.firstName,lastName:q.lastName,email:q.email,phone:q.phone,dateOfBirth:q.dateOfBirth,address:q.address,membershipStatus:q.membershipStatus,tags:q.tags,notes:q.notes,emergencyContact:q.emergencyContact,preferences:q.preferences};e=await m.H.createMember(t),Z("Member created successfully!")}if(W&&e.id)try{await m.H.uploadProfilePhoto(e.id,W)}catch(e){console.warn("Failed to upload profile photo:",e)}E?E(e):setTimeout(()=>{A.push("/members/".concat(e.id))},2e3)}catch(e){T(e instanceof Error?e.message:"Failed to save member")}finally{R(!1)}},K=()=>{P?P():A.push("/members")};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:C?"Edit Member":"Add New Member"}),(0,a.jsx)("button",{onClick:K,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(l.Z,{size:24})})]})}),D&&(0,a.jsx)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"text-red-600 mr-2",size:20}),(0,a.jsx)("span",{className:"text-red-800",children:D})]})}),O&&(0,a.jsx)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("span",{className:"text-green-800",children:O})}),(0,a.jsxs)("form",{onSubmit:X,className:"p-6 space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:U?(0,a.jsx)("img",{src:U,alt:"Profile preview",className:"h-20 w-20 rounded-full object-cover"}):(0,a.jsx)("div",{className:"h-20 w-20 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"h-10 w-10 text-gray-600"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){L(r);let e=new FileReader;e.onload=e=>{var t;z(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(r)}},className:"hidden",id:"photo-upload"}),(0,a.jsxs)("label",{htmlFor:"photo-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Upload Photo"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,value:q.firstName,onChange:e=>_("firstName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter first name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,value:q.lastName,onChange:e=>_("lastName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter last name"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"email",required:!0,value:q.email,onChange:e=>_("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",value:q.phone||"",onChange:e=>_("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,a.jsx)("input",{type:"date",value:q.dateOfBirth?q.dateOfBirth.toISOString().split("T")[0]:"",onChange:e=>_("dateOfBirth",e.target.value?new Date(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Membership Status"}),(0,a.jsxs)("select",{value:q.membershipStatus,onChange:e=>_("membershipStatus",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"visitor",children:"Visitor"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:q.tags.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>F(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:(0,a.jsx)(l.Z,{size:14})})]},t))}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:I,onChange:e=>J(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),H()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add a tag"}),(0,a.jsx)("button",{type:"button",onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:(0,a.jsx)(c.Z,{size:16})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Address Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),(0,a.jsx)("input",{type:"text",value:(null===(t=q.address)||void 0===t?void 0:t.street)||"",onChange:e=>_("address.street",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter street address"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,a.jsx)("input",{type:"text",value:(null===(r=q.address)||void 0===r?void 0:r.city)||"",onChange:e=>_("address.city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter city"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),(0,a.jsx)("input",{type:"text",value:(null===(h=q.address)||void 0===h?void 0:h.state)||"",onChange:e=>_("address.state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter state"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),(0,a.jsx)("input",{type:"text",value:(null===(g=q.address)||void 0===g?void 0:g.zipCode)||"",onChange:e=>_("address.zipCode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter ZIP code"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Emergency Contact"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Name"}),(0,a.jsx)("input",{type:"text",value:(null===(p=q.emergencyContact)||void 0===p?void 0:p.name)||"",onChange:e=>_("emergencyContact.name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),(0,a.jsx)("input",{type:"text",value:(null===(b=q.emergencyContact)||void 0===b?void 0:b.relationship)||"",onChange:e=>_("emergencyContact.relationship",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Spouse, Parent, Friend"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),(0,a.jsx)("input",{type:"tel",value:(null===(x=q.emergencyContact)||void 0===x?void 0:x.phone)||"",onChange:e=>_("emergencyContact.phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact phone"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),(0,a.jsx)("input",{type:"email",value:(null===(f=q.emergencyContact)||void 0===f?void 0:f.email)||"",onChange:e=>_("emergencyContact.email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact email"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Spiritual Journey"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salvation Date"}),(0,a.jsx)("input",{type:"date",value:(null===(y=q.spiritualJourney)||void 0===y?void 0:y.salvationDate)?q.spiritualJourney.salvationDate.toISOString().split("T")[0]:"",onChange:e=>_("spiritualJourney.salvationDate",e.target.value?new Date(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Baptism Date"}),(0,a.jsx)("input",{type:"date",value:(null===(v=q.spiritualJourney)||void 0===v?void 0:v.baptismDate)?q.spiritualJourney.baptismDate.toISOString().split("T")[0]:"",onChange:e=>_("spiritualJourney.baptismDate",e.target.value?new Date(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Spiritual Stage"}),(0,a.jsxs)("select",{value:(null===(j=q.spiritualJourney)||void 0===j?void 0:j.currentStage)||"",onChange:e=>_("spiritualJourney.currentStage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select stage"}),(0,a.jsx)("option",{value:"seeker",children:"Seeker"}),(0,a.jsx)("option",{value:"new-believer",children:"New Believer"}),(0,a.jsx)("option",{value:"growing",children:"Growing in Faith"}),(0,a.jsx)("option",{value:"mature",children:"Mature Believer"}),(0,a.jsx)("option",{value:"leader",children:"Spiritual Leader"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Preferences"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Communication Method"}),(0,a.jsxs)("select",{value:(null===(N=q.preferences)||void 0===N?void 0:N.communicationMethod)||"email",onChange:e=>_("preferences.communicationMethod",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"email",children:"Email"}),(0,a.jsx)("option",{value:"phone",children:"Phone"}),(0,a.jsx)("option",{value:"text",children:"Text Message"}),(0,a.jsx)("option",{value:"app",children:"App Notifications"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privacy Level"}),(0,a.jsxs)("select",{value:(null===(w=q.preferences)||void 0===w?void 0:w.privacyLevel)||"members",onChange:e=>_("preferences.privacyLevel",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"public",children:"Public"}),(0,a.jsx)("option",{value:"members",children:"Members Only"}),(0,a.jsx)("option",{value:"leaders",children:"Leaders Only"}),(0,a.jsx)("option",{value:"private",children:"Private"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(k=q.preferences)||void 0===k?void 0:k.newsletter)||!1,onChange:e=>_("preferences.newsletter",e.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Receive newsletter"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(S=q.preferences)||void 0===S?void 0:S.eventNotifications)||!1,onChange:e=>_("preferences.eventNotifications",e.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Receive event notifications"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,a.jsx)("textarea",{value:q.notes||"",onChange:e=>_("notes",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes about this member..."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:K,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:M||!V(),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),C?"Update Member":"Create Member"]})})]})})]})]})}},2850:function(e,t,r){r.d(t,{H:function(){return n}});let a="https://faithlink360-api.onrender.com";class s{async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=localStorage.getItem("auth_token"),a=e.startsWith("http")?e:"http://localhost:8000".concat(e),s=0;for(;s<=this.MAX_RETRIES;)try{let e=await fetch(a,{...t,headers:{"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...t.headers}});if(!e.ok){if(401===e.status){localStorage.removeItem("auth_token"),window.location.href="/login";return}let t=await e.json().catch(()=>({message:e.statusText}));throw Error(t.message||"HTTP ".concat(e.status,": ").concat(e.statusText))}return e.json()}catch(e){if(s<this.MAX_RETRIES&&e.message.includes("fetch")){s++,await new Promise(e=>setTimeout(e,1e3*s));continue}throw e}}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e,"-").concat(JSON.stringify(t.body||{}))}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getMembers(e){let t=new URLSearchParams;if(e){var r,a,s;e.query&&t.append("query",e.query),(null===(r=e.tags)||void 0===r?void 0:r.length)&&t.append("tags",e.tags.join(",")),(null===(a=e.membershipStatus)||void 0===a?void 0:a.length)&&t.append("status",e.membershipStatus.join(",")),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.ageRange&&(e.ageRange.min&&t.append("ageMin",e.ageRange.min.toString()),e.ageRange.max&&t.append("ageMax",e.ageRange.max.toString())),e.joinDateRange&&(e.joinDateRange.start&&t.append("joinStart",e.joinDateRange.start.toISOString()),e.joinDateRange.end&&t.append("joinEnd",e.joinDateRange.end.toISOString())),(null===(s=e.groups)||void 0===s?void 0:s.length)&&t.append("groups",e.groups.join(","))}let n="/api/members".concat(t.toString()?"?".concat(t.toString()):""),l=this.getCacheKey(n);if(this.isValidCache(l))return this.requestCache.get(l).data;if(this.pendingRequests.has(l))return this.pendingRequests.get(l);let i=this.fetchWithAuth(n).then(e=>(this.requestCache.set(l,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(l),e)).catch(e=>{throw this.pendingRequests.delete(l),e});return this.pendingRequests.set(l,i),i}async getMember(e){return this.fetchWithAuth("/api/members/".concat(e))}async createMember(e){return this.fetchWithAuth("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e){return this.fetchWithAuth("/api/members/".concat(e.id),{method:"PUT",body:JSON.stringify(e)})}async deleteMember(e){await this.fetchWithAuth("/api/members/".concat(e),{method:"DELETE"})}async getMemberStats(){return this.fetchWithAuth("/api/members/stats")}async getTags(){return this.fetchWithAuth("/api/members/tags")}async createTag(e){return this.fetchWithAuth("/api/members/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.fetchWithAuth("/api/members/tags/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){await this.fetchWithAuth("/api/members/tags/".concat(e),{method:"DELETE"})}async uploadProfilePhoto(e,t){let r=localStorage.getItem("auth_token"),s=new FormData;s.append("photo",t);let n=await fetch("".concat(a,"/api/members/").concat(e,"/photo"),{method:"POST",headers:{...r&&{Authorization:"Bearer ".concat(r)}},body:s});if(!n.ok)throw Error((await n.json().catch(()=>({message:n.statusText}))).message||"HTTP ".concat(n.status,": ").concat(n.statusText));return n.json()}async getSearchSuggestions(e){return this.fetchWithAuth("/api/members/search/suggestions?q=".concat(encodeURIComponent(e)))}async exportMembers(e){let t=new URLSearchParams;if(e){var r,s;e.query&&t.append("query",e.query),(null===(r=e.tags)||void 0===r?void 0:r.length)&&t.append("tags",e.tags.join(",")),(null===(s=e.membershipStatus)||void 0===s?void 0:s.length)&&t.append("status",e.membershipStatus.join(","))}let n=localStorage.getItem("auth_token"),l=await fetch("".concat(a,"/api/members/export").concat(t.toString()?"?".concat(t.toString()):""),{headers:{...n&&{Authorization:"Bearer ".concat(n)}}});if(!l.ok)throw Error("Export failed: ".concat(l.statusText));return l.blob()}async bulkUpdateMembers(e,t){return this.fetchWithAuth("/api/members/bulk",{method:"PUT",body:JSON.stringify({memberIds:e,updates:t})})}async bulkDeleteMembers(e){return this.fetchWithAuth("/api/members/bulk",{method:"DELETE",body:JSON.stringify({memberIds:e})})}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let n=new s}}]);