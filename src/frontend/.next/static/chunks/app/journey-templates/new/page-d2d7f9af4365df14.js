(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1514],{1651:function(e,t,r){Promise.resolve().then(r.bind(r,8522))},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:m,...y}=r;return(0,n.createElement)("svg",{ref:i,...a,width:o,height:o,stroke:l,strokeWidth:u?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(s(e)),d].join(" "),...y},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},6221:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1769:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},875:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8997:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9637:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8293:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3417:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3229:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8728:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8896:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7806:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},8522:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(7437),a=r(2265),s=r(3002),i=r(8742),l=r(9376),o=r(3249),c=r(2315),u=r(1769),d=r(8896),m=r(9397),y=r(9763);let p=(0,y.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var h=r(1723);let x=(0,y.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var f=r(875),b=r(8930),g=r(3229);function v(e){let{template:t,onSave:r,onCancel:s}=e,{user:i}=(0,o.a)(),y=(0,l.useRouter)(),[v,j]=(0,a.useState)(!1),[k,w]=(0,a.useState)(null),[N,_]=(0,a.useState)({name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",category:(null==t?void 0:t.category)||"discipleship",difficulty:(null==t?void 0:t.difficulty)||"beginner",estimatedDuration:(null==t?void 0:t.estimatedDuration)||30,isPublic:(null==t?void 0:t.isPublic)||!1,tags:(null==t?void 0:t.tags)||[],prerequisites:(null==t?void 0:t.prerequisites)||[],targetAudience:(null==t?void 0:t.targetAudience)||[]}),[M,T]=(0,a.useState)((null==t?void 0:t.milestones.map(e=>({title:e.title,description:e.description,order:e.order,type:e.type,content:e.content,requirements:e.requirements,estimatedDays:e.estimatedDays,isRequired:e.isRequired,resources:e.resources})))||[{title:"",description:"",order:1,type:"reading",estimatedDays:7,isRequired:!0,resources:[]}]),[Z,S]=(0,a.useState)(""),[C,q]=(0,a.useState)(0),E=(e,t)=>{_(r=>({...r,[e]:t}))},P=(e,t)=>{_(r=>({...r,[e]:t}))},J=()=>{Z.trim()&&!N.tags.includes(Z.trim())&&(P("tags",[...N.tags,Z.trim()]),S(""))},D=e=>{P("tags",N.tags.filter(t=>t!==e))},O=(e,t,r)=>{T(n=>n.map((n,a)=>a===e?{...n,[t]:r}:n))},A=e=>{M.length>1&&(T(t=>t.filter((t,r)=>r!==e)),C>=M.length-1&&q(Math.max(0,C-1)))},z=(e,t)=>{if("up"===t&&e>0){let t=[...M];[t[e-1],t[e]]=[t[e],t[e-1]],t.forEach((e,t)=>{e.order=t+1}),T(t),q(e-1)}else if("down"===t&&e<M.length-1){let t=[...M];[t[e],t[e+1]]=[t[e+1],t[e]],t.forEach((e,t)=>{e.order=t+1}),T(t),q(e+1)}},R=async e=>{if(e.preventDefault(),!N.name.trim()){w("Template name is required");return}if(0===M.length){w("At least one milestone is required");return}if(M.filter(e=>!e.title.trim()).length>0){w("All milestones must have a title");return}j(!0),w(null);try{let e;let n={...N,title:N.name.trim(),description:N.description.trim()||"",milestones:M.map((e,t)=>({...e,order:t+1,title:e.title.trim(),description:e.description.trim()}))};e=t?await c.u.updateJourneyTemplate({id:t.id,...n}):await c.u.createJourneyTemplate(n),r?r(e):y.push("/journey-templates/".concat(e.id))}catch(e){w(e instanceof Error?e.message:"Failed to save journey template")}finally{j(!1)}},H=[{value:"reading",label:"Reading"},{value:"reflection",label:"Reflection"},{value:"action",label:"Action"},{value:"meeting",label:"Meeting"},{value:"service",label:"Service"},{value:"study",label:"Study"},{value:"prayer",label:"Prayer"},{value:"assessment",label:"Assessment"},{value:"event_attendance",label:"Event Attendance"},{value:"mentor_meeting",label:"Mentor Meeting"},{value:"custom",label:"Custom"}];return(0,n.jsxs)("form",{onSubmit:R,className:"space-y-8",children:[k&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,n.jsx)("div",{className:"text-sm text-red-700",children:k})}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 mb-6 flex items-center",children:[(0,n.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Template Name *"}),(0,n.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.name,onChange:e=>E("name",e.target.value),placeholder:"Enter template name"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),(0,n.jsx)("textarea",{rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.description,onChange:e=>E("description",e.target.value),placeholder:"Describe the purpose and goals of this spiritual journey"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Category *"}),(0,n.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.category,onChange:e=>E("category",e.target.value),children:[(0,n.jsx)("option",{value:"new_believer",children:"New Believer"}),(0,n.jsx)("option",{value:"baptism_preparation",children:"Baptism Preparation"}),(0,n.jsx)("option",{value:"discipleship",children:"Discipleship"}),(0,n.jsx)("option",{value:"leadership_development",children:"Leadership Development"}),(0,n.jsx)("option",{value:"bible_study",children:"Bible Study"}),(0,n.jsx)("option",{value:"prayer_life",children:"Prayer Life"}),(0,n.jsx)("option",{value:"service_ministry",children:"Service & Ministry"}),(0,n.jsx)("option",{value:"evangelism",children:"Evangelism"}),(0,n.jsx)("option",{value:"spiritual_disciplines",children:"Spiritual Disciplines"}),(0,n.jsx)("option",{value:"life_skills",children:"Life Skills"}),(0,n.jsx)("option",{value:"marriage_family",children:"Marriage & Family"}),(0,n.jsx)("option",{value:"youth_development",children:"Youth Development"}),(0,n.jsx)("option",{value:"senior_ministry",children:"Senior Ministry"}),(0,n.jsx)("option",{value:"healing_recovery",children:"Healing & Recovery"}),(0,n.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Difficulty Level *"}),(0,n.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.difficulty,onChange:e=>E("difficulty",e.target.value),children:[(0,n.jsx)("option",{value:"beginner",children:"Beginner"}),(0,n.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,n.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Estimated Duration (days)"}),(0,n.jsx)("input",{type:"number",min:"1",max:"365",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.estimatedDuration,onChange:e=>E("estimatedDuration",parseInt(e.target.value))})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("input",{type:"checkbox",id:"isPublic",className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500",checked:N.isPublic,onChange:e=>E("isPublic",e.target.checked)}),(0,n.jsx)("label",{htmlFor:"isPublic",className:"text-sm font-medium text-neutral-700",children:"Make this template public"})]})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Tags"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:N.tags.map(e=>(0,n.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:[e,(0,n.jsx)("button",{type:"button",className:"ml-1 text-primary-600 hover:text-primary-800",onClick:()=>D(e),children:"\xd7"})]},e))}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:Z,onChange:e=>S(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),J())}}),(0,n.jsx)("button",{type:"button",onClick:J,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:"Add"})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[(0,n.jsx)(d.Z,{className:"w-5 h-5 mr-2"}),"Journey Milestones (",M.length,")"]}),(0,n.jsxs)("button",{type:"button",onClick:()=>{let e=Math.max(...M.map(e=>e.order),0)+1;T(t=>[...t,{title:"",description:"",order:e,type:"reading",estimatedDays:7,isRequired:!0,resources:[]}]),q(M.length)},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Add Milestone"]})]}),(0,n.jsx)("div",{className:"space-y-4",children:M.map((e,t)=>{var r;return(0,n.jsxs)("div",{className:"border border-neutral-200 rounded-lg",children:[(0,n.jsx)("div",{className:"p-4 cursor-pointer hover:bg-neutral-50",onClick:()=>q(C===t?-1:t),children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(p,{className:"w-4 h-4 text-neutral-400"}),(0,n.jsxs)("span",{className:"text-sm font-medium text-neutral-900",children:[t+1,". ",e.title||"Untitled Milestone"]})]}),(0,n.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-blue-100 text-blue-800",children:null===(r=H.find(t=>t.value===e.type))||void 0===r?void 0:r.label}),(0,n.jsxs)("div",{className:"flex items-center text-xs text-neutral-500",children:[(0,n.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),e.estimatedDays," days"]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),z(t,"up")},disabled:0===t,className:"p-1 text-neutral-400 hover:text-neutral-600 disabled:opacity-50",children:(0,n.jsx)(x,{className:"w-4 h-4"})}),(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),z(t,"down")},disabled:t===M.length-1,className:"p-1 text-neutral-400 hover:text-neutral-600 disabled:opacity-50",children:(0,n.jsx)(f.Z,{className:"w-4 h-4"})}),(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),A(t)},disabled:1===M.length,className:"p-1 text-red-400 hover:text-red-600 disabled:opacity-50",children:(0,n.jsx)(b.Z,{className:"w-4 h-4"})})]})]})}),C===t&&(0,n.jsx)("div",{className:"px-4 pb-4 border-t border-neutral-200",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Milestone Title *"}),(0,n.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.title,onChange:e=>O(t,"title",e.target.value),placeholder:"Enter milestone title"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),(0,n.jsx)("textarea",{rows:2,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.description,onChange:e=>O(t,"description",e.target.value),placeholder:"Describe what the member should accomplish"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Milestone Type"}),(0,n.jsx)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.type,onChange:e=>O(t,"type",e.target.value),children:H.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Estimated Days"}),(0,n.jsx)("input",{type:"number",min:"1",max:"30",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:e.estimatedDays,onChange:e=>O(t,"estimatedDays",parseInt(e.target.value))})]}),(0,n.jsx)("div",{className:"md:col-span-2",children:(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",className:"rounded border-neutral-300 text-primary-600 focus:ring-primary-500",checked:e.isRequired,onChange:e=>O(t,"isRequired",e.target.checked)}),(0,n.jsx)("span",{className:"text-sm font-medium text-neutral-700",children:"This milestone is required"})]})})]})})]},t)})})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{s?s():y.back()},className:"px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,n.jsxs)("button",{type:"submit",disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[v?(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,n.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),t?"Update Template":"Create Template"]})]})]})}function j(){return(0,n.jsx)(s.Z,{requiredRole:"pastor",children:(0,n.jsx)(i.Z,{children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:"Create Journey Template"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:"Design a spiritual growth pathway with milestones and resources"})]}),(0,n.jsx)(v,{})]})})})}},2315:function(e,t,r){"use strict";r.d(t,{u:function(){return l}});let n="https://faithlink360-api.onrender.com",a=new Map,s=new Map;class i{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4,i="".concat(n).concat(e),l=localStorage.getItem("auth_token"),o={"Content-Type":"application/json",...l&&{Authorization:"Bearer ".concat(l)}},c={...t,headers:{...o,...t.headers}};if(r&&"GET"===t.method){let e=a.get(r);if(e&&Date.now()-e.timestamp<e.ttl)return console.log("Cache hit for ".concat(r)),e.data}let u=Error("Request failed");for(let e=1;e<=3;e++)try{let n=await fetch(i,c);if(!n.ok){if(429===n.status){await new Promise(t=>setTimeout(t,1e3*e));continue}throw Error("HTTP ".concat(n.status,": ").concat(n.statusText))}let l=await n.json();return r&&"GET"===t.method&&a.set(r,{data:l,timestamp:Date.now(),ttl:s}),l}catch(t){if(u=t instanceof Error?t:Error("Unknown error"),3===e)break;await new Promise(t=>setTimeout(t,1e3*e))}throw u}async getJourneyTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,n]=e;null!=n&&""!==n&&(Array.isArray(n)?n.forEach(e=>t.append(r,String(e))):t.append(r,String(n)))});let r="journey_templates_".concat(t.toString());return this.request("/api/journey-templates?".concat(t.toString()),{method:"GET"},r)}async getJourneyTemplate(e){return this.request("/api/journey-templates/".concat(e),{method:"GET"},"journey_template_".concat(e))}async createJourneyTemplate(e){let t=await this.request("/api/journey-templates",{method:"POST",body:JSON.stringify(e)});return this.invalidateTemplateCache(),t}async updateJourneyTemplate(e){let t=await this.request("/api/journey-templates/".concat(e.id),{method:"PUT",body:JSON.stringify(e)});return a.delete("journey_template_".concat(e.id)),this.invalidateTemplateCache(),t}async deleteJourneyTemplate(e){await this.request("/api/journey-templates/".concat(e),{method:"DELETE"}),a.delete("journey_template_".concat(e)),this.invalidateTemplateCache()}async duplicateJourneyTemplate(e,t){let r=await this.request("/api/journey-templates/".concat(e,"/duplicate"),{method:"POST",body:JSON.stringify({name:t})});return this.invalidateTemplateCache(),r}async getMemberJourneys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,n]=e;null!=n&&""!==n&&t.append(r,String(n))});let r="member_journeys_".concat(t.toString());return this.request("/journeys/member-journeys?".concat(t.toString()),{method:"GET"},r)}async getMemberJourney(e){return this.request("/journeys/member-journeys/".concat(e),{method:"GET"},"member_journey_".concat(e))}async assignJourneyToMember(e){let t=await this.request("/journeys/member-journeys",{method:"POST",body:JSON.stringify(e)});return this.invalidateMemberJourneyCache(),t}async updateMemberJourney(e){let t=await this.request("/journeys/member-journeys/".concat(e.id),{method:"PUT",body:JSON.stringify(e)});return a.delete("member_journey_".concat(e.id)),this.invalidateMemberJourneyCache(),t}async deleteMemberJourney(e){await this.request("/journeys/member-journeys/".concat(e),{method:"DELETE"}),a.delete("member_journey_".concat(e)),this.invalidateMemberJourneyCache()}async getMilestoneProgress(e,t){let r="milestone_progress_".concat(e,"_").concat(t);return this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/progress"),{method:"GET"},r)}async startMilestone(e,t){let r=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/start"),{method:"POST"});return a.delete("member_journey_".concat(e)),a.delete("milestone_progress_".concat(e,"_").concat(t)),r}async completeMilestone(e,t,r){let n=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/complete"),{method:"POST",body:JSON.stringify({notes:r})});return a.delete("member_journey_".concat(e)),a.delete("milestone_progress_".concat(e,"_").concat(t)),n}async submitMilestone(e){let t=new FormData;t.append("type",e.type),t.append("content",e.content),e.attachments&&e.attachments.forEach((e,r)=>{t.append("attachment_".concat(r),e)});let r=localStorage.getItem("auth_token"),a=await fetch("".concat(n,"/api/journeys/milestone-progress/").concat(e.milestoneProgressId,"/submit"),{method:"POST",headers:{...r&&{Authorization:"Bearer ".concat(r)}},body:t});if(!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let s=await a.json();return this.invalidateMemberJourneyCache(),s}async approveMilestone(e,t,r){let n=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/approve"),{method:"POST",body:JSON.stringify({feedback:r})});return a.delete("member_journey_".concat(e)),a.delete("milestone_progress_".concat(e,"_").concat(t)),n}async requestMilestoneRevision(e,t,r){let n=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/request-revision"),{method:"POST",body:JSON.stringify({feedback:r})});return a.delete("member_journey_".concat(e)),a.delete("milestone_progress_".concat(e,"_").concat(t)),n}async getJourneyStats(){return this.request("/journeys/stats",{method:"GET"},"journey_stats",6e4)}async getMemberJourneyStats(e){return this.request("/journeys/members/".concat(e,"/stats"),{method:"GET"},"member_journey_stats_".concat(e),6e4)}async bulkAssignJourney(e,t,r){let n=await this.request("/journeys/bulk-assign",{method:"POST",body:JSON.stringify({memberIds:e,templateId:t,mentorId:r})});return this.invalidateMemberJourneyCache(),n}async bulkUpdateJourneyStatus(e,t){await this.request("/journeys/bulk-status",{method:"POST",body:JSON.stringify({journeyIds:e,status:t})}),this.invalidateMemberJourneyCache()}async exportJourneyTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",r=await fetch("".concat(n,"/api/journey-templates/").concat(e,"/export?format=").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}});if(!r.ok)throw Error("Export failed: ".concat(r.statusText));return r.blob()}async exportMemberJourneyProgress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf",r=await fetch("".concat(n,"/journeys/member-journeys/").concat(e,"/export?format=").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}});if(!r.ok)throw Error("Export failed: ".concat(r.statusText));return r.blob()}invalidateTemplateCache(){for(let[e]of a)e.includes("journey_template")&&a.delete(e)}invalidateMemberJourneyCache(){for(let[e]of a)(e.includes("member_journey")||e.includes("milestone_progress"))&&a.delete(e)}clearCache(){a.clear(),s.clear()}}let l=new i}},function(e){e.O(0,[7648,4429,2971,2117,1744],function(){return e(e.s=1651)}),_N_E=e.O()}]);