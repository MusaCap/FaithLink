(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{2928:function(e,t,s){Promise.resolve().then(s.bind(s,6410))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{color:c="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:m="",children:x,...h}=s;return(0,a.createElement)("svg",{ref:l,...r,width:i,height:i,stroke:c,strokeWidth:o?24*Number(d)/Number(i):d,className:["lucide","lucide-".concat(n(e)),m].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(x)?x:[x]])});return s.displayName="".concat(e),s}},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6221:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1769:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8997:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3417:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},2431:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6410:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var a=s(7437),r=s(2265),n=s(6221),l=s(2431),c=s(9763);let i=(0,c.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var d=s(1047),o=s(525),m=s(5805),x=s(2735);let h=(0,c.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var g=e=>{let{dateRange:t}=e,[s,n]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[i,g]=(0,r.useState)(!0),[u,p]=(0,r.useState)("all"),[y,j]=(0,r.useState)("chart");(0,r.useEffect)(()=>{b()},[t,u]);let b=async()=>{try{let e=await fetch("/api/reports/attendance?range=".concat(t,"&service=").concat(u));if(e.ok){let t=await e.json();n(t.attendance||[]),c(t.trends||[])}}catch(e){console.error("Failed to fetch attendance data:",e)}finally{g(!1)}},v=s.length>0?s:[{date:"2025-01-05",service:"Sunday Morning",expected:280,actual:245,percentage:87.5},{date:"2025-01-05",service:"Sunday Evening",expected:150,actual:128,percentage:85.3},{date:"2025-01-12",service:"Sunday Morning",expected:280,actual:268,percentage:95.7},{date:"2025-01-12",service:"Sunday Evening",expected:150,actual:142,percentage:94.7},{date:"2025-01-19",service:"Sunday Morning",expected:280,actual:251,percentage:89.6},{date:"2025-01-19",service:"Sunday Evening",expected:150,actual:135,percentage:90},{date:"2025-01-26",service:"Sunday Morning",expected:280,actual:275,percentage:98.2},{date:"2025-01-26",service:"Sunday Evening",expected:150,actual:148,percentage:98.7}],f=l.length>0?l:[{period:"This Month",average:92.1,change:5.3,trend:"up"},{period:"Last Month",average:86.8,change:-2.1,trend:"down"},{period:"Last Quarter",average:88.9,change:1.2,trend:"up"},{period:"Year to Date",average:87.4,change:3.8,trend:"up"}],N="all"===u?v:v.filter(e=>e.service===u),w=["all",...Array.from(new Set(v.map(e=>e.service)))],S=N.reduce((e,t)=>e+t.percentage,0)/N.length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("select",{value:u,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:w.map(e=>(0,a.jsx)("option",{value:e,children:"all"===e?"All Services":e},e))}),(0,a.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"chart",children:"Chart View"}),(0,a.jsx)("option",{value:"table",children:"Table View"})]})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Date,Service,Expected,Actual,Percentage",...N.map(e=>[e.date,e.service,e.expected.toString(),e.actual.toString(),e.percentage.toString()].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="attendance-analytics-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export Data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Average Attendance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[S.toFixed(1),"%"]})]}),(0,a.jsx)(d.Z,{className:"w-8 h-8 text-blue-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Services"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.length})]}),(0,a.jsx)(m.Z,{className:"w-8 h-8 text-green-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Highest Attendance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.max(...N.map(e=>e.percentage)).toFixed(1),"%"]})]}),(0,a.jsx)(o.Z,{className:"w-8 h-8 text-green-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Lowest Attendance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.min(...N.map(e=>e.percentage)).toFixed(1),"%"]})]}),(0,a.jsx)(h,{className:"w-8 h-8 text-red-500"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attendance Trends"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.period}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ".concat("up"===e.trend?"text-green-600":"down"===e.trend?"text-red-600":"text-gray-600"),children:["up"===e.trend?(0,a.jsx)(o.Z,{className:"w-4 h-4"}):"down"===e.trend?(0,a.jsx)(h,{className:"w-4 h-4"}):(0,a.jsx)("div",{className:"w-4 h-1 bg-gray-400 rounded"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[e.change>0?"+":"",e.change,"%"]})]})]}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[e.average,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Average attendance"})]},t))})]}),"chart"===y?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attendance Chart"}),(0,a.jsx)("div",{className:"h-64 flex items-end justify-center space-x-2",children:N.slice(-8).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)("div",{className:"bg-blue-500 rounded-t hover:bg-blue-600 transition-colors cursor-pointer",style:{height:"".concat(e.percentage/100*200,"px"),width:"40px"},title:"".concat(e.service," - ").concat(e.percentage,"%")}),(0,a.jsx)("span",{className:"text-xs text-gray-600 transform rotate-45 origin-left",children:new Date(e.date).toLocaleDateString()})]},t))}),(0,a.jsx)("div",{className:"mt-4 flex items-center justify-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Attendance Percentage"})]})})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Attendance Data"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actual"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.service}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.expected}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.actual}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(e.percentage>=90?"text-green-600":e.percentage>=75?"text-yellow-600":"text-red-600"),children:[e.percentage,"%"]}),(0,a.jsx)("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(e.percentage>=90?"bg-green-500":e.percentage>=75?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.percentage,"%")}})})]})})]},t))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Insights"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Best Performing Periods"}),(0,a.jsx)("div",{className:"space-y-2",children:N.sort((e,t)=>t.percentage-e.percentage).slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[new Date(e.date).toLocaleDateString()," - ",e.service]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:[e.percentage,"%"]})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Areas for Improvement"}),(0,a.jsx)("div",{className:"space-y-2",children:N.sort((e,t)=>e.percentage-t.percentage).slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[new Date(e.date).toLocaleDateString()," - ",e.service]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-red-600",children:[e.percentage,"%"]})]},t))})]})]})]})]})},u=s(8997),p=s(3417),y=s(1769),j=e=>{var t,s,n;let{dateRange:l}=e,[c,i]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[b,v]=(0,r.useState)(!0),[f,N]=(0,r.useState)("all"),[w,S]=(0,r.useState)("overallScore");(0,r.useEffect)(()=>{k()},[l]);let k=async()=>{try{let e=await fetch("/api/reports/engagement?range=".concat(l));if(e.ok){let t=await e.json();i(t.metrics||[]),h(t.activities||[]),j(t.categories||[])}}catch(e){console.error("Failed to fetch engagement data:",e)}finally{v(!1)}},R=c.length>0?c:[{metric:"Overall Engagement Score",value:78,change:5.2,trend:"up",description:"Average engagement across all metrics"},{metric:"Active Participants",value:156,change:8.1,trend:"up",description:"Members with 70%+ engagement score"},{metric:"Journey Completion Rate",value:67,change:-2.3,trend:"down",description:"Members completing assigned journeys"},{metric:"Group Participation",value:84,change:3.7,trend:"up",description:"Members actively involved in groups"},{metric:"Prayer Request Activity",value:42,change:12.5,trend:"up",description:"Members submitting/updating prayer requests"},{metric:"Event Attendance Rate",value:73,change:-1.8,trend:"down",description:"Average attendance at church events"}],Z=d.length>0?d:[{memberId:"1",memberName:"Sarah Johnson",attendanceScore:95,participationScore:88,journeyProgress:92,prayerRequests:3,groupInvolvement:90,overallScore:91,status:"highly-engaged"},{memberId:"2",memberName:"Michael Chen",attendanceScore:82,participationScore:75,journeyProgress:78,prayerRequests:1,groupInvolvement:85,overallScore:80,status:"highly-engaged"},{memberId:"3",memberName:"Emily Rodriguez",attendanceScore:70,participationScore:65,journeyProgress:58,prayerRequests:2,groupInvolvement:72,overallScore:67,status:"moderately-engaged"},{memberId:"4",memberName:"Robert Wilson",attendanceScore:45,participationScore:38,journeyProgress:25,prayerRequests:0,groupInvolvement:40,overallScore:38,status:"low-engagement"},{memberId:"5",memberName:"Maria Santos",attendanceScore:25,participationScore:20,journeyProgress:15,prayerRequests:0,groupInvolvement:22,overallScore:21,status:"at-risk"}],M=g.length>0?g:[{category:"Highly Engaged",members:89,percentage:36,color:"bg-green-500"},{category:"Moderately Engaged",members:94,percentage:38,color:"bg-blue-500"},{category:"Low Engagement",members:48,percentage:19,color:"bg-yellow-500"},{category:"At Risk",members:17,percentage:7,color:"bg-red-500"}],C=[..."all"===f?Z:Z.filter(e=>({"highly-engaged":"Highly Engaged","moderately-engaged":"Moderately Engaged","low-engagement":"Low Engagement","at-risk":"At Risk"})[e.status]===f)].sort((e,t)=>"memberName"===w?e.memberName.localeCompare(t.memberName):t[w]-e[w]),A=e=>{switch(e){case"highly-engaged":return"bg-green-100 text-green-800";case"moderately-engaged":return"bg-blue-100 text-blue-800";case"low-engagement":return"bg-yellow-100 text-yellow-800";case"at-risk":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=e=>{switch(e){case"highly-engaged":return"Highly Engaged";case"moderately-engaged":return"Moderately Engaged";case"low-engagement":return"Low Engagement";case"at-risk":return"At Risk";default:return"Unknown"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Engagement Levels"}),M.map(e=>(0,a.jsx)("option",{value:e.category,children:e.category},e.category))]}),(0,a.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"overallScore",children:"Overall Score"}),(0,a.jsx)("option",{value:"attendanceScore",children:"Attendance Score"}),(0,a.jsx)("option",{value:"participationScore",children:"Participation Score"}),(0,a.jsx)("option",{value:"journeyProgress",children:"Journey Progress"}),(0,a.jsx)("option",{value:"memberName",children:"Member Name"})]})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Member Name,Attendance Score,Participation Score,Journey Progress,Prayer Requests,Group Involvement,Overall Score,Status",...C.map(e=>[e.memberName,e.attendanceScore.toString(),e.participationScore.toString(),e.journeyProgress.toString(),e.prayerRequests.toString(),e.groupInvolvement.toString(),e.overallScore.toString(),E(e.status)].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="member-engagement-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export Data"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:e.metric}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ".concat("up"===e.trend?"text-green-600":"down"===e.trend?"text-red-600":"text-gray-600"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 ".concat("down"===e.trend?"rotate-180":"")}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[e.change>0?"+":"",e.change,"%"]})]})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.metric.includes("Rate")||e.metric.includes("Score")?"".concat(e.value,"%"):e.value}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},t))}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Member Engagement Distribution"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:M.map((e,t)=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("div",{className:"mx-auto w-16 h-16 ".concat(e.color," rounded-full flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:e.members})})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.category}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.percentage,"% of members"]}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"".concat(e.color," h-2 rounded-full"),style:{width:"".concat(e.percentage,"%")}})})]},t))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Member Engagement Details"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",C.length," members","all"!==f&&" in ".concat(f," category")]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participation"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Journey Progress"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prayer Requests"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group Involvement"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overall Score"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-4 h-4 text-gray-600"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.memberName})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-900",children:[e.attendanceScore,"%"]}),(0,a.jsx)("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.attendanceScore,"%")}})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-900",children:[e.participationScore,"%"]}),(0,a.jsx)("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(e.participationScore,"%")}})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-900",children:[e.journeyProgress,"%"]}),(0,a.jsx)("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(e.journeyProgress,"%")}})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:e.prayerRequests})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-900",children:[e.groupInvolvement,"%"]}),(0,a.jsx)("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"".concat(e.groupInvolvement,"%")}})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm font-bold text-gray-900",children:[e.overallScore,"%"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(A(e.status)),children:E(e.status)})})]},t))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Engagement Insights"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"High Engagement"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(null===(t=M[0])||void 0===t?void 0:t.members)||89," members are highly engaged with consistent participation"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(p.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Needs Attention"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[((null===(s=M[2])||void 0===s?void 0:s.members)||48)+((null===(n=M[3])||void 0===n?void 0:n.members)||17)," members need increased engagement"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(y.Z,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Journey Focus"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Journey completion rate is at 67%, indicating room for improvement"})]})]})]})]})},b=s(5302),v=s(1723),f=s(3639),N=e=>{let{dateRange:t}=e,[s,n]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[g,u]=(0,r.useState)("all"),[p,y]=(0,r.useState)("healthScore");(0,r.useEffect)(()=>{j()},[t]);let j=async()=>{try{let e=await fetch("/api/reports/group-health?range=".concat(t));if(e.ok){let t=await e.json();n(t.groups||[]),c(t.metrics||[])}}catch(e){console.error("Failed to fetch group health data:",e)}finally{d(!1)}},N=s.length>0?s:[{id:"1",name:"Young Adults Ministry",leader:"Pastor David",memberCount:24,targetSize:25,attendanceRate:95,engagementScore:92,growthRate:15,lastMeeting:"2025-01-14T19:00:00Z",status:"thriving",healthScore:94,issues:[],strengths:["High attendance","Active participation","Growing membership"]},{id:"2",name:"Men's Fellowship",leader:"John Smith",memberCount:18,targetSize:20,attendanceRate:89,engagementScore:85,growthRate:8,lastMeeting:"2025-01-13T08:00:00Z",status:"healthy",healthScore:87,issues:["Need new members"],strengths:["Strong fellowship","Consistent meetings"]},{id:"3",name:"Ladies Bible Study",leader:"Sarah Johnson",memberCount:16,targetSize:18,attendanceRate:87,engagementScore:88,growthRate:5,lastMeeting:"2025-01-15T10:00:00Z",status:"healthy",healthScore:85,issues:[],strengths:["Deep Bible study","Prayer support"]},{id:"4",name:"Youth Group",leader:"Michael Chen",memberCount:14,targetSize:20,attendanceRate:71,engagementScore:68,growthRate:-2,lastMeeting:"2025-01-12T18:00:00Z",status:"needs-attention",healthScore:65,issues:["Low attendance","Need engaging activities","Member retention"],strengths:["Enthusiastic core group"]},{id:"5",name:"Senior Saints",leader:"Robert Wilson",memberCount:8,targetSize:15,attendanceRate:62,engagementScore:58,growthRate:-8,lastMeeting:"2025-01-10T14:00:00Z",status:"at-risk",healthScore:52,issues:["Declining attendance","Transportation issues","Health concerns","Need more activities"],strengths:["Strong relationships"]},{id:"6",name:"New Members Class",leader:"Pastor Smith",memberCount:12,targetSize:15,attendanceRate:74,engagementScore:78,growthRate:20,lastMeeting:"2025-01-14T11:00:00Z",status:"healthy",healthScore:76,issues:["Inconsistent attendance"],strengths:["New member integration","Growing group"]}],w=l.length>0?l:[{label:"Average Group Size",value:15.3,target:18,status:"warning",description:"Current average size vs target"},{label:"Overall Attendance Rate",value:79,target:85,status:"warning",description:"Average attendance across all groups"},{label:"Groups Meeting Regularly",value:95,target:100,status:"good",description:"Percentage of groups with regular meetings"},{label:"Leadership Health",value:88,target:90,status:"good",description:"Leader engagement and effectiveness"},{label:"Member Retention Rate",value:82,target:90,status:"warning",description:"Members staying in groups long-term"},{label:"New Member Integration",value:76,target:80,status:"warning",description:"Success rate of integrating new members"}],S=[..."all"===g?N:N.filter(e=>e.status===g)].sort((e,t)=>"name"===p?e.name.localeCompare(t.name):"leader"===p?e.leader.localeCompare(t.leader):t[p]-e[p]),k=e=>{switch(e){case"thriving":return"bg-green-100 text-green-800 border-green-200";case"healthy":return"bg-blue-100 text-blue-800 border-blue-200";case"needs-attention":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"at-risk":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},R=e=>{switch(e){case"thriving":return(0,a.jsx)(o.Z,{className:"w-4 h-4"});case"healthy":return(0,a.jsx)(b.Z,{className:"w-4 h-4"});case"needs-attention":return(0,a.jsx)(v.Z,{className:"w-4 h-4"});case"at-risk":return(0,a.jsx)(f.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(m.Z,{className:"w-4 h-4"})}},Z=e=>{switch(e){case"good":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"critical":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:g,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Groups"}),(0,a.jsx)("option",{value:"thriving",children:"Thriving"}),(0,a.jsx)("option",{value:"healthy",children:"Healthy"}),(0,a.jsx)("option",{value:"needs-attention",children:"Needs Attention"}),(0,a.jsx)("option",{value:"at-risk",children:"At Risk"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"healthScore",children:"Health Score"}),(0,a.jsx)("option",{value:"attendanceRate",children:"Attendance Rate"}),(0,a.jsx)("option",{value:"engagementScore",children:"Engagement Score"}),(0,a.jsx)("option",{value:"memberCount",children:"Member Count"}),(0,a.jsx)("option",{value:"growthRate",children:"Growth Rate"}),(0,a.jsx)("option",{value:"name",children:"Group Name"}),(0,a.jsx)("option",{value:"leader",children:"Leader Name"})]})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Group Name,Leader,Members,Target Size,Attendance Rate,Engagement Score,Growth Rate,Health Score,Status,Issues",...S.map(e=>[e.name,e.leader,e.memberCount.toString(),e.targetSize.toString(),e.attendanceRate.toString(),e.engagementScore.toString(),e.growthRate.toString(),e.healthScore.toString(),e.status,e.issues.join("; ")].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="group-health-report-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export Report"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-lg border p-4 ".concat(Z(e.status)),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("good"===e.status?"bg-green-500":"warning"===e.status?"bg-yellow-500":"bg-red-500")})]}),(0,a.jsxs)("div",{className:"flex items-baseline space-x-2 mb-1",children:[(0,a.jsx)("span",{className:"text-2xl font-bold",children:e.label.includes("Rate")||e.label.includes("Health")?"".concat(e.value,"%"):e.value}),(0,a.jsxs)("span",{className:"text-sm opacity-70",children:["/ ",e.label.includes("Rate")||e.label.includes("Health")?"".concat(e.target,"%"):e.target]})]}),(0,a.jsx)("p",{className:"text-xs opacity-80",children:e.description}),(0,a.jsx)("div",{className:"mt-2 w-full bg-white bg-opacity-50 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"h-1.5 rounded-full ".concat("good"===e.status?"bg-green-500":"warning"===e.status?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.min(e.value/e.target*100,100),"%")}})})]},t))}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:S.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Led by ",e.leader]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full border text-xs font-medium ".concat(k(e.status)),children:[R(e.status),(0,a.jsx)("span",{className:"capitalize",children:e.status.replace("-"," ")})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.memberCount}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Members (Target: ",e.targetSize,")"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.healthScore,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Health Score"})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Attendance"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.attendanceRate,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(e.attendanceRate>=85?"bg-green-500":e.attendanceRate>=70?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.attendanceRate,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Engagement"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.engagementScore,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(e.engagementScore>=85?"bg-green-500":e.engagementScore>=70?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.engagementScore,"%")}})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Growth Rate"}),(0,a.jsxs)("span",{className:"font-medium flex items-center space-x-1 ".concat(e.growthRate>0?"text-green-600":e.growthRate<0?"text-red-600":"text-gray-600"),children:[e.growthRate>0?(0,a.jsx)(o.Z,{className:"w-3 h-3"}):e.growthRate<0?(0,a.jsx)(h,{className:"w-3 h-3"}):null,(0,a.jsxs)("span",{children:[e.growthRate>0?"+":"",e.growthRate,"%"]})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.issues.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-700 mb-1",children:"Issues to Address"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.issues.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded",children:e},t))})]}),e.strengths.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-700 mb-1",children:"Strengths"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.strengths.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded",children:e},t))})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Last meeting: ",new Date(e.lastMeeting).toLocaleDateString()]})})]})},e.id))}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Group Health Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:N.filter(e=>"thriving"===e.status||"healthy"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Healthy Groups"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(v.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:N.filter(e=>"needs-attention"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Need Attention"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(f.Z,{className:"w-6 h-6 text-red-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:N.filter(e=>"at-risk"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"At Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:N.reduce((e,t)=>e+t.memberCount,0)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Members"})]})]})]})]})},w=s(5863);let S=(0,c.Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var k=s(8736);function R(e){let{reportType:t,filters:s={},dateRange:n,className:l=""}=e,[c,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!1),m=async e=>{i(!0),o(!1);try{var a;let r=new URLSearchParams({format:e,filters:JSON.stringify(s),...n&&{dateRange:n}}),l=await fetch("http://localhost:8000/api/reports/".concat(t,"/export?").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}});if(!l.ok)throw Error("Export failed: ".concat(l.statusText));let c=l.headers.get("Content-Disposition"),i=c?null===(a=c.split("filename=")[1])||void 0===a?void 0:a.replace(/"/g,""):"".concat(t,"-report-").concat(new Date().toISOString().split("T")[0],".").concat(e),d=await l.blob(),o=window.URL.createObjectURL(d),m=document.createElement("a");m.href=o,m.download=i,document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(o),document.body.removeChild(m),console.log("✅ ".concat(t," report exported successfully as ").concat(e.toUpperCase()))}catch(e){console.error("❌ Export failed:",e),alert("Failed to export report: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{i(!1)}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>o(!d),disabled:c,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ".concat(l),children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Export Report"]})}),d&&!c&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>m("csv"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[(0,a.jsx)(S,{className:"w-4 h-4 mr-2"}),"Export as CSV"]}),(0,a.jsxs)("button",{onClick:()=>m("json"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Export as JSON"]})]})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>o(!1)})]})}function Z(){let[e,t]=(0,r.useState)("overview"),[s,c]=(0,r.useState)(null),[h,u]=(0,r.useState)(!0),[p,y]=(0,r.useState)("last30days"),[b,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[p]);let f=async()=>{try{v(!0);let e=await fetch("http://localhost:8000/api/reports/dashboard-stats?range=".concat(p));if(e.ok){let t=await e.json();c(t.stats)}}catch(e){console.error("Failed to fetch reports data:",e)}finally{u(!1),v(!1)}},w=async e=>{try{let t=await fetch("http://localhost:8000/api/reports/export/".concat(e,"?range=").concat(p));if(t.ok){let s=await t.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="".concat(e,"-report-").concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}}catch(e){console.error("Failed to export report:",e)}},S=s||{totalMembers:248,activeGroups:18,avgAttendance:85,memberGrowth:12,attendanceGrowth:8,engagementScore:78};return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.Z,{className:"w-8 h-8 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Church performance insights and member engagement metrics"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"last7days",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"last30days",children:"Last 30 Days"}),(0,a.jsx)("option",{value:"last90days",children:"Last 90 Days"}),(0,a.jsx)("option",{value:"lastyear",children:"Last Year"}),(0,a.jsx)("option",{value:"ytd",children:"Year to Date"})]}),(0,a.jsxs)("button",{onClick:()=>{f()},disabled:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors disabled:opacity-50",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 ".concat(b?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]})]}),(0,a.jsx)("div",{className:"mt-6 border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>t("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("overview"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(i,{className:"w-4 h-4 inline mr-2"}),"Overview"]}),(0,a.jsxs)("button",{onClick:()=>t("attendance"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("attendance"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 inline mr-2"}),"Attendance"]}),(0,a.jsxs)("button",{onClick:()=>t("engagement"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("engagement"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 inline mr-2"}),"Engagement"]}),(0,a.jsxs)("button",{onClick:()=>t("groups"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("groups"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 inline mr-2"}),"Group Health"]})]})})]}),"overview"===e&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:S.totalMembers})]}),(0,a.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["+",S.memberGrowth,"%"]})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Growth this period"}),(0,a.jsx)(R,{reportType:"members",dateRange:p,className:"text-xs py-1 px-2"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Groups"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:S.activeGroups})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-blue-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Small groups running"}),(0,a.jsx)(R,{reportType:"groups",dateRange:p,className:"text-xs py-1 px-2"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Attendance"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[S.avgAttendance,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["+",S.attendanceGrowth,"%"]})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Service attendance rate"}),(0,a.jsx)(R,{reportType:"attendance",dateRange:p,className:"text-xs py-1 px-2"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Engagement Score"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[S.engagementScore,"%"]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(S.engagementScore,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Overall member engagement"}),(0,a.jsxs)("button",{onClick:()=>w("engagement"),className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Export"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Prayer Requests"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"24"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-red-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Active prayer requests"}),(0,a.jsx)("span",{className:"text-red-600 font-medium",children:"4 urgent"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Journey Completion"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"67%"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-purple-600"})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"67%"}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Average completion rate"}),(0,a.jsxs)("button",{onClick:()=>w("journeys"),className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Export"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Insights"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Top Performing Groups"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Young Adults Ministry"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"95% attendance"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Men's Fellowship"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"89% attendance"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Ladies Bible Study"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"87% attendance"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Areas Needing Attention"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Senior Saints"}),(0,a.jsx)("span",{className:"text-sm font-medium text-red-600",children:"62% attendance"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Youth Group"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"71% attendance"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"New Members Class"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"74% attendance"})]})]})]})]})]})]}),"attendance"===e&&(0,a.jsx)(g,{dateRange:p}),"engagement"===e&&(0,a.jsx)(j,{dateRange:p}),"groups"===e&&(0,a.jsx)(N,{dateRange:p})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=2928)}),_N_E=e.O()}]);