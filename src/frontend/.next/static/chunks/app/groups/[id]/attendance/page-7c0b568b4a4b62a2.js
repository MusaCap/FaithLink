(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{3118:function(e,t,n){Promise.resolve().then(n.bind(n,7386))},9763:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let n=(0,a.forwardRef)((n,i)=>{let{color:c="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=n;return(0,a.createElement)("svg",{ref:i,...s,width:l,height:l,stroke:c,strokeWidth:d?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(r(e)),u].join(" "),...m},[...t.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(h)?h:[h]])});return n.displayName="".concat(e),n}},6221:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1769:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1047:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8736:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},740:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8997:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9637:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8293:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3417:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},9397:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8728:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8896:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},525:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9663:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},7806:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2369:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,n){"use strict";var a=n(5475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},7386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(7437),s=n(2265),r=n(9376),i=n(3002),c=n(8742),l=n(7648),o=n(3249),d=n(3306),u=n(3430),h=n(2735),m=n(9397),p=n(1047),x=n(5805),y=n(525),f=n(9663),g=n(740),b=n(3247),v=n(1723),j=n(8736);function w(e){let{groupId:t}=e,{user:n}=(0,o.a)(),[r,i]=(0,s.useState)([]),[c,w]=(0,s.useState)(null),[N,k]=(0,s.useState)(""),[S,A]=(0,s.useState)(!0),[Z,T]=(0,s.useState)(null),[E,M]=(0,s.useState)(1),[C,O]=(0,s.useState)(0),[P,R]=(0,s.useState)(!1),[q,G]=(0,s.useState)({groupId:t,limit:10,offset:0,sortBy:"date",sortOrder:"desc"});(0,s.useEffect)(()=>{_()},[t,E]),(0,s.useEffect)(()=>{G(e=>({...e,offset:(E-1)*10}))},[E]);let _=async()=>{try{A(!0),T(null);let[e,n,a]=await Promise.all([u.P.getGroup(t),d.n.getAttendanceSessions({...q,offset:(E-1)*10}),d.n.getAttendanceStats(t)]);k(e.name),i(n.sessions),O(n.total),w(a)}catch(e){T(e instanceof Error?e.message:"Failed to load attendance data")}finally{A(!1)}},D=(e,t)=>{G(n=>({...n,[e]:t})),M(1)},U=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{let t=await d.n.exportAttendance(q,e),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="attendance-".concat(N,"-").concat(new Date().toISOString().split("T")[0],".").concat(e),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}catch(e){T(e instanceof Error?e.message:"Failed to export attendance data")}},L=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),W=e=>e?new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",I=e=>e.totalMembers>0?Math.round(e.presentCount/e.totalMembers*100):0,z=(null==n?void 0:n.role)==="admin"||(null==n?void 0:n.role)==="pastor"||c&&c.groupId===t,H=Math.ceil(C/10);return S?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[Z&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsx)("div",{className:"text-sm text-red-700",children:Z})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:"Attendance History"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:N})]}),z&&(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>U("csv"),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),(0,a.jsxs)(l.default,{href:"/groups/".concat(t,"/attendance/new"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Record Attendance"]})]})]})}),c&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-600",children:"Total Sessions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:c.totalSessions})]}),(0,a.jsx)(p.Z,{className:"w-8 h-8 text-blue-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-600",children:"Average Attendance"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:Math.round(c.averageAttendance)})]}),(0,a.jsx)(x.Z,{className:"w-8 h-8 text-green-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-600",children:"Attendance Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-neutral-900",children:[Math.round(c.attendanceRate),"%"]})]}),(0,a.jsx)(y.Z,{className:"w-8 h-8 text-purple-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-600",children:"Active Members"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:c.memberStats.length})]}),(0,a.jsx)(f.Z,{className:"w-8 h-8 text-orange-600"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-neutral-900",children:"Filter Sessions"}),(0,a.jsxs)("button",{onClick:()=>R(!P),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),P?"Hide Filters":"Show Filters"]})]}),P&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:q.startDate||"",onChange:e=>D("startDate",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:q.endDate||"",onChange:e=>D("endDate",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Sort By"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:q.sortBy||"date",onChange:e=>D("sortBy",e.target.value),children:[(0,a.jsx)("option",{value:"date",children:"Date"}),(0,a.jsx)("option",{value:"recordedAt",children:"Recorded At"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Sort Order"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:q.sortOrder||"desc",onChange:e=>D("sortOrder",e.target.value),children:[(0,a.jsx)("option",{value:"desc",children:"Newest First"}),(0,a.jsx)("option",{value:"asc",children:"Oldest First"})]})]}),(0,a.jsx)("div",{className:"md:col-span-4 flex justify-end",children:(0,a.jsxs)("button",{onClick:()=>{_()},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-neutral-900",children:["Attendance Sessions (",C," total)"]})}),(0,a.jsx)("div",{className:"divide-y divide-neutral-200",children:0===r.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(p.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,a.jsx)("h4",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No attendance records found"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-4",children:"Start recording attendance to track group participation"}),z&&(0,a.jsxs)(l.default,{href:"/groups/".concat(t,"/attendance/new"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Record First Session"]})]}):r.map(e=>(0,a.jsxs)("div",{className:"p-6 hover:bg-neutral-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-neutral-900",children:L(e.date)}),e.topic&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.topic}),(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(I(e)>=80?"bg-green-100 text-green-800":I(e)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[I(e),"% attendance"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-neutral-600",children:[e.startTime&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),W(e.startTime),e.endTime&&" - ".concat(W(e.endTime))]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),e.presentCount,"/",e.totalMembers," present"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"Recorded by ",e.recordedByName]})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-2 flex items-start",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-1 mt-0.5 text-neutral-400"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:e.notes})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(l.default,{href:"/groups/".concat(t,"/attendance/").concat(e.id),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:"View Details"})})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-green-600",children:e.presentCount}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Present"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-red-600",children:e.absentCount}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Absent"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-yellow-600",children:e.lateCount}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Late"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:e.excusedCount}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Excused"})]})]})]},e.id))}),H>1&&(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-neutral-200 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-neutral-700",children:["Showing ",(E-1)*10+1," to ",Math.min(10*E,C)," of ",C," sessions"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>M(e=>Math.max(e-1,1)),disabled:1===E,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>M(e=>Math.min(e+1,H)),disabled:E===H,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Next"})]})]})]})]})}function N(){let e=(0,r.useParams)().id;return(0,a.jsx)(i.Z,{requiredRole:"group_leader",children:(0,a.jsx)(c.Z,{children:(0,a.jsx)(w,{groupId:e})})})}},3306:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});let a="https://faithlink360-api.onrender.com",s=new Map,r=new Map;class i{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;if(n&&"GET"===t.method){let e=s.get(n);if(e&&Date.now()-e.timestamp<e.ttl)return e.data}let c="".concat(t.method||"GET","_").concat(e,"_").concat(JSON.stringify(t.body));if(r.has(c))return r.get(c);let l="".concat(a).concat(e),o=localStorage.getItem("auth_token"),d={...t,headers:{"Content-Type":"application/json",...o&&{Authorization:"Bearer ".concat(o)},...t.headers}},u=this.makeRequest(l,d,n,i);return r.set(c,u),u.finally(()=>{r.delete(c)}),u}async makeRequest(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4,r=Error("Unknown error occurred");for(let i=1;i<=3;i++)try{let r=await fetch(e,t);if(!r.ok){if(429===r.status){await new Promise(e=>setTimeout(e,1e3*i));continue}throw Error("HTTP ".concat(r.status,": ").concat(r.statusText))}let c=await r.json();return n&&"GET"===t.method&&s.set(n,{data:c,timestamp:Date.now(),ttl:a}),c}catch(e){if(r=e instanceof Error?e:Error("Unknown error"),3===i)break;await new Promise(e=>setTimeout(e,1e3*i))}throw r}async getAttendanceSessions(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[n,a]=e;null!=a&&""!==a&&t.append(n,String(a))});let n="attendance_sessions_".concat(t.toString());return this.request("/api/attendance?".concat(t.toString()),{method:"GET"},n)}async getAttendanceSession(e){return this.request("/api/attendance/".concat(e),{method:"GET"},"attendance_session_".concat(e))}async createAttendanceSession(e){let t=await this.request("/api/attendance",{method:"POST",body:JSON.stringify(e)});return this.invalidateGroupCache(e.groupId),t}async updateAttendanceSession(e){let t=await this.request("/api/attendance/".concat(e.id),{method:"PUT",body:JSON.stringify(e)});return s.delete("attendance_session_".concat(e.id)),t}async deleteAttendanceSession(e){await this.request("/api/attendance/".concat(e),{method:"DELETE"}),s.delete("attendance_session_".concat(e)),this.invalidateAllGroupCaches()}async getAttendanceStats(e,t,n){let a=new URLSearchParams({groupId:e});t&&a.append("startDate",t),n&&a.append("endDate",n);let s="attendance_stats_".concat(a.toString());return this.request("/api/attendance/stats?".concat(a.toString()),{method:"GET"},s,6e4)}async exportAttendance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",n=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&""!==a&&n.append(t,String(a))}),n.append("format",t);let s=await fetch("".concat(a,"/api/attendance/export?").concat(n.toString()),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}});if(!s.ok)throw Error("Export failed: ".concat(s.statusText));return s.blob()}async bulkUpdateAttendance(e,t){let n=await this.request("/api/attendance/".concat(e,"/bulk-update"),{method:"POST",body:JSON.stringify({updates:t})});return s.delete("attendance_session_".concat(e)),n}invalidateGroupCache(e){for(let[t]of s)(t.includes("groupId=".concat(e))||t.includes("group_".concat(e)))&&s.delete(t)}invalidateAllGroupCaches(){for(let[e]of s)e.includes("attendance_")&&s.delete(e)}clearCache(){s.clear(),r.clear()}}let c=new i},3430:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});let a="https://faithlink360-api.onrender.com";class s{async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("auth_token"),s={"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)},...t.headers},r=0;for(;r<=this.MAX_RETRIES;)try{let n=await fetch("".concat(a).concat(e),{...t,headers:s});if(!n.ok){if(429===n.status&&r<this.MAX_RETRIES){await new Promise(e=>setTimeout(e,1e3*(r+1))),r++;continue}let e=await n.json().catch(()=>({message:n.statusText}));throw Error(e.message||"HTTP ".concat(n.status,": ").concat(n.statusText))}return n.json()}catch(e){if(r<this.MAX_RETRIES&&e.message.includes("fetch")){r++,await new Promise(e=>setTimeout(e,1e3*r));continue}throw e}}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e,"-").concat(JSON.stringify(t.body||{}))}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getGroups(e){let t=new URLSearchParams;if(e){var n,a,s;e.query&&t.append("query",e.query),(null===(n=e.type)||void 0===n?void 0:n.length)&&t.append("type",e.type.join(",")),(null===(a=e.status)||void 0===a?void 0:a.length)&&t.append("status",e.status.join(",")),e.leaderId&&t.append("leaderId",e.leaderId),(null===(s=e.tags)||void 0===s?void 0:s.length)&&t.append("tags",e.tags.join(",")),void 0!==e.hasAvailableSpace&&t.append("hasAvailableSpace",e.hasAvailableSpace.toString()),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString())}let r="/api/groups".concat(t.toString()?"?".concat(t.toString()):""),i=this.getCacheKey(r);if(this.isValidCache(i))return this.requestCache.get(i).data;if(this.pendingRequests.has(i))return this.pendingRequests.get(i);let c=this.fetchWithAuth(r).then(e=>(this.requestCache.set(i,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(i),e)).catch(e=>{throw this.pendingRequests.delete(i),e});return this.pendingRequests.set(i,c),c}async getGroup(e){return this.fetchWithAuth("/api/groups/".concat(e))}async createGroup(e){return this.fetchWithAuth("/api/groups",{method:"POST",body:JSON.stringify(e)})}async updateGroup(e){return this.fetchWithAuth("/api/groups/".concat(e.id),{method:"PUT",body:JSON.stringify(e)})}async deleteGroup(e){await this.fetchWithAuth("/api/groups/".concat(e),{method:"DELETE"})}async getGroupMembers(e){return(await this.fetchWithAuth("/api/groups/".concat(e,"/members"))).members||[]}async addGroupMember(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member";return this.fetchWithAuth("/api/groups/".concat(e,"/members"),{method:"POST",body:JSON.stringify({memberId:t,role:n})})}async updateGroupMember(e,t,n){return this.fetchWithAuth("/api/groups/".concat(e,"/members/").concat(t),{method:"PUT",body:JSON.stringify(n)})}async removeGroupMember(e,t){await this.fetchWithAuth("/api/groups/".concat(e,"/members/").concat(t),{method:"DELETE"})}async getGroupAttendance(e,t,n){let a=new URLSearchParams;t&&a.append("startDate",t),n&&a.append("endDate",n);let s="/api/groups/".concat(e,"/attendance").concat(a.toString()?"?".concat(a.toString()):"");return this.fetchWithAuth(s)}async recordAttendance(e){return this.fetchWithAuth("/api/groups/".concat(e.groupId,"/attendance"),{method:"POST",body:JSON.stringify(e)})}async updateAttendance(e,t,n){return this.fetchWithAuth("/api/groups/".concat(e,"/attendance/").concat(t),{method:"PUT",body:JSON.stringify(n)})}async deleteAttendance(e,t){await this.fetchWithAuth("/api/groups/".concat(e,"/attendance/").concat(t),{method:"DELETE"})}async getGroupStats(){return this.fetchWithAuth("/api/groups/stats")}async getGroupAttendanceStats(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month";return this.fetchWithAuth("/api/groups/".concat(e,"/stats/attendance?period=").concat(t))}async exportGroups(e){let t=new URLSearchParams;if(e){var n,s;e.query&&t.append("query",e.query),(null===(n=e.type)||void 0===n?void 0:n.length)&&t.append("type",e.type.join(",")),(null===(s=e.status)||void 0===s?void 0:s.length)&&t.append("status",e.status.join(","))}let r=localStorage.getItem("auth_token"),i=await fetch("".concat(a,"/api/groups/export").concat(t.toString()?"?".concat(t.toString()):""),{headers:{...r&&{Authorization:"Bearer ".concat(r)}}});if(!i.ok)throw Error("Export failed: ".concat(i.statusText));return i.blob()}async bulkUpdateGroups(e,t){return this.fetchWithAuth("/api/groups/bulk",{method:"PUT",body:JSON.stringify({groupIds:e,updates:t})})}async bulkDeleteGroups(e){return this.fetchWithAuth("/api/groups/bulk",{method:"DELETE",body:JSON.stringify({groupIds:e})})}async getGroupTypes(){return[{value:"small_group",label:"Small Group",description:"Intimate fellowship and Bible study groups"},{value:"ministry",label:"Ministry Team",description:"Service-focused ministry groups"},{value:"youth",label:"Youth Group",description:"Teen and young adult groups"},{value:"seniors",label:"Seniors Group",description:"Groups for older adults"},{value:"womens",label:"Women's Group",description:"Women's fellowship and study groups"},{value:"mens",label:"Men's Group",description:"Men's fellowship and study groups"},{value:"children",label:"Children's Group",description:"Groups for children and families"},{value:"worship",label:"Worship Team",description:"Music and worship ministry teams"},{value:"service",label:"Service Team",description:"Community service and outreach teams"},{value:"bible_study",label:"Bible Study",description:"Scripture study and discussion groups"},{value:"prayer",label:"Prayer Group",description:"Prayer and intercession groups"},{value:"outreach",label:"Outreach Team",description:"Evangelism and community outreach"},{value:"other",label:"Other",description:"Custom group types"}]}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let r=new s}},function(e){e.O(0,[7648,4429,2971,2117,1744],function(){return e(e.s=3118)}),_N_E=e.O()}]);