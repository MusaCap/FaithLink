(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{1261:function(e,t,s){Promise.resolve().then(s.bind(s,8049))},8049:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var a=s(7437),r=s(2265),n=s(7648),l=s(9397),i=s(3247),c=s(1047),d=s(3774),o=s(5805),m=s(9663),x=s(7404),u=s(8742),h=s(3002),g=s(2489),p=s(2369);function b(e){let{event:t,isOpen:s,onClose:n,onRegister:l}=e,[i,m]=(0,r.useState)({name:"",email:"",phone:"",attendeeCount:1,specialRequests:"",emergencyContact:"",emergencyPhone:""}),[x,u]=(0,r.useState)(!1),[h,b]=(0,r.useState)({}),f=()=>{let e={};return i.name.trim()||(e.name="Name is required"),i.email.trim()||(e.email="Email is required"),i.email.includes("@")||(e.email="Valid email is required"),1>Number(i.attendeeCount)&&(e.attendeeCount="At least 1 attendee required"),t.maxAttendees&&t.currentAttendees+Number(i.attendeeCount)>t.maxAttendees&&(e.attendeeCount="Only ".concat(t.maxAttendees-t.currentAttendees," spots remaining")),b(e),0===Object.keys(e).length},j=async e=>{if(e.preventDefault(),f()){u(!0);try{await l(i),m({name:"",email:"",phone:"",attendeeCount:1,specialRequests:"",emergencyContact:"",emergencyPhone:""}),n()}catch(e){console.error("Registration failed:",e)}finally{u(!1)}}},y=t.maxAttendees?t.maxAttendees-t.currentAttendees:null;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Register for Event"}),(0,a.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:t.title}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),new Date(t.startDateTime).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),t.location]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),t.currentAttendees," registered",null!==y&&(0,a.jsxs)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs ".concat(y>10?"bg-green-100 text-green-800":y>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[y," spots left"]})]})]})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{type:"text",value:i.name,onChange:e=>m({...i,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(h.name?"border-red-300":"border-gray-300"),placeholder:"Your full name"}),h.name&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:h.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,a.jsx)("input",{type:"email",value:i.email,onChange:e=>m({...i,email:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(h.email?"border-red-300":"border-gray-300"),placeholder:"your.email@example.com"}),h.email&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:h.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",value:i.phone,onChange:e=>m({...i,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Attendees *"}),(0,a.jsx)("input",{type:"number",min:"1",max:y||10,value:i.attendeeCount.toString(),onChange:e=>m({...i,attendeeCount:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(h.attendeeCount?"border-red-300":"border-gray-300")}),h.attendeeCount&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:h.attendeeCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact"}),(0,a.jsx)("input",{type:"text",value:i.emergencyContact,onChange:e=>m({...i,emergencyContact:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Emergency contact name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Phone"}),(0,a.jsx)("input",{type:"tel",value:i.emergencyPhone,onChange:e=>m({...i,emergencyPhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Emergency contact phone"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Requests or Dietary Restrictions"}),(0,a.jsx)("textarea",{value:i.specialRequests,onChange:e=>m({...i,specialRequests:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Any special accommodations needed..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:x||null!==y&&0===y,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Registering..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Register"})]})})]})]})]})]})}):null}var f=s(1723),j=s(3745),y=s(2735),N=s(9345),v=s(3041);function w(e){let{eventId:t,eventTitle:s,isOpen:n,onClose:l}=e,[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)(""),[p,b]=(0,r.useState)("all");(0,r.useEffect)(()=>{n&&w()},[n,t]);let w=async()=>{try{let e=await fetch("/api/events/".concat(t,"/rsvps"));if(e.ok){let t=await e.json();d(t.rsvps)}else d([{id:"1",memberName:"Sarah Johnson",email:"sarah@faithlink.org",phone:"(555) 234-5678",attendeeCount:2,status:"confirmed",registrationDate:"2025-01-15T10:30:00Z",specialRequests:"Vegetarian meal",emergencyContact:"Mike Johnson",emergencyPhone:"(555) 234-5679"},{id:"2",memberName:"Michael Chen",email:"michael@faithlink.org",phone:"(555) 345-6789",attendeeCount:1,status:"confirmed",registrationDate:"2025-01-16T14:20:00Z"},{id:"3",memberName:"Emily Rodriguez",email:"emily@faithlink.org",attendeeCount:3,status:"tentative",registrationDate:"2025-01-17T09:15:00Z",specialRequests:"Wheelchair accessible seating"},{id:"4",memberName:"Robert Wilson",email:"robert@faithlink.org",phone:"(555) 456-7890",attendeeCount:1,status:"declined",registrationDate:"2025-01-18T16:45:00Z"},{id:"5",memberName:"Maria Santos",email:"maria@faithlink.org",attendeeCount:2,status:"no-response",registrationDate:"2025-01-19T11:00:00Z"}])}catch(e){console.error("Failed to fetch RSVPs:",e)}finally{u(!1)}},C=async(e,s)=>{try{(await fetch("/api/events/".concat(t,"/rsvps/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok&&d(t=>t.map(t=>t.id===e?{...t,status:s}:t))}catch(e){console.error("Failed to update RSVP status:",e)}},k=c.filter(e=>{let t=e.memberName.toLowerCase().includes(h.toLowerCase())||e.email.toLowerCase().includes(h.toLowerCase()),s="all"===p||e.status===p;return t&&s}),S=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"tentative":return"bg-yellow-100 text-yellow-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=e=>{switch(e){case"confirmed":return(0,a.jsx)(m.Z,{className:"w-4 h-4"});case"tentative":return(0,a.jsx)(f.Z,{className:"w-4 h-4"});case"declined":return(0,a.jsx)(j.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(o.Z,{className:"w-4 h-4"})}},R={confirmed:c.filter(e=>"confirmed"===e.status).length,tentative:c.filter(e=>"tentative"===e.status).length,declined:c.filter(e=>"declined"===e.status).length,noResponse:c.filter(e=>"no-response"===e.status).length},Z=c.filter(e=>"confirmed"===e.status).reduce((e,t)=>e+t.attendeeCount,0);return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"RSVP Tracker"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:s})]}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:R.confirmed}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Confirmed"}),(0,a.jsxs)("div",{className:"text-xs text-green-600",children:[Z," attendees"]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:R.tentative}),(0,a.jsx)("div",{className:"text-sm text-yellow-700",children:"Tentative"})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:R.declined}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:"Declined"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:R.noResponse}),(0,a.jsx)("div",{className:"text-sm text-gray-700",children:"No Response"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Total RSVPs"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search RSVPs...",value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"tentative",children:"Tentative"}),(0,a.jsx)("option",{value:"declined",children:"Declined"}),(0,a.jsx)("option",{value:"no-response",children:"No Response"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Name,Email,Phone,Attendees,Status,Registration Date,Special Requests,Emergency Contact,Emergency Phone",...k.map(e=>[e.memberName,e.email,e.phone||"",e.attendeeCount,e.status,new Date(e.registrationDate).toLocaleDateString(),e.specialRequests||"",e.emergencyContact||"",e.emergencyPhone||""].join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="".concat(s.replace(/\s+/g,"_"),"_RSVPs.csv"),a.click(),URL.revokeObjectURL(t)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export"})]})]}),x?(0,a.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-16 bg-gray-200 rounded"},t))}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendees"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registered"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.memberName}),e.specialRequests&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Special: ",e.specialRequests]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3 mr-1"}),e.email]}),e.phone&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3 mr-1"}),e.phone]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.attendeeCount}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ".concat(S(e.status)),children:[T(e.status),(0,a.jsx)("span",{className:"ml-1",children:e.status.replace("-"," ")})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.registrationDate).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("select",{value:e.status,onChange:t=>C(e.id,t.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"tentative",children:"Tentative"}),(0,a.jsx)("option",{value:"declined",children:"Declined"}),(0,a.jsx)("option",{value:"no-response",children:"No Response"})]})})]},e.id))})]}),0===k.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No RSVPs found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:h||"all"!==p?"Try adjusting your search or filter criteria.":"No one has registered for this event yet."})]})]})]})]})}):null}var C=s(5302),k=s(2252);function S(e){let{eventId:t,eventTitle:s,isOpen:n,onClose:l}=e,[c,d]=(0,r.useState)([]),[o,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)(""),[b,j]=(0,r.useState)("all"),[y,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n&&v()},[n,t]);let v=async()=>{try{let e=await fetch("/api/events/".concat(t,"/check-in"));if(e.ok){let t=await e.json();d(t.attendees)}else d([{id:"1",memberName:"Sarah Johnson",email:"sarah@faithlink.org",attendeeCount:2,status:"checked-in",checkInTime:"2025-01-19T09:45:00Z",registrationId:"reg-001"},{id:"2",memberName:"Michael Chen",email:"michael@faithlink.org",attendeeCount:1,status:"checked-in",checkInTime:"2025-01-19T09:52:00Z",registrationId:"reg-002"},{id:"3",memberName:"Emily Rodriguez",email:"emily@faithlink.org",attendeeCount:3,status:"registered",registrationId:"reg-003"},{id:"4",memberName:"Robert Wilson",email:"robert@faithlink.org",attendeeCount:1,status:"registered",registrationId:"reg-004"},{id:"5",memberName:"Maria Santos",email:"maria@faithlink.org",attendeeCount:2,status:"no-show",registrationId:"reg-005"},{id:"6",memberName:"David Kim",email:"david@faithlink.org",attendeeCount:1,status:"checked-in",checkInTime:"2025-01-19T10:15:00Z",registrationId:"reg-006"}])}catch(e){console.error("Failed to fetch attendees:",e)}finally{u(!1)}},w=async e=>{try{(await fetch("/api/events/".concat(t,"/check-in/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkInTime:new Date().toISOString()})})).ok&&d(t=>t.map(t=>t.id===e?{...t,status:"checked-in",checkInTime:new Date().toISOString()}:t))}catch(e){console.error("Failed to check in attendee:",e)}},S=async e=>{try{(await fetch("/api/events/".concat(t,"/check-in/").concat(e),{method:"DELETE"})).ok&&d(t=>t.map(t=>t.id===e?{...t,status:"registered",checkInTime:void 0}:t))}catch(e){console.error("Failed to undo check-in:",e)}},T=async e=>{try{(await fetch("/api/events/".concat(t,"/check-in/").concat(e,"/no-show"),{method:"POST"})).ok&&d(t=>t.map(t=>t.id===e?{...t,status:"no-show"}:t))}catch(e){console.error("Failed to mark as no-show:",e)}},R=c.filter(e=>{let t=e.memberName.toLowerCase().includes(h.toLowerCase())||e.email.toLowerCase().includes(h.toLowerCase()),s="all"===b||e.status===b;return t&&s}),Z=e=>{switch(e){case"checked-in":return"bg-green-100 text-green-800";case"registered":return"bg-blue-100 text-blue-800";case"no-show":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=e=>{switch(e){case"checked-in":return(0,a.jsx)(C.Z,{className:"w-4 h-4"});case"registered":default:return(0,a.jsx)(f.Z,{className:"w-4 h-4"});case"no-show":return(0,a.jsx)(k.Z,{className:"w-4 h-4"})}},D={checkedIn:c.filter(e=>"checked-in"===e.status).length,registered:c.filter(e=>"registered"===e.status).length,noShow:c.filter(e=>"no-show"===e.status).length},E=c.filter(e=>"checked-in"===e.status).reduce((e,t)=>e+t.attendeeCount,0),I=c.reduce((e,t)=>e+t.attendeeCount,0);return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Event Check-In"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:s})]}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:D.checkedIn}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Checked In"}),(0,a.jsxs)("div",{className:"text-xs text-green-600",children:[E," people"]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:D.registered}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Not Yet Arrived"})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:D.noShow}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:"No Shows"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(E/I*100)||0,"%"]}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Attendance Rate"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search attendees...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"checked-in",children:"Checked In"}),(0,a.jsx)("option",{value:"registered",children:"Not Arrived"}),(0,a.jsx)("option",{value:"no-show",children:"No Shows"})]}),(0,a.jsxs)("button",{onClick:()=>N(!y),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"QR Scanner"})]})]}),y&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"QR Code Scanner Active"}),(0,a.jsx)("p",{className:"text-xs text-blue-700",children:"QR code scanning functionality would be implemented here using a camera library like react-qr-scanner"})]})]})}),o?(0,a.jsx)("div",{className:"animate-pulse space-y-4",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"h-16 bg-gray-200 rounded"},t))}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendee"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Party Size"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-In Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.memberName}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.attendeeCount}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ".concat(Z(e.status)),children:[A(e.status),(0,a.jsx)("span",{className:"ml-1",children:e.status.replace("-"," ")})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.checkInTime?new Date(e.checkInTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"â€”"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["registered"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>w(e.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"Check In"}),(0,a.jsx)("button",{onClick:()=>T(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"No Show"})]}),"checked-in"===e.status&&(0,a.jsx)("button",{onClick:()=>S(e.id),className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"Undo"}),"no-show"===e.status&&(0,a.jsx)("button",{onClick:()=>w(e.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs transition-colors",children:"Check In"})]})})]},e.id))})]}),0===R.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(m.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No attendees found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:h||"all"!==b?"Try adjusting your search or filter criteria.":"No registrations found for this event."})]})]})]})]})}):null}function T(){let[e,t]=(0,r.useState)([]),[s,g]=(0,r.useState)(!0),[p,f]=(0,r.useState)(""),[j,y]=(0,r.useState)("all"),[N,v]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[T,R]=(0,r.useState)(!1),[Z,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{D()},[]);let D=async()=>{try{g(!0),t([{id:"1",title:"Sunday Service",description:"Weekly worship service with communion",startDateTime:"2024-01-07T10:00:00",endDateTime:"2024-01-07T11:30:00",location:"Main Sanctuary",eventType:"service",maxAttendees:200,currentAttendees:150,isRecurring:!0,status:"upcoming"},{id:"2",title:"Youth Bible Study",description:"Interactive Bible study for teens and young adults",startDateTime:"2024-01-10T19:00:00",endDateTime:"2024-01-10T20:30:00",location:"Youth Center",eventType:"bible_study",maxAttendees:30,currentAttendees:18,isRecurring:!0,status:"upcoming"},{id:"3",title:"Community Outreach",description:"Serving meals at local shelter",startDateTime:"2024-01-15T12:00:00",endDateTime:"2024-01-15T16:00:00",location:"Downtown Shelter",eventType:"outreach",maxAttendees:25,currentAttendees:12,isRecurring:!1,status:"upcoming"}])}catch(e){console.error("Error fetching events:",e)}finally{g(!1)}},E=e.filter(e=>{let t=e.title.toLowerCase().includes(p.toLowerCase())||e.description.toLowerCase().includes(p.toLowerCase()),s="all"===j||e.status===j;return t&&s}),I=e=>{switch(e){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}},P=e=>new Date(e).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return s?(0,a.jsx)(h.Z,{children:(0,a.jsx)(u.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})})}):(0,a.jsx)(h.Z,{children:(0,a.jsx)(u.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:"Events"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Manage church events and activities"})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)(n.default,{href:"/events/new",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search events...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,a.jsx)("div",{className:"sm:w-48",children:(0,a.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Events"}),(0,a.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,a.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:E.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 truncate",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(I(e.status)),children:e.status})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2 text-neutral-400"}),P(e.startDateTime)]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-neutral-600",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.currentAttendees,e.maxAttendees&&" / ".concat(e.maxAttendees)," attendees"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{v(e),k(!0)},className:"flex-1 px-3 py-2 text-sm font-medium text-green-600 bg-green-50 rounded-md hover:bg-green-100 flex items-center justify-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Register"})]}),(0,a.jsx)("button",{onClick:()=>{v(e),R(!0)},className:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100",children:(0,a.jsx)(o.Z,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:()=>{v(e),A(!0)},className:"px-3 py-2 text-sm font-medium text-purple-600 bg-purple-50 rounded-md hover:bg-purple-100",children:(0,a.jsx)(x.Z,{className:"w-3 h-3"})})]})]})},e.id))}),0===E.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-neutral-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-neutral-900",children:"No events found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-neutral-500",children:p||"all"!==j?"Try adjusting your search or filter criteria.":"Get started by creating your first event."}),!p&&"all"===j&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(n.default,{href:"/events/new",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]}),N&&(0,a.jsx)(b,{event:N,isOpen:C,onClose:()=>{k(!1),v(null)},onRegister:async e=>{try{(await fetch("/api/events/".concat(N.id,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&await D()}catch(e){console.error("Registration failed:",e)}}}),N&&(0,a.jsx)(w,{eventId:N.id,eventTitle:N.title,isOpen:T,onClose:()=>{R(!1),v(null)}}),N&&(0,a.jsx)(S,{eventId:N.id,eventTitle:N.title,isOpen:Z,onClose:()=>{A(!1),v(null)}})]})})})}}},function(e){e.O(0,[7648,8499,4429,2971,2117,1744],function(){return e(e.s=1261)}),_N_E=e.O()}]);