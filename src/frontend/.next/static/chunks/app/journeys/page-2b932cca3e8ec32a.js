(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6990],{4401:function(e,t,r){Promise.resolve().then(r.bind(r,7361))},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{color:l="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:m,...y}=r;return(0,s.createElement)("svg",{ref:o,...n,width:i,height:i,stroke:l,strokeWidth:u?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(a(e)),d].join(" "),...y},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2252:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6221:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1769:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8997:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9637:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8293:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3417:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3276:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8728:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8896:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},525:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},7806:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7361:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var s=r(7437),n=r(2265),a=r(3002),o=r(8742),l=r(7648),i=r(3249),c=r(2315),u=r(1723),d=r(3276);let m=(0,r(9763).Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var y=r(5302),h=r(2252),p=r(9397),x=r(3247),f=r(740),b=r(1769),g=r(2369),j=r(1047),v=r(525),w=r(2208),k=r(2735);function N(){let{user:e}=(0,i.a)(),[t,r]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0),[N,Z]=(0,n.useState)(null),[_,S]=(0,n.useState)(1),[M,T]=(0,n.useState)(0),[C,J]=(0,n.useState)(!1),[E,P]=(0,n.useState)({limit:10,offset:0,sortBy:"startedAt",sortOrder:"desc"}),[q,O]=(0,n.useState)("");(0,n.useEffect)(()=>{(null==e?void 0:e.role)==="member"&&P(t=>({...t,memberId:e.id})),A()},[e,_]),(0,n.useEffect)(()=>{P(e=>({...e,offset:(_-1)*10}))},[_]);let A=async()=>{try{o(!0),Z(null);let e=await c.u.getMemberJourneys({...E,offset:(_-1)*10});r(e.journeys),T(e.total)}catch(e){Z(e instanceof Error?e.message:"Failed to load journeys")}finally{o(!1)}},z=(e,t)=>{P(r=>({...r,[e]:""===t?void 0:t})),S(1)},L=async(e,t)=>{try{await c.u.updateMemberJourney({id:e,status:t}),A()}catch(e){Z(e instanceof Error?e.message:"Failed to update journey status")}},D=async e=>{try{let t=await c.u.exportMemberJourneyProgress(e,"pdf"),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="journey-progress-".concat(e,".pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}catch(e){Z(e instanceof Error?e.message:"Failed to export journey progress")}},R=e=>{switch(e){case"not_started":default:return"bg-neutral-100 text-neutral-800";case"in_progress":return"bg-blue-100 text-blue-800";case"paused":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"abandoned":return"bg-red-100 text-red-800";case"overdue":return"bg-orange-100 text-orange-800"}},U=e=>{switch(e){case"not_started":default:return(0,s.jsx)(u.Z,{className:"w-4 h-4"});case"in_progress":return(0,s.jsx)(d.Z,{className:"w-4 h-4"});case"paused":return(0,s.jsx)(m,{className:"w-4 h-4"});case"completed":return(0,s.jsx)(y.Z,{className:"w-4 h-4"});case"abandoned":case"overdue":return(0,s.jsx)(h.Z,{className:"w-4 h-4"})}},F=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=(null==e?void 0:e.role)==="admin"||(null==e?void 0:e.role)==="pastor",B=(null==e?void 0:e.role)==="member",G=Math.ceil(M/10);return a?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[N&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("div",{className:"text-sm text-red-700",children:N})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:B?"My Spiritual Journeys":"Member Journeys"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:B?"Track your spiritual growth and development progress":"Monitor member spiritual journey progress and milestones"})]}),H&&(0,s.jsxs)(l.default,{href:"/journeys/assign",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Assign Journey"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),S(1),A()},className:"flex-1 max-w-lg",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search journeys...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:q,onChange:e=>O(e.target.value)})]})}),(0,s.jsxs)("button",{onClick:()=>J(!C),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 ml-3",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),C&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-neutral-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:E.status||"",onChange:e=>z("status",e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"not_started",children:"Not Started"}),(0,s.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"abandoned",children:"Abandoned"}),(0,s.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Date From"}),(0,s.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:E.startDateFrom||"",onChange:e=>z("startDateFrom",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Date To"}),(0,s.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:E.startDateTo||"",onChange:e=>z("startDateTo",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Sort By"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:"".concat(E.sortBy,"_").concat(E.sortOrder),onChange:e=>{let[t,r]=e.target.value.split("_");z("sortBy",t),z("sortOrder",r)},children:[(0,s.jsx)("option",{value:"startedAt_desc",children:"Recently Started"}),(0,s.jsx)("option",{value:"startedAt_asc",children:"Oldest First"}),(0,s.jsx)("option",{value:"lastActivityAt_desc",children:"Recent Activity"}),(0,s.jsx)("option",{value:"progress_desc",children:"Most Progress"}),(0,s.jsx)("option",{value:"progress_asc",children:"Least Progress"})]})]}),(0,s.jsx)("div",{className:"md:col-span-4 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{A()},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Apply Filters"})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[t&&0!==t.length?(0,s.jsx)("div",{className:"divide-y divide-neutral-200",children:t&&t.map(e=>(0,s.jsx)("div",{className:"p-6 hover:bg-neutral-50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900",children:e.journeyTemplateName}),(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(R(e.status)),children:[U(e.status),(0,s.jsx)("span",{className:"capitalize",children:e.status.replace("_"," ")})]})]}),!B&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-neutral-600 mb-2",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),e.memberName,e.mentorName&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mx-2",children:"â€¢"}),"Mentor: ",e.mentorName]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-neutral-600 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),"Started ",F(e.startedAt)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),e.progress.percentageComplete,"% complete"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),e.progress.completedMilestones,"/",e.progress.totalMilestones," milestones"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),e.progress.daysSinceStart," days active"]})]}),(0,s.jsx)("div",{className:"w-full bg-neutral-200 rounded-full h-2 mb-3",children:(0,s.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.progress.percentageComplete,"%")}})}),e.notes&&(0,s.jsx)("p",{className:"text-sm text-neutral-600 bg-neutral-50 rounded p-2 mb-3",children:e.notes})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,s.jsxs)(l.default,{href:"/journeys/".concat(e.id),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"View Progress"]}),(0,s.jsxs)("button",{onClick:()=>D(e.id),className:"inline-flex items-center px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Export"]}),H&&(0,s.jsxs)("div",{className:"flex space-x-1",children:["in_progress"===e.status&&(0,s.jsx)("button",{onClick:()=>L(e.id,"paused"),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded",title:"Pause Journey",children:(0,s.jsx)(m,{className:"w-4 h-4"})}),"paused"===e.status&&(0,s.jsx)("button",{onClick:()=>L(e.id,"in_progress"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Resume Journey",children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})}),"not_started"===e.status&&(0,s.jsx)("button",{onClick:()=>L(e.id,"in_progress"),className:"p-2 text-green-600 hover:bg-green-50 rounded",title:"Start Journey",children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})})]})]})]})},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(b.Z,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,s.jsx)("h4",{className:"text-lg font-medium text-neutral-900 mb-2",children:B?"No spiritual journeys assigned":"No member journeys found"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-4",children:B?"Ask your pastor or group leader to assign you a spiritual growth journey":"Assign journey templates to help members grow spiritually"}),H&&(0,s.jsxs)(l.default,{href:"/journeys/assign",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Assign First Journey"]})]}),G>1&&(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-neutral-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-neutral-700",children:["Showing ",(_-1)*10+1," to ",Math.min(10*_,M)," of ",M," journeys"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>S(e=>Math.max(e-1,1)),disabled:1===_,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>S(e=>Math.min(e+1,G)),disabled:_===G,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 disabled:opacity-50",children:"Next"})]})]})]})]})}function Z(){return(0,s.jsx)(a.Z,{children:(0,s.jsx)(o.Z,{children:(0,s.jsx)(N,{})})})}},2315:function(e,t,r){"use strict";r.d(t,{u:function(){return l}});let s="https://faithlink360-api.onrender.com",n=new Map,a=new Map;class o{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4,o="".concat(s).concat(e),l=localStorage.getItem("auth_token"),i={"Content-Type":"application/json",...l&&{Authorization:"Bearer ".concat(l)}},c={...t,headers:{...i,...t.headers}};if(r&&"GET"===t.method){let e=n.get(r);if(e&&Date.now()-e.timestamp<e.ttl)return console.log("Cache hit for ".concat(r)),e.data}let u=Error("Request failed");for(let e=1;e<=3;e++)try{let s=await fetch(o,c);if(!s.ok){if(429===s.status){await new Promise(t=>setTimeout(t,1e3*e));continue}throw Error("HTTP ".concat(s.status,": ").concat(s.statusText))}let l=await s.json();return r&&"GET"===t.method&&n.set(r,{data:l,timestamp:Date.now(),ttl:a}),l}catch(t){if(u=t instanceof Error?t:Error("Unknown error"),3===e)break;await new Promise(t=>setTimeout(t,1e3*e))}throw u}async getJourneyTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,s]=e;null!=s&&""!==s&&(Array.isArray(s)?s.forEach(e=>t.append(r,String(e))):t.append(r,String(s)))});let r="journey_templates_".concat(t.toString());return this.request("/api/journey-templates?".concat(t.toString()),{method:"GET"},r)}async getJourneyTemplate(e){return this.request("/api/journey-templates/".concat(e),{method:"GET"},"journey_template_".concat(e))}async createJourneyTemplate(e){let t=await this.request("/api/journey-templates",{method:"POST",body:JSON.stringify(e)});return this.invalidateTemplateCache(),t}async updateJourneyTemplate(e){let t=await this.request("/api/journey-templates/".concat(e.id),{method:"PUT",body:JSON.stringify(e)});return n.delete("journey_template_".concat(e.id)),this.invalidateTemplateCache(),t}async deleteJourneyTemplate(e){await this.request("/api/journey-templates/".concat(e),{method:"DELETE"}),n.delete("journey_template_".concat(e)),this.invalidateTemplateCache()}async duplicateJourneyTemplate(e,t){let r=await this.request("/api/journey-templates/".concat(e,"/duplicate"),{method:"POST",body:JSON.stringify({name:t})});return this.invalidateTemplateCache(),r}async getMemberJourneys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,s]=e;null!=s&&""!==s&&t.append(r,String(s))});let r="member_journeys_".concat(t.toString());return this.request("/journeys/member-journeys?".concat(t.toString()),{method:"GET"},r)}async getMemberJourney(e){return this.request("/journeys/member-journeys/".concat(e),{method:"GET"},"member_journey_".concat(e))}async assignJourneyToMember(e){let t=await this.request("/journeys/member-journeys",{method:"POST",body:JSON.stringify(e)});return this.invalidateMemberJourneyCache(),t}async updateMemberJourney(e){let t=await this.request("/journeys/member-journeys/".concat(e.id),{method:"PUT",body:JSON.stringify(e)});return n.delete("member_journey_".concat(e.id)),this.invalidateMemberJourneyCache(),t}async deleteMemberJourney(e){await this.request("/journeys/member-journeys/".concat(e),{method:"DELETE"}),n.delete("member_journey_".concat(e)),this.invalidateMemberJourneyCache()}async getMilestoneProgress(e,t){let r="milestone_progress_".concat(e,"_").concat(t);return this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/progress"),{method:"GET"},r)}async startMilestone(e,t){let r=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/start"),{method:"POST"});return n.delete("member_journey_".concat(e)),n.delete("milestone_progress_".concat(e,"_").concat(t)),r}async completeMilestone(e,t,r){let s=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/complete"),{method:"POST",body:JSON.stringify({notes:r})});return n.delete("member_journey_".concat(e)),n.delete("milestone_progress_".concat(e,"_").concat(t)),s}async submitMilestone(e){let t=new FormData;t.append("type",e.type),t.append("content",e.content),e.attachments&&e.attachments.forEach((e,r)=>{t.append("attachment_".concat(r),e)});let r=localStorage.getItem("auth_token"),n=await fetch("".concat(s,"/api/journeys/milestone-progress/").concat(e.milestoneProgressId,"/submit"),{method:"POST",headers:{...r&&{Authorization:"Bearer ".concat(r)}},body:t});if(!n.ok)throw Error("HTTP ".concat(n.status,": ").concat(n.statusText));let a=await n.json();return this.invalidateMemberJourneyCache(),a}async approveMilestone(e,t,r){let s=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/approve"),{method:"POST",body:JSON.stringify({feedback:r})});return n.delete("member_journey_".concat(e)),n.delete("milestone_progress_".concat(e,"_").concat(t)),s}async requestMilestoneRevision(e,t,r){let s=await this.request("/journeys/member-journeys/".concat(e,"/milestones/").concat(t,"/request-revision"),{method:"POST",body:JSON.stringify({feedback:r})});return n.delete("member_journey_".concat(e)),n.delete("milestone_progress_".concat(e,"_").concat(t)),s}async getJourneyStats(){return this.request("/journeys/stats",{method:"GET"},"journey_stats",6e4)}async getMemberJourneyStats(e){return this.request("/journeys/members/".concat(e,"/stats"),{method:"GET"},"member_journey_stats_".concat(e),6e4)}async bulkAssignJourney(e,t,r){let s=await this.request("/journeys/bulk-assign",{method:"POST",body:JSON.stringify({memberIds:e,templateId:t,mentorId:r})});return this.invalidateMemberJourneyCache(),s}async bulkUpdateJourneyStatus(e,t){await this.request("/journeys/bulk-status",{method:"POST",body:JSON.stringify({journeyIds:e,status:t})}),this.invalidateMemberJourneyCache()}async exportJourneyTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",r=await fetch("".concat(s,"/api/journey-templates/").concat(e,"/export?format=").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}});if(!r.ok)throw Error("Export failed: ".concat(r.statusText));return r.blob()}async exportMemberJourneyProgress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf",r=await fetch("".concat(s,"/journeys/member-journeys/").concat(e,"/export?format=").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}});if(!r.ok)throw Error("Export failed: ".concat(r.statusText));return r.blob()}invalidateTemplateCache(){for(let[e]of n)e.includes("journey_template")&&n.delete(e)}invalidateMemberJourneyCache(){for(let[e]of n)(e.includes("member_journey")||e.includes("milestone_progress"))&&n.delete(e)}clearCache(){n.clear(),a.clear()}}let l=new o}},function(e){e.O(0,[7648,4429,2971,2117,1744],function(){return e(e.s=4401)}),_N_E=e.O()}]);