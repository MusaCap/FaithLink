(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7289],{9515:function(e,t,a){Promise.resolve().then(a.bind(a,3752))},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=a;return(0,s.createElement)("svg",{ref:n,...r,width:l,height:l,stroke:o,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(i(e)),u].join(" "),...m},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},2252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8736:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3229:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2720:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},3752:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var s=a(7437),r=a(2265),i=a(5302),n=a(1723),o=a(2252),l=a(9397),c=a(3247),d=a(3249);class u{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(a&&this.cache.has(a))return this.cache.get(a);let s="".concat("https://faithlink360-api.onrender.com").concat(e),r={"Content-Type":"application/json"};{let e=localStorage.getItem("auth_token");e&&(r.Authorization="Bearer ".concat(e))}let i=await fetch(s,{...t,headers:{...r,...t.headers}});if(!i.ok)throw Error((await i.json().catch(()=>({}))).message||"HTTP error! status: ".concat(i.status));let n=await i.json();return a&&200===i.status&&(this.cache.set(a,n),setTimeout(()=>this.cache.delete(a),3e5)),n}async getTasks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&""!==s&&t.append(a,String(s))});let a="tasks_".concat(t.toString());return this.request("/api/tasks?".concat(t.toString()),{method:"GET"},a)}async getTask(e){let t=this.cacheKeys.task(e);return this.request("/api/tasks/".concat(e),{method:"GET"},t)}async createTask(e){let t=await this.request("/api/tasks",{method:"POST",body:JSON.stringify(e)});return this.invalidateTaskCache(),t}async updateTask(e){let t=await this.request("/api/tasks/".concat(e.id),{method:"PUT",body:JSON.stringify(e)});return this.invalidateTaskCache(),this.cache.delete(this.cacheKeys.task(e.id)),t}async deleteTask(e){await this.request("/api/tasks/".concat(e),{method:"DELETE"}),this.invalidateTaskCache(),this.cache.delete(this.cacheKeys.task(e))}invalidateTaskCache(){let e=[];this.cache.forEach((t,a)=>{(a.startsWith("tasks_")||a===this.cacheKeys.tasks)&&e.push(a)}),e.forEach(e=>this.cache.delete(e))}getTaskPriorityColor(e){switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}getTaskStatusColor(e){switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}isTaskOverdue(e){return!!e.dueDate&&new Date(e.dueDate)<new Date&&"completed"!==e.status}getTaskProgress(e){let t=e.length,a=e.filter(e=>"completed"===e.status).length;return{total:t,completed:a,pending:e.filter(e=>"pending"===e.status).length,inProgress:e.filter(e=>"in_progress"===e.status).length,overdue:e.filter(e=>this.isTaskOverdue(e)).length}}constructor(){this.cache=new Map,this.cacheKeys={tasks:"tasks_list",task:e=>"task_".concat(e)}}}let h=new u;var m=a(9376),g=a(2850),p=a(2489),y=a(8736);let x=(0,a(9763).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var f=a(2720),b=a(5805),v=a(1047),j=a(3229);function k(e){let{onCancel:t,onSuccess:a}=e,{user:i}=(0,d.a)();(0,m.useRouter)();let[n,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,k]=(0,r.useState)([]),[w,N]=(0,r.useState)({title:"",description:"",priority:"medium",category:"Administration",assignedTo:"",assignedToId:"",dueDate:""});(0,r.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await g.H.getMembers({limit:100,sortBy:"firstName",sortOrder:"asc"});k(e.members||[])}catch(e){console.error("Failed to load members:",e)}},T=(e,t)=>{if(N(a=>({...a,[e]:t})),"assignedTo"===e){let e=u.find(e=>"".concat(e.firstName," ").concat(e.lastName)===t);N(a=>({...a,assignedTo:t,assignedToId:(null==e?void 0:e.id)||""}))}},C=async e=>{if(e.preventDefault(),!w.title.trim()){c("Task title is required");return}try{o(!0),c(null),await h.createTask({...w,title:w.title.trim(),description:w.description.trim()}),a()}catch(e){c(e instanceof Error?e.message:"Failed to create task")}finally{o(!1)}},A=w.title.trim().length>0;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full mx-4",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Task"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 p-1",children:(0,s.jsx)(p.Z,{className:"w-5 h-5"})})]})}),(0,s.jsxs)("form",{onSubmit:C,className:"px-6 py-4 space-y-6",children:[l&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:l})]})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("input",{type:"text",id:"title",value:w.title,onChange:e=>T("title",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter task title...",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{id:"description",value:w.description,onChange:e=>T("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe the task in detail..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsxs)("select",{id:"priority",value:w.priority,onChange:e=>T("priority",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"low",children:"Low Priority"}),(0,s.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,s.jsx)("option",{value:"high",children:"High Priority"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("select",{id:"category",value:w.category,onChange:e=>T("category",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:["Administration","Events","Pastoral Care","Groups","Maintenance","Finance","Communications","Outreach","Other"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"assignedTo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign To"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsxs)("select",{id:"assignedTo",value:w.assignedTo,onChange:e=>T("assignedTo",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:"Select assignee..."}),u.map(e=>(0,s.jsxs)("option",{value:"".concat(e.firstName," ").concat(e.lastName),children:[e.firstName," ",e.lastName," (",e.role||"member",")"]},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(v.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("input",{type:"date",id:"dueDate",value:w.dueDate,onChange:e=>T("dueDate",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",min:new Date().toISOString().split("T")[0]})]})]})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",onClick:C,disabled:!A||n,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Create Task"})]})})]})]})}function w(){let{user:e}=(0,d.a)(),[t,a]=(0,r.useState)([]),[u,m]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),[y,x]=(0,r.useState)(""),[f,b]=(0,r.useState)("all"),[v,j]=(0,r.useState)("all"),[w,N]=(0,r.useState)(0),[S,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C()},[y,f,v]);let C=async()=>{try{m(!0),p(null);let e=await h.getTasks({search:y||void 0,status:"all"!==f?f:void 0,priority:"all"!==v?v:void 0,sortBy:"dueDate",sortOrder:"asc",limit:50});a(e.tasks||[]),N(e.total||0)}catch(e){p(e instanceof Error?e.message:"Failed to load tasks"),a([])}finally{m(!1)}};(0,r.useEffect)(()=>{if(0===t.length&&!u&&!g){let e=[{id:"1",title:"Update member directory",description:"Review and update contact information for all members",priority:"high",status:"pending",assignedTo:"Admin User",dueDate:"2025-09-15",createdAt:"2025-09-01T00:00:00Z",category:"Administration",createdBy:"Admin User"},{id:"2",title:"Prepare youth event",description:"Plan activities and coordinate volunteers for upcoming youth retreat",priority:"medium",status:"in_progress",assignedTo:"Pastor Smith",dueDate:"2025-09-20",createdAt:"2025-09-05T00:00:00Z",category:"Events",createdBy:"Pastor Smith"},{id:"3",title:"Review group attendance",description:"Analyze attendance patterns and reach out to inactive members",priority:"medium",status:"completed",assignedTo:"Group Leader",dueDate:"2025-09-10",createdAt:"2025-08-28T00:00:00Z",category:"Groups",createdBy:"Group Leader"}];setTimeout(()=>{a(e),m(!1)},500)}},[]);let A=t.filter(e=>{let t=e.title.toLowerCase().includes(y.toLowerCase())||e.description.toLowerCase().includes(y.toLowerCase()),a="all"===f||e.status===f,s="all"===v||e.priority===v;return t&&a&&s}),E=e=>{switch(e){case"high":return"text-red-600 bg-red-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},O=e=>{switch(e){case"completed":return(0,s.jsx)(i.Z,{className:"w-5 h-5 text-green-600"});case"in_progress":return(0,s.jsx)(n.Z,{className:"w-5 h-5 text-blue-600"});case"pending":return(0,s.jsx)(o.Z,{className:"w-5 h-5 text-yellow-600"});default:return(0,s.jsx)(o.Z,{className:"w-5 h-5 text-gray-600"})}};return u?(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded"},e))})]})}):(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tasks & Action Items"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage and track administrative tasks"})]}),(0,s.jsxs)("button",{onClick:()=>T(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),"New Task"]})]}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search tasks...",value:y,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,s.jsx)("option",{value:"all",children:"All Statuses"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,s.jsx)("option",{value:"completed",children:"Completed"})]}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,s.jsx)("option",{value:"all",children:"All Priorities"}),(0,s.jsx)("option",{value:"high",children:"High Priority"}),(0,s.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,s.jsx)("option",{value:"low",children:"Low Priority"})]})]})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[A.map(e=>(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[O(e.status),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(E(e.priority)),children:e.priority.toUpperCase()})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[e.assignedTo&&(0,s.jsxs)("span",{children:["Assigned to: ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:e.assignedTo})]}),e.dueDate&&(0,s.jsxs)("span",{children:["Due: ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:new Date(e.dueDate).toLocaleDateString()})]}),(0,s.jsxs)("span",{children:["Category: ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:e.category})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 ml-4",children:(0,s.jsx)("button",{className:"text-gray-400 hover:text-gray-600 p-2",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]})},e.id)),0===A.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(o.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]})]}),S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)(k,{onCancel:()=>T(!1),onSuccess:()=>{T(!1),C()}})})]})}},3249:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return u},a:function(){return h}});var s=a(7437),r=a(2265);let i="https://faithlink360-api.onrender.com";class n{async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),s={"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers},r=await fetch("".concat(i).concat(e),{...t,headers:s});if(!r.ok)throw Error((await r.json().catch(()=>({message:r.statusText}))).message||"HTTP ".concat(r.status,": ").concat(r.statusText));return r.json()}async login(e){let t=await fetch("".concat(i,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:t.statusText}))).message||"Login failed: ".concat(t.statusText));let a=await t.json();return a.token&&(localStorage.setItem("auth_token",a.token),localStorage.setItem("user",JSON.stringify(a.user))),a}async register(e){return this.fetchWithAuth("/api/auth/register",{method:"POST",body:JSON.stringify(e)})}async getCurrentUser(){return this.fetchWithAuth("/api/auth/me")}async refreshToken(){return this.fetchWithAuth("/api/auth/refresh",{method:"POST"})}async logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("user");try{await this.fetchWithAuth("/api/auth/logout",{method:"POST"})}catch(e){console.log("Backend logout failed, but local logout successful")}}async forgotPassword(e){return this.fetchWithAuth("/api/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})})}async resetPassword(e,t){return this.fetchWithAuth("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,password:t})})}isTokenValid(){let e=localStorage.getItem("auth_token");if(!e)return!1;try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp>Date.now()}catch(e){return!1}}}let o=new n,l=(0,r.createContext)(void 0),c=(e,t)=>{switch(t.type){case"LOGIN_START":return{...e,isLoading:!0,error:null};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_ERROR":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...e,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};default:return e}},d={user:null,isAuthenticated:!1,isLoading:!0,error:null};function u(e){let{children:t}=e,[a,i]=(0,r.useReducer)(c,d);(0,r.useEffect)(()=>{(async()=>{try{if(localStorage.getItem("auth_token")){let e=await o.getCurrentUser();i({type:"LOGIN_SUCCESS",payload:e})}}catch(e){localStorage.removeItem("auth_token")}finally{i({type:"SET_LOADING",payload:!1})}})()},[]);let n=async e=>{i({type:"LOGIN_START"});try{let t=await o.login(e);localStorage.setItem("auth_token",t.token),i({type:"LOGIN_SUCCESS",payload:t.user})}catch(e){i({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Login failed"})}},u=async e=>{i({type:"LOGIN_START"});try{let t=await o.register(e);localStorage.setItem("auth_token",t.token),i({type:"LOGIN_SUCCESS",payload:t.user})}catch(e){i({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Registration failed"})}},h={...a,login:n,register:u,logout:()=>{localStorage.removeItem("authToken"),i({type:"LOGOUT"})},clearError:()=>{i({type:"CLEAR_ERROR"})}};return(0,s.jsx)(l.Provider,{value:h,children:t})}function h(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2850:function(e,t,a){"use strict";a.d(t,{H:function(){return i}});let s="https://faithlink360-api.onrender.com";class r{async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),s=e.startsWith("http")?e:"http://localhost:8000".concat(e),r=0;for(;r<=this.MAX_RETRIES;)try{let e=await fetch(s,{...t,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers}});if(!e.ok){if(401===e.status){localStorage.removeItem("auth_token"),window.location.href="/login";return}let t=await e.json().catch(()=>({message:e.statusText}));throw Error(t.message||"HTTP ".concat(e.status,": ").concat(e.statusText))}return e.json()}catch(e){if(r<this.MAX_RETRIES&&e.message.includes("fetch")){r++,await new Promise(e=>setTimeout(e,1e3*r));continue}throw e}}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e,"-").concat(JSON.stringify(t.body||{}))}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getMembers(e){let t=new URLSearchParams;if(e){var a,s,r;e.query&&t.append("query",e.query),(null===(a=e.tags)||void 0===a?void 0:a.length)&&t.append("tags",e.tags.join(",")),(null===(s=e.membershipStatus)||void 0===s?void 0:s.length)&&t.append("status",e.membershipStatus.join(",")),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.ageRange&&(e.ageRange.min&&t.append("ageMin",e.ageRange.min.toString()),e.ageRange.max&&t.append("ageMax",e.ageRange.max.toString())),e.joinDateRange&&(e.joinDateRange.start&&t.append("joinStart",e.joinDateRange.start.toISOString()),e.joinDateRange.end&&t.append("joinEnd",e.joinDateRange.end.toISOString())),(null===(r=e.groups)||void 0===r?void 0:r.length)&&t.append("groups",e.groups.join(","))}let i="/api/members".concat(t.toString()?"?".concat(t.toString()):""),n=this.getCacheKey(i);if(this.isValidCache(n))return this.requestCache.get(n).data;if(this.pendingRequests.has(n))return this.pendingRequests.get(n);let o=this.fetchWithAuth(i).then(e=>(this.requestCache.set(n,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(n),e)).catch(e=>{throw this.pendingRequests.delete(n),e});return this.pendingRequests.set(n,o),o}async getMember(e){return this.fetchWithAuth("/api/members/".concat(e))}async createMember(e){return this.fetchWithAuth("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e){return this.fetchWithAuth("/api/members/".concat(e.id),{method:"PUT",body:JSON.stringify(e)})}async deleteMember(e){await this.fetchWithAuth("/api/members/".concat(e),{method:"DELETE"})}async getMemberStats(){return this.fetchWithAuth("/api/members/stats")}async getTags(){return this.fetchWithAuth("/api/members/tags")}async createTag(e){return this.fetchWithAuth("/api/members/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.fetchWithAuth("/api/members/tags/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){await this.fetchWithAuth("/api/members/tags/".concat(e),{method:"DELETE"})}async uploadProfilePhoto(e,t){let a=localStorage.getItem("auth_token"),r=new FormData;r.append("photo",t);let i=await fetch("".concat(s,"/api/members/").concat(e,"/photo"),{method:"POST",headers:{...a&&{Authorization:"Bearer ".concat(a)}},body:r});if(!i.ok)throw Error((await i.json().catch(()=>({message:i.statusText}))).message||"HTTP ".concat(i.status,": ").concat(i.statusText));return i.json()}async getSearchSuggestions(e){return this.fetchWithAuth("/api/members/search/suggestions?q=".concat(encodeURIComponent(e)))}async exportMembers(e){let t=new URLSearchParams;if(e){var a,r;e.query&&t.append("query",e.query),(null===(a=e.tags)||void 0===a?void 0:a.length)&&t.append("tags",e.tags.join(",")),(null===(r=e.membershipStatus)||void 0===r?void 0:r.length)&&t.append("status",e.membershipStatus.join(","))}let i=localStorage.getItem("auth_token"),n=await fetch("".concat(s,"/api/members/export").concat(t.toString()?"?".concat(t.toString()):""),{headers:{...i&&{Authorization:"Bearer ".concat(i)}}});if(!n.ok)throw Error("Export failed: ".concat(n.statusText));return n.blob()}async bulkUpdateMembers(e,t){return this.fetchWithAuth("/api/members/bulk",{method:"PUT",body:JSON.stringify({memberIds:e,updates:t})})}async bulkDeleteMembers(e){return this.fetchWithAuth("/api/members/bulk",{method:"DELETE",body:JSON.stringify({memberIds:e})})}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let i=new r}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=9515)}),_N_E=e.O()}]);