"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7818],{9763:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{color:o="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:d="",children:h,...m}=a;return(0,r.createElement)("svg",{ref:i,...n,width:l,height:l,stroke:o,strokeWidth:c?24*Number(u)/Number(l):u,className:["lucide","lucide-".concat(s(e)),d].join(" "),...m},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},6221:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1769:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1047:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8997:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9637:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3774:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8293:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3417:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3229:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8728:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2720:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},8896:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},7806:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2369:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,a){var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},5706:function(e,t,a){a.d(t,{Z:function(){return g}});var r=a(7437),n=a(2265),s=a(9376),i=a(3249),o=a(3430),l=a(2850),u=a(5805),c=a(1723),d=a(3774),h=a(2489),m=a(2720),p=a(3229);function g(e){var t,a,g,y;let{group:f,onSave:b,onCancel:x}=e,{user:v}=(0,i.a)(),k=(0,s.useRouter)(),[S,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(null),[A,T]=(0,n.useState)([]),[M,C]=(0,n.useState)([]),[E,R]=(0,n.useState)({name:(null==f?void 0:f.name)||"",description:(null==f?void 0:f.description)||"",type:(null==f?void 0:f.type)||"small_group",leaderId:(null==f?void 0:f.leaderId)||(null==v?void 0:v.id)||"",coLeaderIds:(null==f?void 0:f.coLeaderIds)||[],maxMembers:(null==f?void 0:f.maxMembers)||void 0,location:(null==f?void 0:f.location)||"",tags:(null==f?void 0:f.tags)||[],meetingSchedule:{frequency:(null==f?void 0:null===(t=f.meetingSchedule)||void 0===t?void 0:t.frequency)||"weekly",dayOfWeek:(null==f?void 0:null===(a=f.meetingSchedule)||void 0===a?void 0:a.dayOfWeek)||0,time:(null==f?void 0:null===(g=f.meetingSchedule)||void 0===g?void 0:g.time)||"",duration:(null==f?void 0:null===(y=f.meetingSchedule)||void 0===y?void 0:y.duration)||60}}),[q,Z]=(0,n.useState)("");(0,n.useEffect)(()=>{W()},[]);let W=async()=>{try{let[e,t]=await Promise.all([l.H.getMembers({limit:1e3}),o.P.getGroupTypes()]);T(e.members),C(t)}catch(e){N("Failed to load form data")}},O=(e,t)=>{if(e.startsWith("meetingSchedule.")){let a=e.split(".")[1];R(e=>({...e,meetingSchedule:{...e.meetingSchedule,[a]:t}}))}else R(a=>({...a,[e]:t}))},I=()=>{q.trim()&&!E.tags.includes(q.trim())&&(R(e=>({...e,tags:[...e.tags,q.trim()]})),Z(""))},P=e=>{R(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},G=async e=>{if(e.preventDefault(),!E.name.trim()){N("Group name is required");return}j(!0),N(null);try{let e;let t={name:E.name.trim(),description:E.description.trim()||void 0,type:E.type,leaderId:E.leaderId,coLeaderIds:E.coLeaderIds.length>0?E.coLeaderIds:void 0,maxMembers:E.maxMembers||void 0,location:E.location.trim()||void 0,tags:E.tags.length>0?E.tags:void 0,meetingSchedule:{frequency:E.meetingSchedule.frequency,dayOfWeek:E.meetingSchedule.dayOfWeek,time:E.meetingSchedule.time||void 0,duration:E.meetingSchedule.duration}};e=f?await o.P.updateGroup({id:f.id,...t}):await o.P.createGroup(t),b?b(e):k.push("/groups/".concat(e.id))}catch(e){N(e instanceof Error?e.message:"Failed to save group")}finally{j(!1)}};return(0,r.jsxs)("form",{onSubmit:G,className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[w&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("div",{className:"text-sm text-red-700",children:w})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Group Name *"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.name,onChange:e=>O("name",e.target.value),placeholder:"Enter group name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Group Type *"}),(0,r.jsx)("select",{required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.type,onChange:e=>O("type",e.target.value),children:M.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.description,onChange:e=>O("description",e.target.value),placeholder:"Describe the group's purpose and activities"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Leadership"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Group Leader *"}),(0,r.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.leaderId,onChange:e=>O("leaderId",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select a leader"}),A.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Co-Leaders (Optional)"}),(0,r.jsx)("select",{multiple:!0,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.coLeaderIds,onChange:e=>O("coLeaderIds",Array.from(e.target.selectedOptions,e=>e.value)),children:A.filter(e=>e.id!==E.leaderId).map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))}),(0,r.jsx)("p",{className:"mt-1 text-xs text-neutral-500",children:"Hold Ctrl/Cmd to select multiple"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 mr-2"}),"Meeting Schedule"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Frequency"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.meetingSchedule.frequency,onChange:e=>O("meetingSchedule.frequency",e.target.value),children:[(0,r.jsx)("option",{value:"weekly",children:"Weekly"}),(0,r.jsx)("option",{value:"biweekly",children:"Bi-weekly"}),(0,r.jsx)("option",{value:"monthly",children:"Monthly"}),(0,r.jsx)("option",{value:"irregular",children:"Irregular"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Day of Week"}),(0,r.jsx)("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.meetingSchedule.dayOfWeek,onChange:e=>O("meetingSchedule.dayOfWeek",parseInt(e.target.value)),children:[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Time"}),(0,r.jsx)("input",{type:"time",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.meetingSchedule.time,onChange:e=>O("meetingSchedule.time",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Duration (minutes)"}),(0,r.jsx)("input",{type:"number",min:"15",max:"480",step:"15",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.meetingSchedule.duration,onChange:e=>O("meetingSchedule.duration",parseInt(e.target.value))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-neutral-900 flex items-center",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 mr-2"}),"Additional Details"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Meeting Location"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.location,onChange:e=>O("location",e.target.value),placeholder:"e.g., Room 201, Online, Community Center"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Maximum Members"}),(0,r.jsx)("input",{type:"number",min:"1",max:"500",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:E.maxMembers||"",onChange:e=>O("maxMembers",e.target.value?parseInt(e.target.value):void 0),placeholder:"Leave empty for no limit"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:E.tags.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:[e,(0,r.jsx)("button",{type:"button",className:"ml-1 text-primary-600 hover:text-primary-800",onClick:()=>P(e),children:(0,r.jsx)(h.Z,{className:"w-3 h-3"})})]},e))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:q,onChange:e=>Z(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),I())}}),(0,r.jsx)("button",{type:"button",onClick:I,className:"px-3 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:(0,r.jsx)(m.Z,{className:"w-4 h-4"})})]})]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-neutral-50 border-t border-neutral-200 flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{x?x():k.back()},className:"px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:S,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[S?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,r.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),f?"Update Group":"Create Group"]})]})]})}},3430:function(e,t,a){a.d(t,{P:function(){return s}});let r="https://faithlink360-api.onrender.com";class n{async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),n={"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers},s=0;for(;s<=this.MAX_RETRIES;)try{let a=await fetch("".concat(r).concat(e),{...t,headers:n});if(!a.ok){if(429===a.status&&s<this.MAX_RETRIES){await new Promise(e=>setTimeout(e,1e3*(s+1))),s++;continue}let e=await a.json().catch(()=>({message:a.statusText}));throw Error(e.message||"HTTP ".concat(a.status,": ").concat(a.statusText))}return a.json()}catch(e){if(s<this.MAX_RETRIES&&e.message.includes("fetch")){s++,await new Promise(e=>setTimeout(e,1e3*s));continue}throw e}}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e,"-").concat(JSON.stringify(t.body||{}))}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getGroups(e){let t=new URLSearchParams;if(e){var a,r,n;e.query&&t.append("query",e.query),(null===(a=e.type)||void 0===a?void 0:a.length)&&t.append("type",e.type.join(",")),(null===(r=e.status)||void 0===r?void 0:r.length)&&t.append("status",e.status.join(",")),e.leaderId&&t.append("leaderId",e.leaderId),(null===(n=e.tags)||void 0===n?void 0:n.length)&&t.append("tags",e.tags.join(",")),void 0!==e.hasAvailableSpace&&t.append("hasAvailableSpace",e.hasAvailableSpace.toString()),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString())}let s="/api/groups".concat(t.toString()?"?".concat(t.toString()):""),i=this.getCacheKey(s);if(this.isValidCache(i))return this.requestCache.get(i).data;if(this.pendingRequests.has(i))return this.pendingRequests.get(i);let o=this.fetchWithAuth(s).then(e=>(this.requestCache.set(i,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(i),e)).catch(e=>{throw this.pendingRequests.delete(i),e});return this.pendingRequests.set(i,o),o}async getGroup(e){return this.fetchWithAuth("/api/groups/".concat(e))}async createGroup(e){return this.fetchWithAuth("/api/groups",{method:"POST",body:JSON.stringify(e)})}async updateGroup(e){return this.fetchWithAuth("/api/groups/".concat(e.id),{method:"PUT",body:JSON.stringify(e)})}async deleteGroup(e){await this.fetchWithAuth("/api/groups/".concat(e),{method:"DELETE"})}async getGroupMembers(e){return(await this.fetchWithAuth("/api/groups/".concat(e,"/members"))).members||[]}async addGroupMember(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member";return this.fetchWithAuth("/api/groups/".concat(e,"/members"),{method:"POST",body:JSON.stringify({memberId:t,role:a})})}async updateGroupMember(e,t,a){return this.fetchWithAuth("/api/groups/".concat(e,"/members/").concat(t),{method:"PUT",body:JSON.stringify(a)})}async removeGroupMember(e,t){await this.fetchWithAuth("/api/groups/".concat(e,"/members/").concat(t),{method:"DELETE"})}async getGroupAttendance(e,t,a){let r=new URLSearchParams;t&&r.append("startDate",t),a&&r.append("endDate",a);let n="/api/groups/".concat(e,"/attendance").concat(r.toString()?"?".concat(r.toString()):"");return this.fetchWithAuth(n)}async recordAttendance(e){return this.fetchWithAuth("/api/groups/".concat(e.groupId,"/attendance"),{method:"POST",body:JSON.stringify(e)})}async updateAttendance(e,t,a){return this.fetchWithAuth("/api/groups/".concat(e,"/attendance/").concat(t),{method:"PUT",body:JSON.stringify(a)})}async deleteAttendance(e,t){await this.fetchWithAuth("/api/groups/".concat(e,"/attendance/").concat(t),{method:"DELETE"})}async getGroupStats(){return this.fetchWithAuth("/api/groups/stats")}async getGroupAttendanceStats(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month";return this.fetchWithAuth("/api/groups/".concat(e,"/stats/attendance?period=").concat(t))}async exportGroups(e){let t=new URLSearchParams;if(e){var a,n;e.query&&t.append("query",e.query),(null===(a=e.type)||void 0===a?void 0:a.length)&&t.append("type",e.type.join(",")),(null===(n=e.status)||void 0===n?void 0:n.length)&&t.append("status",e.status.join(","))}let s=localStorage.getItem("auth_token"),i=await fetch("".concat(r,"/api/groups/export").concat(t.toString()?"?".concat(t.toString()):""),{headers:{...s&&{Authorization:"Bearer ".concat(s)}}});if(!i.ok)throw Error("Export failed: ".concat(i.statusText));return i.blob()}async bulkUpdateGroups(e,t){return this.fetchWithAuth("/api/groups/bulk",{method:"PUT",body:JSON.stringify({groupIds:e,updates:t})})}async bulkDeleteGroups(e){return this.fetchWithAuth("/api/groups/bulk",{method:"DELETE",body:JSON.stringify({groupIds:e})})}async getGroupTypes(){return[{value:"small_group",label:"Small Group",description:"Intimate fellowship and Bible study groups"},{value:"ministry",label:"Ministry Team",description:"Service-focused ministry groups"},{value:"youth",label:"Youth Group",description:"Teen and young adult groups"},{value:"seniors",label:"Seniors Group",description:"Groups for older adults"},{value:"womens",label:"Women's Group",description:"Women's fellowship and study groups"},{value:"mens",label:"Men's Group",description:"Men's fellowship and study groups"},{value:"children",label:"Children's Group",description:"Groups for children and families"},{value:"worship",label:"Worship Team",description:"Music and worship ministry teams"},{value:"service",label:"Service Team",description:"Community service and outreach teams"},{value:"bible_study",label:"Bible Study",description:"Scripture study and discussion groups"},{value:"prayer",label:"Prayer Group",description:"Prayer and intercession groups"},{value:"outreach",label:"Outreach Team",description:"Evangelism and community outreach"},{value:"other",label:"Other",description:"Custom group types"}]}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let s=new n},2850:function(e,t,a){a.d(t,{H:function(){return s}});let r="https://faithlink360-api.onrender.com";class n{async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),r=e.startsWith("http")?e:"http://localhost:8000".concat(e),n=0;for(;n<=this.MAX_RETRIES;)try{let e=await fetch(r,{...t,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers}});if(!e.ok){if(401===e.status){localStorage.removeItem("auth_token"),window.location.href="/login";return}let t=await e.json().catch(()=>({message:e.statusText}));throw Error(t.message||"HTTP ".concat(e.status,": ").concat(e.statusText))}return e.json()}catch(e){if(n<this.MAX_RETRIES&&e.message.includes("fetch")){n++,await new Promise(e=>setTimeout(e,1e3*n));continue}throw e}}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e,"-").concat(JSON.stringify(t.body||{}))}isValidCache(e){let t=this.requestCache.get(e);return!!t&&Date.now()-t.timestamp<this.CACHE_DURATION}async getMembers(e){let t=new URLSearchParams;if(e){var a,r,n;e.query&&t.append("query",e.query),(null===(a=e.tags)||void 0===a?void 0:a.length)&&t.append("tags",e.tags.join(",")),(null===(r=e.membershipStatus)||void 0===r?void 0:r.length)&&t.append("status",e.membershipStatus.join(",")),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.ageRange&&(e.ageRange.min&&t.append("ageMin",e.ageRange.min.toString()),e.ageRange.max&&t.append("ageMax",e.ageRange.max.toString())),e.joinDateRange&&(e.joinDateRange.start&&t.append("joinStart",e.joinDateRange.start.toISOString()),e.joinDateRange.end&&t.append("joinEnd",e.joinDateRange.end.toISOString())),(null===(n=e.groups)||void 0===n?void 0:n.length)&&t.append("groups",e.groups.join(","))}let s="/api/members".concat(t.toString()?"?".concat(t.toString()):""),i=this.getCacheKey(s);if(this.isValidCache(i))return this.requestCache.get(i).data;if(this.pendingRequests.has(i))return this.pendingRequests.get(i);let o=this.fetchWithAuth(s).then(e=>(this.requestCache.set(i,{data:e,timestamp:Date.now()}),this.pendingRequests.delete(i),e)).catch(e=>{throw this.pendingRequests.delete(i),e});return this.pendingRequests.set(i,o),o}async getMember(e){return this.fetchWithAuth("/api/members/".concat(e))}async createMember(e){return this.fetchWithAuth("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e){return this.fetchWithAuth("/api/members/".concat(e.id),{method:"PUT",body:JSON.stringify(e)})}async deleteMember(e){await this.fetchWithAuth("/api/members/".concat(e),{method:"DELETE"})}async getMemberStats(){return this.fetchWithAuth("/api/members/stats")}async getTags(){return this.fetchWithAuth("/api/members/tags")}async createTag(e){return this.fetchWithAuth("/api/members/tags",{method:"POST",body:JSON.stringify(e)})}async updateTag(e,t){return this.fetchWithAuth("/api/members/tags/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTag(e){await this.fetchWithAuth("/api/members/tags/".concat(e),{method:"DELETE"})}async uploadProfilePhoto(e,t){let a=localStorage.getItem("auth_token"),n=new FormData;n.append("photo",t);let s=await fetch("".concat(r,"/api/members/").concat(e,"/photo"),{method:"POST",headers:{...a&&{Authorization:"Bearer ".concat(a)}},body:n});if(!s.ok)throw Error((await s.json().catch(()=>({message:s.statusText}))).message||"HTTP ".concat(s.status,": ").concat(s.statusText));return s.json()}async getSearchSuggestions(e){return this.fetchWithAuth("/api/members/search/suggestions?q=".concat(encodeURIComponent(e)))}async exportMembers(e){let t=new URLSearchParams;if(e){var a,n;e.query&&t.append("query",e.query),(null===(a=e.tags)||void 0===a?void 0:a.length)&&t.append("tags",e.tags.join(",")),(null===(n=e.membershipStatus)||void 0===n?void 0:n.length)&&t.append("status",e.membershipStatus.join(","))}let s=localStorage.getItem("auth_token"),i=await fetch("".concat(r,"/api/members/export").concat(t.toString()?"?".concat(t.toString()):""),{headers:{...s&&{Authorization:"Bearer ".concat(s)}}});if(!i.ok)throw Error("Export failed: ".concat(i.statusText));return i.blob()}async bulkUpdateMembers(e,t){return this.fetchWithAuth("/api/members/bulk",{method:"PUT",body:JSON.stringify({memberIds:e,updates:t})})}async bulkDeleteMembers(e){return this.fetchWithAuth("/api/members/bulk",{method:"DELETE",body:JSON.stringify({memberIds:e})})}constructor(){this.requestCache=new Map,this.pendingRequests=new Map,this.CACHE_DURATION=3e4,this.MAX_RETRIES=2}}let s=new n}}]);